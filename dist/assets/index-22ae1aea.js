import{r as j,b as Bi,a as z,g as Vi,c as Hi,d as pe}from"./vendor-abc4fb99.js";import{u as Gi,a as te,N as Ji,O as Wi,b as Re,L as Oe,c as Ki,d as Rr,R as Qi,e as U,B as Xi}from"./router-4d0cf74f.js";import{_ as le}from"./pdf-eb8c75c2.js";import{m,C as ke,B as Or,U as gt,H as Yi,a as ve,M as Zi,b as eo,c as Pa,S as to,P as Dr,d as Ca,e as so,X as $t,A as Xe,f as ds,g as be,I as us,h as Lt,i as bt,L as Ye,E as Mt,j as Te,k as Pe,l as ia,n as zt,o as he,p as ye,T as je,Z as de,q as Ke,r as Ze,s as qe,t as Ha,u as Z,v as ao,w as Qe,x as ro,y as io,z as $r,D as oa,F as ys,G as me,J as oo,K as no,N as Lr,R as lo,O as co,Q as uo,V as ho,W as Ls,Y as mo,_ as po,$ as Ga,a0 as Ms,a1 as na,a2 as la,a3 as Us,a4 as kt,a5 as fo,a6 as ca,a7 as go,a8 as Ja,a9 as Wa,aa as xo,ab as yo}from"./ui-4d99af29.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Mr={exports:{}},bs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=j,wo=Symbol.for("react.element"),vo=Symbol.for("react.fragment"),jo=Object.prototype.hasOwnProperty,No=bo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_o={key:!0,ref:!0,__self:!0,__source:!0};function Ur(r,e,t){var a,i={},o=null,n=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(n=e.ref);for(a in e)jo.call(e,a)&&!_o.hasOwnProperty(a)&&(i[a]=e[a]);if(r&&r.defaultProps)for(a in e=r.defaultProps,e)i[a]===void 0&&(i[a]=e[a]);return{$$typeof:wo,type:r,key:o,ref:n,props:i,_owner:No.current}}bs.Fragment=vo;bs.jsx=Ur;bs.jsxs=Ur;Mr.exports=bs;var s=Mr.exports,da={},Ka=Bi;da.createRoot=Ka.createRoot,da.hydrateRoot=Ka.hydrateRoot;function qr(r){var e,t,a="";if(typeof r=="string"||typeof r=="number")a+=r;else if(typeof r=="object")if(Array.isArray(r))for(e=0;e<r.length;e++)r[e]&&(t=qr(r[e]))&&(a&&(a+=" "),a+=t);else for(e in r)r[e]&&(a&&(a+=" "),a+=e);return a}function Ue(){for(var r,e,t=0,a="";t<arguments.length;)(r=arguments[t++])&&(e=qr(r))&&(a&&(a+=" "),a+=e);return a}const At=r=>typeof r=="number"&&!isNaN(r),et=r=>typeof r=="string",oe=r=>typeof r=="function",rs=r=>et(r)||oe(r)?r:null,qs=r=>j.isValidElement(r)||et(r)||oe(r)||At(r);function So(r,e,t){t===void 0&&(t=300);const{scrollHeight:a,style:i}=r;requestAnimationFrame(()=>{i.minHeight="initial",i.height=a+"px",i.transition=`all ${t}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,t)})})}function ws(r){let{enter:e,exit:t,appendPosition:a=!1,collapse:i=!0,collapseDuration:o=300}=r;return function(n){let{children:l,position:c,preventExitTransition:u,done:d,nodeRef:h,isIn:b}=n;const g=a?`${e}--${c}`:e,f=a?`${t}--${c}`:t,y=j.useRef(0);return j.useLayoutEffect(()=>{const p=h.current,N=g.split(" "),w=x=>{x.target===h.current&&(p.dispatchEvent(new Event("d")),p.removeEventListener("animationend",w),p.removeEventListener("animationcancel",w),y.current===0&&x.type!=="animationcancel"&&p.classList.remove(...N))};p.classList.add(...N),p.addEventListener("animationend",w),p.addEventListener("animationcancel",w)},[]),j.useEffect(()=>{const p=h.current,N=()=>{p.removeEventListener("animationend",N),i?So(p,d,o):d()};b||(u?N():(y.current=1,p.className+=` ${f}`,p.addEventListener("animationend",N)))},[b]),z.createElement(z.Fragment,null,l)}}function Qa(r,e){return r!=null?{content:r.content,containerId:r.props.containerId,id:r.props.toastId,theme:r.props.theme,type:r.props.type,data:r.props.data||{},isLoading:r.props.isLoading,icon:r.props.icon,status:e}:{}}const ue={list:new Map,emitQueue:new Map,on(r,e){return this.list.has(r)||this.list.set(r,[]),this.list.get(r).push(e),this},off(r,e){if(e){const t=this.list.get(r).filter(a=>a!==e);return this.list.set(r,t),this}return this.list.delete(r),this},cancelEmit(r){const e=this.emitQueue.get(r);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(r)),this},emit(r){this.list.has(r)&&this.list.get(r).forEach(e=>{const t=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(r)||this.emitQueue.set(r,[]),this.emitQueue.get(r).push(t)})}},Kt=r=>{let{theme:e,type:t,...a}=r;return z.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...a})},Fs={info:function(r){return z.createElement(Kt,{...r},z.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(r){return z.createElement(Kt,{...r},z.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(r){return z.createElement(Kt,{...r},z.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(r){return z.createElement(Kt,{...r},z.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return z.createElement("div",{className:"Toastify__spinner"})}};function Eo(r){const[,e]=j.useReducer(g=>g+1,0),[t,a]=j.useState([]),i=j.useRef(null),o=j.useRef(new Map).current,n=g=>t.indexOf(g)!==-1,l=j.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:r,containerId:null,isToastActive:n,getToast:g=>o.get(g)}).current;function c(g){let{containerId:f}=g;const{limit:y}=l.props;!y||f&&l.containerId!==f||(l.count-=l.queue.length,l.queue=[])}function u(g){a(f=>g==null?[]:f.filter(y=>y!==g))}function d(){const{toastContent:g,toastProps:f,staleId:y}=l.queue.shift();b(g,f,y)}function h(g,f){let{delay:y,staleId:p,...N}=f;if(!qs(g)||function(A){return!i.current||l.props.enableMultiContainer&&A.containerId!==l.props.containerId||o.has(A.toastId)&&A.updateId==null}(N))return;const{toastId:w,updateId:x,data:v}=N,{props:k}=l,T=()=>u(w),P=x==null;P&&l.count++;const R={...k,style:k.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(N).filter(A=>{let[F,q]=A;return q!=null})),toastId:w,updateId:x,data:v,closeToast:T,isIn:!1,className:rs(N.className||k.toastClassName),bodyClassName:rs(N.bodyClassName||k.bodyClassName),progressClassName:rs(N.progressClassName||k.progressClassName),autoClose:!N.isLoading&&(C=N.autoClose,S=k.autoClose,C===!1||At(C)&&C>0?C:S),deleteToast(){const A=Qa(o.get(w),"removed");o.delete(w),ue.emit(4,A);const F=l.queue.length;if(l.count=w==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),F>0){const q=w==null?l.props.limit:1;if(F===1||q===1)l.displayedToast++,d();else{const O=q>F?F:q;l.displayedToast=O;for(let H=0;H<O;H++)d()}}else e()}};var C,S;R.iconOut=function(A){let{theme:F,type:q,isLoading:O,icon:H}=A,W=null;const se={theme:F,type:q};return H===!1||(oe(H)?W=H(se):j.isValidElement(H)?W=j.cloneElement(H,se):et(H)||At(H)?W=H:O?W=Fs.spinner():(ce=>ce in Fs)(q)&&(W=Fs[q](se))),W}(R),oe(N.onOpen)&&(R.onOpen=N.onOpen),oe(N.onClose)&&(R.onClose=N.onClose),R.closeButton=k.closeButton,N.closeButton===!1||qs(N.closeButton)?R.closeButton=N.closeButton:N.closeButton===!0&&(R.closeButton=!qs(k.closeButton)||k.closeButton);let E=g;j.isValidElement(g)&&!et(g.type)?E=j.cloneElement(g,{closeToast:T,toastProps:R,data:v}):oe(g)&&(E=g({closeToast:T,toastProps:R,data:v})),k.limit&&k.limit>0&&l.count>k.limit&&P?l.queue.push({toastContent:E,toastProps:R,staleId:p}):At(y)?setTimeout(()=>{b(E,R,p)},y):b(E,R,p)}function b(g,f,y){const{toastId:p}=f;y&&o.delete(y);const N={content:g,props:f};o.set(p,N),a(w=>[...w,p].filter(x=>x!==y)),ue.emit(4,Qa(N,N.props.updateId==null?"added":"updated"))}return j.useEffect(()=>(l.containerId=r.containerId,ue.cancelEmit(3).on(0,h).on(1,g=>i.current&&u(g)).on(5,c).emit(2,l),()=>{o.clear(),ue.emit(3,l)}),[]),j.useEffect(()=>{l.props=r,l.isToastActive=n,l.displayedToast=t.length}),{getToastToRender:function(g){const f=new Map,y=Array.from(o.values());return r.newestOnTop&&y.reverse(),y.forEach(p=>{const{position:N}=p.props;f.has(N)||f.set(N,[]),f.get(N).push(p)}),Array.from(f,p=>g(p[0],p[1]))},containerRef:i,isToastActive:n}}function Xa(r){return r.targetTouches&&r.targetTouches.length>=1?r.targetTouches[0].clientX:r.clientX}function Ya(r){return r.targetTouches&&r.targetTouches.length>=1?r.targetTouches[0].clientY:r.clientY}function ko(r){const[e,t]=j.useState(!1),[a,i]=j.useState(!1),o=j.useRef(null),n=j.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=j.useRef(r),{autoClose:c,pauseOnHover:u,closeToast:d,onClick:h,closeOnClick:b}=r;function g(v){if(r.draggable){v.nativeEvent.type==="touchstart"&&v.nativeEvent.preventDefault(),n.didMove=!1,document.addEventListener("mousemove",N),document.addEventListener("mouseup",w),document.addEventListener("touchmove",N),document.addEventListener("touchend",w);const k=o.current;n.canCloseOnClick=!0,n.canDrag=!0,n.boundingRect=k.getBoundingClientRect(),k.style.transition="",n.x=Xa(v.nativeEvent),n.y=Ya(v.nativeEvent),r.draggableDirection==="x"?(n.start=n.x,n.removalDistance=k.offsetWidth*(r.draggablePercent/100)):(n.start=n.y,n.removalDistance=k.offsetHeight*(r.draggablePercent===80?1.5*r.draggablePercent:r.draggablePercent/100))}}function f(v){if(n.boundingRect){const{top:k,bottom:T,left:P,right:R}=n.boundingRect;v.nativeEvent.type!=="touchend"&&r.pauseOnHover&&n.x>=P&&n.x<=R&&n.y>=k&&n.y<=T?p():y()}}function y(){t(!0)}function p(){t(!1)}function N(v){const k=o.current;n.canDrag&&k&&(n.didMove=!0,e&&p(),n.x=Xa(v),n.y=Ya(v),n.delta=r.draggableDirection==="x"?n.x-n.start:n.y-n.start,n.start!==n.x&&(n.canCloseOnClick=!1),k.style.transform=`translate${r.draggableDirection}(${n.delta}px)`,k.style.opacity=""+(1-Math.abs(n.delta/n.removalDistance)))}function w(){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",w),document.removeEventListener("touchmove",N),document.removeEventListener("touchend",w);const v=o.current;if(n.canDrag&&n.didMove&&v){if(n.canDrag=!1,Math.abs(n.delta)>n.removalDistance)return i(!0),void r.closeToast();v.style.transition="transform 0.2s, opacity 0.2s",v.style.transform=`translate${r.draggableDirection}(0)`,v.style.opacity="1"}}j.useEffect(()=>{l.current=r}),j.useEffect(()=>(o.current&&o.current.addEventListener("d",y,{once:!0}),oe(r.onOpen)&&r.onOpen(j.isValidElement(r.children)&&r.children.props),()=>{const v=l.current;oe(v.onClose)&&v.onClose(j.isValidElement(v.children)&&v.children.props)}),[]),j.useEffect(()=>(r.pauseOnFocusLoss&&(document.hasFocus()||p(),window.addEventListener("focus",y),window.addEventListener("blur",p)),()=>{r.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",p))}),[r.pauseOnFocusLoss]);const x={onMouseDown:g,onTouchStart:g,onMouseUp:f,onTouchEnd:f};return c&&u&&(x.onMouseEnter=p,x.onMouseLeave=y),b&&(x.onClick=v=>{h&&h(v),n.canCloseOnClick&&d()}),{playToast:y,pauseToast:p,isRunning:e,preventExitTransition:a,toastRef:o,eventHandlers:x}}function Fr(r){let{closeToast:e,theme:t,ariaLabel:a="close"}=r;return z.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":a},z.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},z.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function To(r){let{delay:e,isRunning:t,closeToast:a,type:i="default",hide:o,className:n,style:l,controlledProgress:c,progress:u,rtl:d,isIn:h,theme:b}=r;const g=o||c&&u===0,f={...l,animationDuration:`${e}ms`,animationPlayState:t?"running":"paused",opacity:g?0:1};c&&(f.transform=`scaleX(${u})`);const y=Ue("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${b}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":d}),p=oe(n)?n({rtl:d,type:i,defaultClassName:y}):Ue(y,n);return z.createElement("div",{role:"progressbar","aria-hidden":g?"true":"false","aria-label":"notification timer",className:p,style:f,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{h&&a()}})}const Po=r=>{const{isRunning:e,preventExitTransition:t,toastRef:a,eventHandlers:i}=ko(r),{closeButton:o,children:n,autoClose:l,onClick:c,type:u,hideProgressBar:d,closeToast:h,transition:b,position:g,className:f,style:y,bodyClassName:p,bodyStyle:N,progressClassName:w,progressStyle:x,updateId:v,role:k,progress:T,rtl:P,toastId:R,deleteToast:C,isIn:S,isLoading:E,iconOut:A,closeOnClick:F,theme:q}=r,O=Ue("Toastify__toast",`Toastify__toast-theme--${q}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":P},{"Toastify__toast--close-on-click":F}),H=oe(f)?f({rtl:P,position:g,type:u,defaultClassName:O}):Ue(O,f),W=!!T||!l,se={closeToast:h,type:u,theme:q};let ce=null;return o===!1||(ce=oe(o)?o(se):j.isValidElement(o)?j.cloneElement(o,se):Fr(se)),z.createElement(b,{isIn:S,done:C,position:g,preventExitTransition:t,nodeRef:a},z.createElement("div",{id:R,onClick:c,className:H,...i,style:y,ref:a},z.createElement("div",{...S&&{role:k},className:oe(p)?p({type:u}):Ue("Toastify__toast-body",p),style:N},A!=null&&z.createElement("div",{className:Ue("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},A),z.createElement("div",null,n)),ce,z.createElement(To,{...v&&!W?{key:`pb-${v}`}:{},rtl:P,theme:q,delay:l,isRunning:e,isIn:S,closeToast:h,hide:d,type:u,style:x,className:w,controlledProgress:W,progress:T||0})))},vs=function(r,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${r}-enter`,exit:`Toastify--animate Toastify__${r}-exit`,appendPosition:e}},Co=ws(vs("bounce",!0));ws(vs("slide",!0));ws(vs("zoom"));ws(vs("flip"));const ua=j.forwardRef((r,e)=>{const{getToastToRender:t,containerRef:a,isToastActive:i}=Eo(r),{className:o,style:n,rtl:l,containerId:c}=r;function u(d){const h=Ue("Toastify__toast-container",`Toastify__toast-container--${d}`,{"Toastify__toast-container--rtl":l});return oe(o)?o({position:d,rtl:l,defaultClassName:h}):Ue(h,rs(o))}return j.useEffect(()=>{e&&(e.current=a.current)},[]),z.createElement("div",{ref:a,className:"Toastify",id:c},t((d,h)=>{const b=h.length?{...n}:{...n,pointerEvents:"none"};return z.createElement("div",{className:u(d),style:b,key:`container-${d}`},h.map((g,f)=>{let{content:y,props:p}=g;return z.createElement(Po,{...p,isIn:i(p.toastId),style:{...p.style,"--nth":f+1,"--len":h.length},key:`toast-${p.key}`},y)}))}))});ua.displayName="ToastContainer",ua.defaultProps={position:"top-right",transition:Co,autoClose:5e3,closeButton:Fr,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let zs,Ve=new Map,Tt=[],Ao=1;function zr(){return""+Ao++}function Io(r){return r&&(et(r.toastId)||At(r.toastId))?r.toastId:zr()}function It(r,e){return Ve.size>0?ue.emit(0,r,e):Tt.push({content:r,options:e}),e.toastId}function hs(r,e){return{...e,type:e&&e.type||r,toastId:Io(e)}}function Qt(r){return(e,t)=>It(e,hs(r,t))}function L(r,e){return It(r,hs("default",e))}L.loading=(r,e)=>It(r,hs("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),L.promise=function(r,e,t){let a,{pending:i,error:o,success:n}=e;i&&(a=et(i)?L.loading(i,t):L.loading(i.render,{...t,...i}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(d,h,b)=>{if(h==null)return void L.dismiss(a);const g={type:d,...l,...t,data:b},f=et(h)?{render:h}:h;return a?L.update(a,{...g,...f}):L(f.render,{...g,...f}),b},u=oe(r)?r():r;return u.then(d=>c("success",n,d)).catch(d=>c("error",o,d)),u},L.success=Qt("success"),L.info=Qt("info"),L.error=Qt("error"),L.warning=Qt("warning"),L.warn=L.warning,L.dark=(r,e)=>It(r,hs("default",{theme:"dark",...e})),L.dismiss=r=>{Ve.size>0?ue.emit(1,r):Tt=Tt.filter(e=>r!=null&&e.options.toastId!==r)},L.clearWaitingQueue=function(r){return r===void 0&&(r={}),ue.emit(5,r)},L.isActive=r=>{let e=!1;return Ve.forEach(t=>{t.isToastActive&&t.isToastActive(r)&&(e=!0)}),e},L.update=function(r,e){e===void 0&&(e={}),setTimeout(()=>{const t=function(a,i){let{containerId:o}=i;const n=Ve.get(o||zs);return n&&n.getToast(a)}(r,e);if(t){const{props:a,content:i}=t,o={delay:100,...a,...e,toastId:e.toastId||r,updateId:zr()};o.toastId!==r&&(o.staleId=r);const n=o.render||i;delete o.render,It(n,o)}},0)},L.done=r=>{L.update(r,{progress:1})},L.onChange=r=>(ue.on(4,r),()=>{ue.off(4,r)}),L.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},L.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},ue.on(2,r=>{zs=r.containerId||r,Ve.set(zs,r),Tt.forEach(e=>{ue.emit(0,e.content,e.options)}),Tt=[]}).on(3,r=>{Ve.delete(r.containerId||r),Ve.size===0&&ue.off(0).off(1).off(5)});const Za=r=>{let e;const t=new Set,a=(d,h)=>{const b=typeof d=="function"?d(e):d;if(!Object.is(b,e)){const g=e;e=h??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(f=>f(e,g))}},i=()=>e,c={setState:a,getState:i,getInitialState:()=>u,subscribe:d=>(t.add(d),()=>t.delete(d)),destroy:()=>{t.clear()}},u=e=r(a,i,c);return c},Ro=r=>r?Za(r):Za;var Br={exports:{}},Vr={},Hr={exports:{}},Gr={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=j;function Oo(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Do=typeof Object.is=="function"?Object.is:Oo,$o=xt.useState,Lo=xt.useEffect,Mo=xt.useLayoutEffect,Uo=xt.useDebugValue;function qo(r,e){var t=e(),a=$o({inst:{value:t,getSnapshot:e}}),i=a[0].inst,o=a[1];return Mo(function(){i.value=t,i.getSnapshot=e,Bs(i)&&o({inst:i})},[r,t,e]),Lo(function(){return Bs(i)&&o({inst:i}),r(function(){Bs(i)&&o({inst:i})})},[r]),Uo(t),t}function Bs(r){var e=r.getSnapshot;r=r.value;try{var t=e();return!Do(r,t)}catch{return!0}}function Fo(r,e){return e()}var zo=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fo:qo;Gr.useSyncExternalStore=xt.useSyncExternalStore!==void 0?xt.useSyncExternalStore:zo;Hr.exports=Gr;var Bo=Hr.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var js=j,Vo=Bo;function Ho(r,e){return r===e&&(r!==0||1/r===1/e)||r!==r&&e!==e}var Go=typeof Object.is=="function"?Object.is:Ho,Jo=Vo.useSyncExternalStore,Wo=js.useRef,Ko=js.useEffect,Qo=js.useMemo,Xo=js.useDebugValue;Vr.useSyncExternalStoreWithSelector=function(r,e,t,a,i){var o=Wo(null);if(o.current===null){var n={hasValue:!1,value:null};o.current=n}else n=o.current;o=Qo(function(){function c(g){if(!u){if(u=!0,d=g,g=a(g),i!==void 0&&n.hasValue){var f=n.value;if(i(f,g))return h=f}return h=g}if(f=h,Go(d,g))return f;var y=a(g);return i!==void 0&&i(f,y)?(d=g,f):(d=g,h=y)}var u=!1,d,h,b=t===void 0?null:t;return[function(){return c(e())},b===null?void 0:function(){return c(b())}]},[e,t,a,i]);var l=Jo(r,o[0],o[1]);return Ko(function(){n.hasValue=!0,n.value=l},[l]),Xo(l),l};Br.exports=Vr;var Yo=Br.exports;const Zo=Vi(Yo),{useDebugValue:en}=z,{useSyncExternalStoreWithSelector:tn}=Zo;const sn=r=>r;function an(r,e=sn,t){const a=tn(r.subscribe,r.getState,r.getServerState||r.getInitialState,e,t);return en(a),a}const er=r=>{const e=typeof r=="function"?Ro(r):r,t=(a,i)=>an(e,a,i);return Object.assign(t,e),t},rn=r=>r?er(r):er;function on(r,e){let t;try{t=r()}catch{return}return{getItem:i=>{var o;const n=c=>c===null?null:JSON.parse(c,e?.reviver),l=(o=t.getItem(i))!=null?o:null;return l instanceof Promise?l.then(n):n(l)},setItem:(i,o)=>t.setItem(i,JSON.stringify(o,e?.replacer)),removeItem:i=>t.removeItem(i)}}const Ut=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(a){return Ut(a)(t)},catch(a){return this}}}catch(t){return{then(a){return this},catch(a){return Ut(a)(t)}}}},nn=(r,e)=>(t,a,i)=>{let o={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,N)=>({...N,...p}),...e},n=!1;const l=new Set,c=new Set;let u;try{u=o.getStorage()}catch{}if(!u)return r((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...p)},a,i);const d=Ut(o.serialize),h=()=>{const p=o.partialize({...a()});let N;const w=d({state:p,version:o.version}).then(x=>u.setItem(o.name,x)).catch(x=>{N=x});if(N)throw N;return w},b=i.setState;i.setState=(p,N)=>{b(p,N),h()};const g=r((...p)=>{t(...p),h()},a,i);let f;const y=()=>{var p;if(!u)return;n=!1,l.forEach(w=>w(a()));const N=((p=o.onRehydrateStorage)==null?void 0:p.call(o,a()))||void 0;return Ut(u.getItem.bind(u))(o.name).then(w=>{if(w)return o.deserialize(w)}).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==o.version){if(o.migrate)return o.migrate(w.state,w.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return w.state}).then(w=>{var x;return f=o.merge(w,(x=a())!=null?x:g),t(f,!0),h()}).then(()=>{N?.(f,void 0),n=!0,c.forEach(w=>w(f))}).catch(w=>{N?.(void 0,w)})};return i.persist={setOptions:p=>{o={...o,...p},p.getStorage&&(u=p.getStorage())},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>n,onHydrate:p=>(l.add(p),()=>{l.delete(p)}),onFinishHydration:p=>(c.add(p),()=>{c.delete(p)})},y(),f||g},ln=(r,e)=>(t,a,i)=>{let o={storage:on(()=>localStorage),partialize:y=>y,version:0,merge:(y,p)=>({...p,...y}),...e},n=!1;const l=new Set,c=new Set;let u=o.storage;if(!u)return r((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),t(...y)},a,i);const d=()=>{const y=o.partialize({...a()});return u.setItem(o.name,{state:y,version:o.version})},h=i.setState;i.setState=(y,p)=>{h(y,p),d()};const b=r((...y)=>{t(...y),d()},a,i);i.getInitialState=()=>b;let g;const f=()=>{var y,p;if(!u)return;n=!1,l.forEach(w=>{var x;return w((x=a())!=null?x:b)});const N=((p=o.onRehydrateStorage)==null?void 0:p.call(o,(y=a())!=null?y:b))||void 0;return Ut(u.getItem.bind(u))(o.name).then(w=>{if(w)if(typeof w.version=="number"&&w.version!==o.version){if(o.migrate)return[!0,o.migrate(w.state,w.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,w.state];return[!1,void 0]}).then(w=>{var x;const[v,k]=w;if(g=o.merge(k,(x=a())!=null?x:b),t(g,!0),v)return d()}).then(()=>{N?.(g,void 0),g=a(),n=!0,c.forEach(w=>w(g))}).catch(w=>{N?.(void 0,w)})};return i.persist={setOptions:y=>{o={...o,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u?.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>f(),hasHydrated:()=>n,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},o.skipHydration||f(),g||b},cn=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?nn(r,e):ln(r,e),dn=cn,un=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>le(()=>Promise.resolve().then(()=>wt),void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)};class Aa extends Error{constructor(e,t="FunctionsError",a){super(e),this.name=t,this.context=a}}class hn extends Aa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class tr extends Aa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class sr extends Aa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ha;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(ha||(ha={}));var mn=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};class pn{constructor(e,{headers:t={},customFetch:a,region:i=ha.Any}={}){this.url=e,this.headers=t,this.region=i,this.fetch=un(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var a;return mn(this,void 0,void 0,function*(){try{const{headers:i,method:o,body:n}=t;let l={},{region:c}=t;c||(c=this.region);const u=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;n&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&n instanceof Blob||n instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=n):typeof n=="string"?(l["Content-Type"]="text/plain",d=n):typeof FormData<"u"&&n instanceof FormData?d=n:(l["Content-Type"]="application/json",d=JSON.stringify(n)));const h=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:d}).catch(y=>{throw new hn(y)}),b=h.headers.get("x-relay-error");if(b&&b==="true")throw new tr(h);if(!h.ok)throw new sr(h);let g=((a=h.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),f;return g==="application/json"?f=yield h.json():g==="application/octet-stream"?f=yield h.blob():g==="text/event-stream"?f=h:g==="multipart/form-data"?f=yield h.formData():f=yield h.text(),{data:f,error:null,response:h}}catch(i){return{data:null,error:i,response:i instanceof sr||i instanceof tr?i.context:void 0}}})}}var ie={},Ia={},Ns={},Bt={},_s={},Ss={},fn=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},yt=fn();const gn=yt.fetch,Jr=yt.fetch.bind(yt),Wr=yt.Headers,xn=yt.Request,yn=yt.Response,wt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Wr,Request:xn,Response:yn,default:Jr,fetch:gn},Symbol.toStringTag,{value:"Module"})),bn=Hi(wt);var Es={};Object.defineProperty(Es,"__esModule",{value:!0});let wn=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Es.default=wn;var Kr=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ss,"__esModule",{value:!0});const vn=Kr(bn),jn=Kr(Es);let Nn=class{constructor(e){var t,a;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(a=e.isMaybeSingle)!==null&&a!==void 0?a:!1,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=vn.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let i=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{var n,l,c,u;let d=null,h=null,b=null,g=o.status,f=o.statusText;if(o.ok){if(this.method!=="HEAD"){const w=await o.text();w===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((n=this.headers.get("Accept"))===null||n===void 0)&&n.includes("application/vnd.pgrst.plan+text"))?h=w:h=JSON.parse(w))}const p=(l=this.headers.get("Prefer"))===null||l===void 0?void 0:l.match(/count=(exact|planned|estimated)/),N=(c=o.headers.get("content-range"))===null||c===void 0?void 0:c.split("/");p&&N&&N.length>1&&(b=parseInt(N[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(h)&&(h.length>1?(d={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,b=null,g=406,f="Not Acceptable"):h.length===1?h=h[0]:h=null)}else{const p=await o.text();try{d=JSON.parse(p),Array.isArray(d)&&o.status===404&&(h=[],d=null,g=200,f="OK")}catch{o.status===404&&p===""?(g=204,f="No Content"):d={message:p}}if(d&&this.isMaybeSingle&&(!((u=d?.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,g=200,f="OK"),d&&this.shouldThrowOnError)throw new jn.default(d)}return{error:d,data:h,count:b,status:g,statusText:f}});return this.shouldThrowOnError||(i=i.catch(o=>{var n,l,c;return{error:{message:`${(n=o?.name)!==null&&n!==void 0?n:"FetchError"}: ${o?.message}`,details:`${(l=o?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=o?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}};Ss.default=Nn;var _n=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_s,"__esModule",{value:!0});const Sn=_n(Ss);let En=class extends Sn.default{select(e){let t=!1;const a=(e??"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:a,foreignTable:i,referencedTable:o=i}={}){const n=o?`${o}.order`:"order",l=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:a=t}={}){const i=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${e}`),this}range(e,t,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"offset":`${i}.offset`,n=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${e}`),this.url.searchParams.set(n,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:a=!1,buffers:i=!1,wal:o=!1,format:n="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,a?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.get("Accept"))!==null&&l!==void 0?l:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${n}; for="${u}"; options=${c};`),n==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}};_s.default=En;var kn=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bt,"__esModule",{value:!0});const Tn=kn(_s);let Pn=class extends Tn.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const a=Array.from(new Set(t)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${a})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:a,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const n=a===void 0?"":`(${a})`;return this.url.searchParams.append(e,`${o}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([t,a])=>{this.url.searchParams.append(t,`eq.${a}`)}),this}not(e,t,a){return this.url.searchParams.append(e,`not.${t}.${a}`),this}or(e,{foreignTable:t,referencedTable:a=t}={}){const i=a?`${a}.or`:"or";return this.url.searchParams.append(i,`(${e})`),this}filter(e,t,a){return this.url.searchParams.append(e,`${t}.${a}`),this}};Bt.default=Pn;var Cn=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ns,"__esModule",{value:!0});const _t=Cn(Bt);let An=class{constructor(e,{headers:t={},schema:a,fetch:i}){this.url=e,this.headers=new Headers(t),this.schema=a,this.fetch=i}select(e,{head:t=!1,count:a}={}){const i=t?"HEAD":"GET";let o=!1;const n=(e??"*").split("").map(l=>/\s/.test(l)&&!o?"":(l==='"'&&(o=!o),l)).join("");return this.url.searchParams.set("select",n),a&&this.headers.append("Prefer",`count=${a}`),new _t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:a=!0}={}){var i;const o="POST";if(t&&this.headers.append("Prefer",`count=${t}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const n=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(n.length>0){const l=[...new Set(n)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new _t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:a=!1,count:i,defaultToNull:o=!0}={}){var n;const l="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),t!==void 0&&this.url.searchParams.set("on_conflict",t),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const c=e.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new _t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}update(e,{count:t}={}){var a;const i="PATCH";return t&&this.headers.append("Prefer",`count=${t}`),new _t.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:e}={}){var t;const a="DELETE";return e&&this.headers.append("Prefer",`count=${e}`),new _t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}};Ns.default=An;var Qr=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ia,"__esModule",{value:!0});const In=Qr(Ns),Rn=Qr(Bt);let On=class Xr{constructor(e,{headers:t={},schema:a,fetch:i}={}){this.url=e,this.headers=new Headers(t),this.schemaName=a,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new In.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Xr(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:a=!1,get:i=!1,count:o}={}){var n;let l;const c=new URL(`${this.url}/rpc/${e}`);let u;a||i?(l=a?"HEAD":"GET",Object.entries(t).filter(([h,b])=>b!==void 0).map(([h,b])=>[h,Array.isArray(b)?`{${b.join(",")}}`:`${b}`]).forEach(([h,b])=>{c.searchParams.append(h,b)})):(l="POST",u=t);const d=new Headers(this.headers);return o&&d.set("Prefer",`count=${o}`),new Rn.default({method:l,url:c,headers:d,schema:this.schemaName,body:u,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}};Ia.default=On;var vt=pe&&pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ie,"__esModule",{value:!0});ie.PostgrestError=ie.PostgrestBuilder=ie.PostgrestTransformBuilder=ie.PostgrestFilterBuilder=ie.PostgrestQueryBuilder=ie.PostgrestClient=void 0;const Yr=vt(Ia);ie.PostgrestClient=Yr.default;const Zr=vt(Ns);ie.PostgrestQueryBuilder=Zr.default;const ei=vt(Bt);ie.PostgrestFilterBuilder=ei.default;const ti=vt(_s);ie.PostgrestTransformBuilder=ti.default;const si=vt(Ss);ie.PostgrestBuilder=si.default;const ai=vt(Es);ie.PostgrestError=ai.default;var Dn=ie.default={PostgrestClient:Yr.default,PostgrestQueryBuilder:Zr.default,PostgrestFilterBuilder:ei.default,PostgrestTransformBuilder:ti.default,PostgrestBuilder:si.default,PostgrestError:ai.default};const{PostgrestClient:$n,PostgrestQueryBuilder:Ah,PostgrestFilterBuilder:Ih,PostgrestTransformBuilder:Rh,PostgrestBuilder:Oh,PostgrestError:Dh}=Dn;class Ln{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const a=this.getWebSocketConstructor();return new a(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Mn="2.15.4",Un=`realtime-js/${Mn}`,qn="1.0.0",ma=1e4,Fn=1e3,zn=100;var Rt;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Rt||(Rt={}));var Q;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(Q||(Q={}));var xe;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(xe||(xe={}));var pa;(function(r){r.websocket="websocket"})(pa||(pa={}));var Ge;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Ge||(Ge={}));class Bn{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),a=new TextDecoder;return this._decodeBroadcast(e,t,a)}_decodeBroadcast(e,t,a){const i=t.getUint8(1),o=t.getUint8(2);let n=this.HEADER_LENGTH+2;const l=a.decode(e.slice(n,n+i));n=n+i;const c=a.decode(e.slice(n,n+o));n=n+o;const u=JSON.parse(a.decode(e.slice(n,e.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ri{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var V;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(V||(V={}));const ar=(r,e,t={})=>{var a;const i=(a=t.skipTypes)!==null&&a!==void 0?a:[];return Object.keys(e).reduce((o,n)=>(o[n]=Vn(n,r,e,i),o),{})},Vn=(r,e,t,a)=>{const i=e.find(l=>l.name===r),o=i?.type,n=t[r];return o&&!a.includes(o)?ii(o,n):fa(n)},ii=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return Wn(e,t)}switch(r){case V.bool:return Hn(e);case V.float4:case V.float8:case V.int2:case V.int4:case V.int8:case V.numeric:case V.oid:return Gn(e);case V.json:case V.jsonb:return Jn(e);case V.timestamp:return Kn(e);case V.abstime:case V.date:case V.daterange:case V.int4range:case V.int8range:case V.money:case V.reltime:case V.text:case V.time:case V.timestamptz:case V.timetz:case V.tsrange:case V.tstzrange:return fa(e);default:return fa(e)}},fa=r=>r,Hn=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Gn=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},Jn=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},Wn=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,a=r[t];if(r[0]==="{"&&a==="}"){let o;const n=r.slice(1,t);try{o=JSON.parse("["+n+"]")}catch{o=n?n.split(","):[]}return o.map(l=>ii(e,l))}return r},Kn=r=>typeof r=="string"?r.replace(" ","T"):r,oi=r=>{let e=r;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Vs{constructor(e,t,a={},i=ma){this.channel=e,this.event=t,this.payload=a,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var a;return this._hasReceived(e)&&t((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rr;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(rr||(rr={}));class Ot{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},i=>{const{onJoin:o,onLeave:n,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ot.syncState(this.state,i,o,n),this.pendingDiffs.forEach(c=>{this.state=Ot.syncDiff(this.state,c,o,n)}),this.pendingDiffs=[],l()}),this.channel._on(a.diff,{},i=>{const{onJoin:o,onLeave:n,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ot.syncDiff(this.state,i,o,n),l())}),this.onJoin((i,o,n)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:n})}),this.onLeave((i,o,n)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,a,i){const o=this.cloneDeep(e),n=this.transformState(t),l={},c={};return this.map(o,(u,d)=>{n[u]||(c[u]=d)}),this.map(n,(u,d)=>{const h=o[u];if(h){const b=d.map(p=>p.presence_ref),g=h.map(p=>p.presence_ref),f=d.filter(p=>g.indexOf(p.presence_ref)<0),y=h.filter(p=>b.indexOf(p.presence_ref)<0);f.length>0&&(l[u]=f),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(o,{joins:l,leaves:c},a,i)}static syncDiff(e,t,a,i){const{joins:o,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return a||(a=()=>{}),i||(i=()=>{}),this.map(o,(l,c)=>{var u;const d=(u=e[l])!==null&&u!==void 0?u:[];if(e[l]=this.cloneDeep(c),d.length>0){const h=e[l].map(g=>g.presence_ref),b=d.filter(g=>h.indexOf(g.presence_ref)<0);e[l].unshift(...b)}a(l,d,c)}),this.map(n,(l,c)=>{let u=e[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=u,i(l,u,c),u.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(a=>t(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,a)=>{const i=e[a];return"metas"in i?t[a]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):t[a]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ir;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(ir||(ir={}));var Dt;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(Dt||(Dt={}));var Ie;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ie||(Ie={}));class Ra{constructor(e,t={config:{}},a){this.topic=e,this.params=t,this.socket=a,this.bindings={},this.state=Q.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Vs(this,xe.join,this.params,this.timeout),this.rejoinTimer=new ri(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Q.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Q.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Q.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xe.reply,{},(i,o)=>{this._trigger(this._replyEventName(o),i)}),this.presence=new Ot(this),this.broadcastEndpointURL=oi(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var a,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Q.closed){const{config:{broadcast:n,presence:l,private:c}}=this.params,u=(i=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(g=>g.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[Dt.PRESENCE]&&this.bindings[Dt.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,h={},b={broadcast:n,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(g=>e?.(Ie.CHANNEL_ERROR,g)),this._onClose(()=>e?.(Ie.CLOSED)),this.updateJoinPayload(Object.assign({config:b},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:g})=>{var f;if(this.socket.setAuth(),g===void 0){e?.(Ie.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,p=(f=y?.length)!==null&&f!==void 0?f:0,N=[];for(let w=0;w<p;w++){const x=y[w],{filter:{event:v,schema:k,table:T,filter:P}}=x,R=g&&g[w];if(R&&R.event===v&&R.schema===k&&R.table===T&&R.filter===P)N.push(Object.assign(Object.assign({},x),{id:R.id}));else{this.unsubscribe(),this.state=Q.errored,e?.(Ie.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(Ie.SUBSCRIBED);return}}).receive("error",g=>{this.state=Q.errored,e?.(Ie.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(g).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ie.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,a){return this.state===Q.joined&&e===Dt.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,a)}async send(e,t={}){var a,i;if(!this._canPush()&&e.type==="broadcast"){const{event:o,payload:n}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:n,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=t.timeout)!==null&&a!==void 0?a:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var n,l,c;const u=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(n=this.params)===null||n===void 0?void 0:n.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Q.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xe.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(i=>{a=new Vs(this,xe.leave,{},e),a.receive("ok",()=>{t(),i("ok")}).receive("timeout",()=>{t(),i("timed out")}).receive("error",()=>{i("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Q.closed,this.bindings={}}async _fetchWithTimeout(e,t,a){const i=new AbortController,o=setTimeout(()=>i.abort(),a),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:i.signal}));return clearTimeout(o),n}_push(e,t,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Vs(this,e,t,a);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>zn){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,a){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,a){var i,o;const n=e.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=xe;if(a&&[l,c,u,d].indexOf(n)>=0&&a!==this._joinRef())return;let b=this._onMessage(n,t,a);if(t&&!b)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(g=>{var f,y,p;return((f=g.filter)===null||f===void 0?void 0:f.event)==="*"||((p=(y=g.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===n}).map(g=>g.callback(b,a)):(o=this.bindings[n])===null||o===void 0||o.filter(g=>{var f,y,p,N,w,x;if(["broadcast","presence","postgres_changes"].includes(n))if("id"in g){const v=g.id,k=(f=g.filter)===null||f===void 0?void 0:f.event;return v&&((y=t.ids)===null||y===void 0?void 0:y.includes(v))&&(k==="*"||k?.toLocaleLowerCase()===((p=t.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const v=(w=(N=g?.filter)===null||N===void 0?void 0:N.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return v==="*"||v===((x=t?.event)===null||x===void 0?void 0:x.toLocaleLowerCase())}else return g.type.toLocaleLowerCase()===n}).map(g=>{if(typeof b=="object"&&"ids"in b){const f=b.data,{schema:y,table:p,commit_timestamp:N,type:w,errors:x}=f;b=Object.assign(Object.assign({},{schema:y,table:p,commit_timestamp:N,eventType:w,new:{},old:{},errors:x}),this._getPayloadRecords(f))}g.callback(b,a)})}_isClosed(){return this.state===Q.closed}_isJoined(){return this.state===Q.joined}_isJoining(){return this.state===Q.joining}_isLeaving(){return this.state===Q.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,a){const i=e.toLocaleLowerCase(),o={type:i,filter:t,callback:a};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,t){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===a&&Ra.isEqual(i.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const a in e)if(e[a]!==t[a])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xe.close,{},e)}_onError(e){this._on(xe.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Q.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=ar(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=ar(e.columns,e.old_record)),t}}const Hs=()=>{},Xt={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Qn=[1e3,2e3,5e3,1e4],Xn=1e4,Yn=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Zn{constructor(e,t){var a;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ma,this.transport=null,this.heartbeatIntervalMs=Xt.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hs,this.ref=0,this.reconnectTimer=null,this.logger=Hs,this.conn=null,this.sendBuffer=[],this.serializer=new Bn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...n)=>le(()=>Promise.resolve().then(()=>wt),void 0).then(({default:l})=>l(...n)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):o=fetch,(...n)=>o(...n)},!(!((a=t?.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${pa.websocket}`,this.httpEndpoint=oi(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ln.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:qn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,a){this.logger(e,t,a)}connectionState(){switch(this.conn&&this.conn.readyState){case Rt.connecting:return Ge.Connecting;case Rt.open:return Ge.Open;case Rt.closing:return Ge.Closing;default:return Ge.Closed}}isConnected(){return this.connectionState()===Ge.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const a=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===a);if(i)return i;{const o=new Ra(`realtime:${e}`,t,this);return this.channels.push(o),o}}push(e){const{topic:t,event:a,payload:i,ref:o}=e,n=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${a} (${o})`,i),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Fn,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Xt.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:a,event:i,payload:o,ref:n}=t,l=n?`(${n})`:"",c=o.status||"";this.log("receive",`${c} ${a} ${i} ${l}`.trim(),o),this.channels.filter(u=>u._isMember(a)).forEach(u=>u._trigger(i,o,n)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(xe.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const a=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${a}${i}`}_workerObjectUrl(e){let t;if(e)t=e;else{const a=new Blob([Yn],{type:"application/javascript"});t=URL.createObjectURL(a)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(a=>{const i={access_token:t,version:Un};t&&a.updateJoinPayload(i),a.joinedOnce&&a._isJoined()&&a._push(xe.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(t)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new ri(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Xt.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,a,i,o,n,l,c,u,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(a=e?.timeout)!==null&&a!==void 0?a:ma,this.heartbeatIntervalMs=(i=e?.heartbeatIntervalMs)!==null&&i!==void 0?i:Xt.HEARTBEAT_INTERVAL,this.worker=(o=e?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(n=e?.accessToken)!==null&&n!==void 0?n:null,this.heartbeatCallback=(l=e?.heartbeatCallback)!==null&&l!==void 0?l:Hs,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:h=>Qn[h-1]||Xn,this.encode=(u=e?.encode)!==null&&u!==void 0?u:(h,b)=>b(JSON.stringify(h)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Oa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function X(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class el extends Oa{constructor(e,t,a){super(e),this.name="StorageApiError",this.status=t,this.statusCode=a}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ga extends Oa{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var tl=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};const ni=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>le(()=>Promise.resolve().then(()=>wt),void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)},sl=()=>tl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield le(()=>Promise.resolve().then(()=>wt),void 0)).Response:Response}),xa=r=>{if(Array.isArray(r))return r.map(t=>xa(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,a])=>{const i=t.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=xa(a)}),e},al=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)};var st=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};const Gs=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),rl=(r,e,t)=>st(void 0,void 0,void 0,function*(){const a=yield sl();r instanceof a&&!t?.noResolveJson?r.json().then(i=>{const o=r.status||500,n=i?.statusCode||o+"";e(new el(Gs(i),o,n))}).catch(i=>{e(new ga(Gs(i),i))}):e(new ga(Gs(r),r))}),il=(r,e,t,a)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"||!a?i:(al(a)?(i.headers=Object.assign({"Content-Type":"application/json"},e?.headers),i.body=JSON.stringify(a)):i.body=a,e?.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),t))};function Vt(r,e,t,a,i,o){return st(this,void 0,void 0,function*(){return new Promise((n,l)=>{r(t,il(e,a,i,o)).then(c=>{if(!c.ok)throw c;return a?.noResolveJson?c:c.json()}).then(c=>n(c)).catch(c=>rl(c,l,a))})})}function ms(r,e,t,a){return st(this,void 0,void 0,function*(){return Vt(r,"GET",e,t,a)})}function Se(r,e,t,a,i){return st(this,void 0,void 0,function*(){return Vt(r,"POST",e,a,i,t)})}function ya(r,e,t,a,i){return st(this,void 0,void 0,function*(){return Vt(r,"PUT",e,a,i,t)})}function ol(r,e,t,a){return st(this,void 0,void 0,function*(){return Vt(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),a)})}function li(r,e,t,a,i){return st(this,void 0,void 0,function*(){return Vt(r,"DELETE",e,a,i,t)})}var ae=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};const nl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},or={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ll{constructor(e,t={},a,i){this.url=e,this.headers=t,this.bucketId=a,this.fetch=ni(i)}uploadOrUpdate(e,t,a,i){return ae(this,void 0,void 0,function*(){try{let o;const n=Object.assign(Object.assign({},or),i);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(n.upsert)});const c=n.metadata;typeof Blob<"u"&&a instanceof Blob?(o=new FormData,o.append("cacheControl",n.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",a)):typeof FormData<"u"&&a instanceof FormData?(o=a,o.append("cacheControl",n.cacheControl),c&&o.append("metadata",this.encodeMetadata(c))):(o=a,l["cache-control"]=`max-age=${n.cacheControl}`,l["content-type"]=n.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const u=this._removeEmptyFolders(t),d=this._getFinalPath(u),h=yield(e=="PUT"?ya:Se)(this.fetch,`${this.url}/object/${d}`,o,Object.assign({headers:l},n?.duplex?{duplex:n.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(o){if(X(o))return{data:null,error:o};throw o}})}upload(e,t,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,a)})}uploadToSignedUrl(e,t,a,i){return ae(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),n=this._getFinalPath(o),l=new URL(this.url+`/object/upload/sign/${n}`);l.searchParams.set("token",t);try{let c;const u=Object.assign({upsert:or.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&a instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",a)):typeof FormData<"u"&&a instanceof FormData?(c=a,c.append("cacheControl",u.cacheControl)):(c=a,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ya(this.fetch,l.toString(),c,{headers:d});return{data:{path:o,fullPath:h.Key},error:null}}catch(c){if(X(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return ae(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e);const i=Object.assign({},this.headers);t?.upsert&&(i["x-upsert"]="true");const o=yield Se(this.fetch,`${this.url}/object/upload/sign/${a}`,{},{headers:i}),n=new URL(this.url+o.url),l=n.searchParams.get("token");if(!l)throw new Oa("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:l},error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}update(e,t,a){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,a)})}move(e,t,a){return ae(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}copy(e,t,a){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Se(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:a?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}createSignedUrl(e,t,a){return ae(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Se(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:t},a?.transform?{transform:a.transform}:{}),{headers:this.headers});const n=a?.download?`&download=${a.download===!0?"":a.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${n}`)},{data:o,error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,a){return ae(this,void 0,void 0,function*(){try{const i=yield Se(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),o=a?.download?`&download=${a.download===!0?"":a.download}`:"";return{data:i.map(n=>Object.assign(Object.assign({},n),{signedUrl:n.signedURL?encodeURI(`${this.url}${n.signedURL}${o}`):null})),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}download(e,t){return ae(this,void 0,void 0,function*(){const i=typeof t?.transform<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString(t?.transform||{}),n=o?`?${o}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ms(this.fetch,`${this.url}/${i}/${l}${n}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(X(l))return{data:null,error:l};throw l}})}info(e){return ae(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const a=yield ms(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xa(a),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}exists(e){return ae(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield ol(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(a){if(X(a)&&a instanceof ga){const i=a.originalError;if([400,404].includes(i?.status))return{data:!1,error:a}}throw a}})}getPublicUrl(e,t){const a=this._getFinalPath(e),i=[],o=t?.download?`download=${t.download===!0?"":t.download}`:"";o!==""&&i.push(o);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&i.push(c);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${a}${u}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}list(e,t,a){return ae(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},nl),t),{prefix:e||""});return{data:yield Se(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},a),error:null}}catch(i){if(X(i))return{data:null,error:i};throw i}})}listV2(e,t){return ae(this,void 0,void 0,function*(){try{const a=Object.assign({},e);return{data:yield Se(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,a,{headers:this.headers},t),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const cl="2.11.0",dl={"X-Client-Info":`storage-js/${cl}`};var rt=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};class ul{constructor(e,t={},a,i){const o=new URL(e);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href,this.headers=Object.assign(Object.assign({},dl),t),this.fetch=ni(a)}listBuckets(){return rt(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(X(e))return{data:null,error:e};throw e}})}getBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield ms(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return rt(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}updateBucket(e,t){return rt(this,void 0,void 0,function*(){try{return{data:yield ya(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(X(a))return{data:null,error:a};throw a}})}emptyBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield Se(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}deleteBucket(e){return rt(this,void 0,void 0,function*(){try{return{data:yield li(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(X(t))return{data:null,error:t};throw t}})}}class hl extends ul{constructor(e,t={},a,i){super(e,t,a,i)}from(e){return new ll(this.url,this.headers,e,this.fetch)}}const ml="2.57.0";let Pt="";typeof Deno<"u"?Pt="deno":typeof document<"u"?Pt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Pt="react-native":Pt="node";const pl={"X-Client-Info":`supabase-js-${Pt}/${ml}`},fl={headers:pl},gl={schema:"public"},xl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},yl={};var bl=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};const wl=r=>{let e;return r?e=r:typeof fetch>"u"?e=Jr:e=fetch,(...t)=>e(...t)},vl=()=>typeof Headers>"u"?Wr:Headers,jl=(r,e,t)=>{const a=wl(t),i=vl();return(o,n)=>bl(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:r;let u=new i(n?.headers);return u.has("apikey")||u.set("apikey",r),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),a(o,Object.assign(Object.assign({},n),{headers:u}))})};var Nl=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};function _l(r){return r.endsWith("/")?r:r+"/"}function Sl(r,e){var t,a;const{db:i,auth:o,realtime:n,global:l}=r,{db:c,auth:u,realtime:d,global:h}=e,b={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},u),o),realtime:Object.assign(Object.assign({},d),n),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(a=l?.headers)!==null&&a!==void 0?a:{})}),accessToken:()=>Nl(this,void 0,void 0,function*(){return""})};return r.accessToken?b.accessToken=r.accessToken:delete b.accessToken,b}const ci="2.71.1",ht=30*1e3,ba=3,Js=ba*ht,El="http://localhost:9999",kl="supabase.auth.token",Tl={"X-Client-Info":`gotrue-js/${ci}`},wa="X-Supabase-Api-Version",di={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Pl=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Cl=10*60*1e3;class Da extends Error{constructor(e,t,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=a}}function D(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class Al extends Da{constructor(e,t,a){super(e,t,a),this.name="AuthApiError",this.status=t,this.code=a}}function Il(r){return D(r)&&r.name==="AuthApiError"}class ui extends Da{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Fe extends Da{constructor(e,t,a,i){super(e,a,i),this.name=t,this.status=a}}class Le extends Fe{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Rl(r){return D(r)&&r.name==="AuthSessionMissingError"}class Yt extends Fe{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Zt extends Fe{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class es extends Fe{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ol(r){return D(r)&&r.name==="AuthImplicitGrantRedirectError"}class nr extends Fe{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class va extends Fe{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ws(r){return D(r)&&r.name==="AuthRetryableFetchError"}class lr extends Fe{constructor(e,t,a){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=a}}class ja extends Fe{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cr=` 	
\r=`.split(""),Dl=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<cr.length;e+=1)r[cr[e].charCodeAt(0)]=-2;for(let e=0;e<ps.length;e+=1)r[ps[e].charCodeAt(0)]=e;return r})();function dr(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(ps[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;t(ps[a]),e.queuedBits-=6}}function hi(r,e,t){const a=Dl[r];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function ur(r){const e=[],t=n=>{e.push(String.fromCodePoint(n))},a={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=n=>{Ml(n,a,t)};for(let n=0;n<r.length;n+=1)hi(r.charCodeAt(n),i,o);return e.join("")}function $l(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function Ll(r,e){for(let t=0;t<r.length;t+=1){let a=r.charCodeAt(t);if(a>55295&&a<=56319){const i=(a-55296)*1024&65535;a=(r.charCodeAt(t+1)-56320&65535|i)+65536,t+=1}$l(a,e)}}function Ml(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let a=1;a<6;a+=1)if(!(r>>7-a&1)){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Ul(r){const e=[],t={queue:0,queuedBits:0},a=i=>{e.push(i)};for(let i=0;i<r.length;i+=1)hi(r.charCodeAt(i),t,a);return new Uint8Array(e)}function ql(r){const e=[];return Ll(r,t=>e.push(t)),new Uint8Array(e)}function Fl(r){const e=[],t={queue:0,queuedBits:0},a=i=>{e.push(i)};return r.forEach(i=>dr(i,t,a)),dr(null,t,a),e.join("")}function zl(r){return Math.round(Date.now()/1e3)+r}function Bl(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ge=()=>typeof window<"u"&&typeof document<"u",ze={tested:!1,writable:!1},mi=()=>{if(!ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ze.tested)return ze.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),ze.tested=!0,ze.writable=!0}catch{ze.tested=!0,ze.writable=!1}return ze.writable};function Vl(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return t.searchParams.forEach((a,i)=>{e[i]=a}),e}const pi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>le(()=>Promise.resolve().then(()=>wt),void 0).then(({default:a})=>a(...t)):e=fetch,(...t)=>e(...t)},Hl=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",mt=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},Be=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},$e=async(r,e)=>{await r.removeItem(e)};class ks{constructor(){this.promise=new ks.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}ks.promiseConstructor=Promise;function Ks(r){const e=r.split(".");if(e.length!==3)throw new ja("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!Pl.test(e[a]))throw new ja("JWT not in base64url format");return{header:JSON.parse(ur(e[0])),payload:JSON.parse(ur(e[1])),signature:Ul(e[2]),raw:{header:e[0],payload:e[1]}}}async function Gl(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function Jl(r,e){return new Promise((a,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const n=await r(o);if(!e(o,null,n)){a(n);return}}catch(n){if(!e(o,n)){i(n);return}}})()})}function Wl(r){return("0"+r.toString(16)).substr(-2)}function Kl(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=t.length;let i="";for(let o=0;o<56;o++)i+=t.charAt(Math.floor(Math.random()*a));return i}return crypto.getRandomValues(e),Array.from(e,Wl).join("")}async function Ql(r){const t=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",t),i=new Uint8Array(a);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function Xl(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await Ql(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function it(r,e,t=!1){const a=Kl();let i=a;t&&(i+="/PASSWORD_RECOVERY"),await mt(r,`${e}-code-verifier`,i);const o=await Xl(a);return[o,a===o?"plain":"s256"]}const Yl=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Zl(r){const e=r.headers.get(wa);if(!e||!e.match(Yl))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ec(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function tc(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const sc=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ot(r){if(!sc.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Qs(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const a=t.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hr(r){return JSON.parse(JSON.stringify(r))}var ac=globalThis&&globalThis.__rest||function(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(r);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(r,a[i])&&(t[a[i]]=r[a[i]]);return t};const He=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),rc=[502,503,504];async function mr(r){var e;if(!Hl(r))throw new va(He(r),0);if(rc.includes(r.status))throw new va(He(r),r.status);let t;try{t=await r.json()}catch(o){throw new ui(He(o),o)}let a;const i=Zl(r);if(i&&i.getTime()>=di["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?a=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(a=t.error_code),a){if(a==="weak_password")throw new lr(He(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new Le}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((o,n)=>o&&typeof n=="string",!0))throw new lr(He(t),r.status,t.weak_password.reasons);throw new Al(He(t),r.status||500,a)}const ic=(r,e,t,a)=>{const i={method:r,headers:e?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),i.body=JSON.stringify(a),Object.assign(Object.assign({},i),t))};async function M(r,e,t,a){var i;const o=Object.assign({},a?.headers);o[wa]||(o[wa]=di["2024-01-01"].name),a?.jwt&&(o.Authorization=`Bearer ${a.jwt}`);const n=(i=a?.query)!==null&&i!==void 0?i:{};a?.redirectTo&&(n.redirect_to=a.redirectTo);const l=Object.keys(n).length?"?"+new URLSearchParams(n).toString():"",c=await oc(r,e,t+l,{headers:o,noResolveJson:a?.noResolveJson},{},a?.body);return a?.xform?a?.xform(c):{data:Object.assign({},c),error:null}}async function oc(r,e,t,a,i,o){const n=ic(e,a,i,o);let l;try{l=await r(t,Object.assign({},n))}catch(c){throw console.error(c),new va(He(c),0)}if(l.ok||await mr(l),a?.noResolveJson)return l;try{return await l.json()}catch(c){await mr(c)}}function Ae(r){var e;let t=null;dc(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=zl(r.expires_in)));const a=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:a},error:null}}function pr(r){const e=Ae(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,a)=>t&&typeof a=="string",!0)&&(e.data.weak_password=r.weak_password),e}function Me(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function nc(r){return{data:r,error:null}}function lc(r){const{action_link:e,email_otp:t,hashed_token:a,redirect_to:i,verification_type:o}=r,n=ac(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:a,redirect_to:i,verification_type:o},c=Object.assign({},n);return{data:{properties:l,user:c},error:null}}function cc(r){return r}function dc(r){return r.access_token&&r.refresh_token&&r.expires_in}const Xs=["global","local","others"];var uc=globalThis&&globalThis.__rest||function(r,e){var t={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,a=Object.getOwnPropertySymbols(r);i<a.length;i++)e.indexOf(a[i])<0&&Object.prototype.propertyIsEnumerable.call(r,a[i])&&(t[a[i]]=r[a[i]]);return t};class hc{constructor({url:e="",headers:t={},fetch:a}){this.url=e,this.headers=t,this.fetch=pi(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Xs[0]){if(Xs.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xs.join(", ")}`);try{return await M(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,t={}){try{return await M(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Me})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:t}=e,a=uc(e,["options"]),i=Object.assign(Object.assign({},a),t);return"newEmail"in a&&(i.new_email=a?.newEmail,delete i.newEmail),await M(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:lc,redirectTo:t?.redirectTo})}catch(t){if(D(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await M(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Me})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,a,i,o,n,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await M(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&a!==void 0?a:"",per_page:(o=(i=e?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:cc});if(d.error)throw d.error;const h=await d.json(),b=(n=d.headers.get("x-total-count"))!==null&&n!==void 0?n:0,g=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return g.length>0&&(g.forEach(f=>{const y=parseInt(f.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(f.split(";")[1].split("=")[1]);u[`${p}Page`]=y}),u.total=parseInt(b)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){ot(e);try{return await M(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Me})}catch(t){if(D(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ot(e);try{return await M(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Me})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,t=!1){ot(e);try{return await M(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Me})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){ot(e.userId);try{const{data:t,error:a}=await M(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:t,error:a}}catch(t){if(D(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ot(e.userId),ot(e.id);try{return{data:await M(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}}function fr(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}function mc(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const nt={debug:!!(globalThis&&mi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class pc extends fi{}async function fc(r,e,t){nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),nt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async i=>{if(i){nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return await t()}finally{nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(e===0)throw nt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new pc(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(nt.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}mc();const gc={url:El,storageKey:kl,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Tl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function gr(r,e,t){return await t()}const lt={};class qt{constructor(e){var t,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=qt.nextInstanceID,qt.nextInstanceID+=1,this.instanceID>0&&ge()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},gc),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new hc({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=pi(i.fetch),this.lock=i.lock||gr,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ge()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=fc:this.lock=gr,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:mi()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fr(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=fr(this.memoryStorage)),ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=lt[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=lt[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){lt[this.storageKey]=Object.assign(Object.assign({},lt[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${ci}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=Vl(window.location.href);let a="none";if(this._isImplicitGrantCallback(t)?a="implicit":await this._isPKCECallback(t)&&(a="pkce"),ge()&&this.detectSessionInUrl&&a!=="none"){const{data:i,error:o}=await this._getSessionFromURL(t,a);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Ol(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:n,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",n,"redirect type",l),await this._saveSession(n),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return D(t)?{error:t}:{error:new ui("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,a,i;try{const o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(i=e?.options)===null||i===void 0?void 0:i.captchaToken}},xform:Ae}),{data:n,error:l}=o;if(l||!n)return{data:{user:null,session:null},error:l};const c=n.session,u=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async signUp(e){var t,a,i;try{let o;if("email"in e){const{email:d,password:h,options:b}=e;let g=null,f=null;this.flowType==="pkce"&&([g,f]=await it(this.storage,this.storageKey)),o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:b?.emailRedirectTo,body:{email:d,password:h,data:(t=b?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:b?.captchaToken},code_challenge:g,code_challenge_method:f},xform:Ae})}else if("phone"in e){const{phone:d,password:h,options:b}=e;o=await M(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(a=b?.data)!==null&&a!==void 0?a:{},channel:(i=b?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:b?.captchaToken}},xform:Ae})}else throw new Zt("You must provide either an email or phone number and a password");const{data:n,error:l}=o;if(l||!n)return{data:{user:null,session:null},error:l};const c=n.session,u=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(D(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithPassword(e){try{let t;if("email"in e){const{email:o,password:n,options:l}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:n,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:pr})}else if("phone"in e){const{phone:o,password:n,options:l}=e;t=await M(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:n,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:pr})}else throw new Zt("You must provide either an email or phone number and a password");const{data:a,error:i}=t;return i?{data:{user:null,session:null},error:i}:!a||!a.session||!a.user?{data:{user:null,session:null},error:new Yt}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:i})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,a,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,a,i,o,n,l,c,u,d,h,b,g;let f,y;if("message"in e)f=e.message,y=e.signature;else{const{chain:p,wallet:N,statement:w,options:x}=e;let v;if(ge())if(typeof N=="object")v=N;else{const T=window;if("solana"in T&&typeof T.solana=="object"&&("signIn"in T.solana&&typeof T.solana.signIn=="function"||"signMessage"in T.solana&&typeof T.solana.signMessage=="function"))v=T.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!x?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=N}const k=new URL((t=x?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in v&&v.signIn){const T=await v.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},x?.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),w?{statement:w}:null));let P;if(Array.isArray(T)&&T[0]&&typeof T[0]=="object")P=T[0];else if(T&&typeof T=="object"&&"signedMessage"in T&&"signature"in T)P=T;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)f=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),y=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in v)||typeof v.signMessage!="function"||!("publicKey"in v)||typeof v!="object"||!v.publicKey||!("toBase58"in v.publicKey)||typeof v.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");f=[`${k.host} wants you to sign in with your Solana account:`,v.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(a=x?.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=x?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${x.signInWithSolana.notBefore}`]:[],...!((n=x?.signInWithSolana)===null||n===void 0)&&n.expirationTime?[`Expiration Time: ${x.signInWithSolana.expirationTime}`]:[],...!((l=x?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${x.signInWithSolana.chainId}`]:[],...!((c=x?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${x.signInWithSolana.nonce}`]:[],...!((u=x?.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${x.signInWithSolana.requestId}`]:[],...!((h=(d=x?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...x.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const T=await v.signMessage(new TextEncoder().encode(f),"utf8");if(!T||!(T instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=T}}try{const{data:p,error:N}=await M(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:f,signature:Fl(y)},!((b=e.options)===null||b===void 0)&&b.captchaToken?{gotrue_meta_security:{captcha_token:(g=e.options)===null||g===void 0?void 0:g.captchaToken}}:null),xform:Ae});if(N)throw N;return!p||!p.session||!p.user?{data:{user:null,session:null},error:new Yt}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),{data:Object.assign({},p),error:N})}catch(p){if(D(p))return{data:{user:null,session:null},error:p};throw p}}async _exchangeCodeForSession(e){const t=await Be(this.storage,`${this.storageKey}-code-verifier`),[a,i]=(t??"").split("/");try{const{data:o,error:n}=await M(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:Ae});if(await $e(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Yt}:(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:n})}catch(o){if(D(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}}async signInWithIdToken(e){try{const{options:t,provider:a,token:i,access_token:o,nonce:n}=e,l=await M(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:i,access_token:o,nonce:n,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Ae}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Yt}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,a,i,o,n;try{if("email"in e){const{email:l,options:c}=e;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await it(this.storage,this.storageKey));const{error:h}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(a=c?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:u,error:d}=await M(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=c?.data)!==null&&i!==void 0?i:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(n=c?.channel)!==null&&n!==void 0?n:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:d}}throw new Zt("You must provide either an email or phone number.")}catch(l){if(D(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,a;try{let i,o;"options"in e&&(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:n,error:l}=await M(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Ae});if(l)throw l;if(!n)throw new Error("An error occurred on token verification.");const c=n.session,u=n.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(D(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var t,a,i;try{let o=null,n=null;return this.flowType==="pkce"&&([o,n]=await it(this.storage,this.storageKey)),await M(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&a!==void 0?a:void 0}),!((i=e?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:n}),headers:this.headers,xform:nc})}catch(o){if(D(o))return{data:null,error:o};throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:a}=e;if(a)throw a;if(!t)throw new Le;const{error:i}=await M(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(D(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:a,type:i,options:o}=e,{error:n}=await M(this.fetch,"POST",t,{headers:this.headers,body:{email:a,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:n}}else if("phone"in e){const{phone:a,type:i,options:o}=e,{data:n,error:l}=await M(this.fetch,"POST",t,{headers:this.headers,body:{phone:a,type:i,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:n?.message_id},error:l}}throw new Zt("You must provide either an email or phone number and a type")}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await a,await t()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=t();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Be(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<Js:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const n=await Be(this.userStorage,this.storageKey+"-user");n?.user?e.user=n.user:e.user=Qs()}if(this.storage.isServer&&e.user){let n=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,d)=>(!n&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:e},error:null}}const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Me}):await this._useSession(async t=>{var a,i,o;const{data:n,error:l}=t;if(l)throw l;return!(!((a=n.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Le}:await M(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=n.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Me})})}catch(t){if(D(t))return Rl(t)&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async a=>{const{data:i,error:o}=a;if(o)throw o;if(!i.session)throw new Le;const n=i.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await it(this.storage,this.storageKey));const{data:u,error:d}=await M(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:n.access_token,xform:Me});if(d)throw d;return n.user=u.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(a){if(D(a))return{data:{user:null},error:a};throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Le;const t=Date.now()/1e3;let a=t,i=!0,o=null;const{payload:n}=Ks(e.access_token);if(n.exp&&(a=n.exp,i=a<=t),i){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:a-t,expires_at:a},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(t){if(D(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var a;if(!e){const{data:n,error:l}=t;if(l)throw l;e=(a=n.session)!==null&&a!==void 0?a:void 0}if(!e?.refresh_token)throw new Le;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(D(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!ge())throw new es("No browser detected.");if(e.error||e.error_description||e.error_code)throw new es(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new nr("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new es("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new nr("No code detected.");const{data:w,error:x}=await this._exchangeCodeForSession(e.code);if(x)throw x;const v=new URL(window.location.href);return v.searchParams.delete("code"),window.history.replaceState(window.history.state,"",v.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:i,access_token:o,refresh_token:n,expires_in:l,expires_at:c,token_type:u}=e;if(!o||!l||!n||!u)throw new es("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let b=d+h;c&&(b=parseInt(c));const g=b-d;g*1e3<=ht&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${g}s, should have been closer to ${h}s`);const f=b-h;d-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,b,d):d-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,b,d);const{data:y,error:p}=await this._getUser(o);if(p)throw p;const N={provider_token:a,provider_refresh_token:i,access_token:o,expires_in:h,expires_at:b,refresh_token:n,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(a){if(D(a))return{data:{session:null,redirectType:null},error:a};throw a}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Be(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var a;const{data:i,error:o}=t;if(o)return{error:o};const n=(a=i.session)===null||a===void 0?void 0:a.access_token;if(n){const{error:l}=await this.admin.signOut(n,e);if(l&&!(Il(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await $e(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Bl(),a={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,a),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async t=>{var a,i;try{const{data:{session:o},error:n}=t;if(n)throw n;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,t={}){let a=null,i=null;this.flowType==="pkce"&&([a,i]=await it(this.storage,this.storageKey,!0));try{return await M(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:i,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(o){if(D(o))return{data:null,error:o};throw o}}async getUserIdentities(){var e;try{const{data:t,error:a}=await this.getUser();if(a)throw a;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:a,error:i}=await this._useSession(async o=>{var n,l,c,u,d;const{data:h,error:b}=o;if(b)throw b;const g=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await M(this.fetch,"GET",g,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return ge()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(a?.url),{data:{provider:e.provider,url:a?.url},error:null}}catch(a){if(D(a))return{data:{provider:e.provider,url:null},error:a};throw a}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var a,i;const{data:o,error:n}=t;if(n)throw n;return await M(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const a=Date.now();return await Jl(async i=>(i>0&&await Gl(200*Math.pow(2,i-1)),this._debug(t,"refreshing attempt",i),await M(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ae})),(i,o)=>{const n=200*Math.pow(2,i);return o&&Ws(o)&&Date.now()+n-a<ht})}catch(a){if(this._debug(t,"error",a),D(a))return{data:{session:null,user:null},error:a};throw a}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",a),ge()&&!t.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,t;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const i=await Be(this.storage,this.storageKey);if(i&&this.userStorage){let n=await Be(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!n&&(n={user:i.user},await mt(this.userStorage,this.storageKey+"-user",n)),i.user=(e=n?.user)!==null&&e!==void 0?e:Qs()}else if(i&&!i.user&&!i.user){const n=await Be(this.storage,this.storageKey+"-user");n&&n?.user?(i.user=n.user,await $e(this.storage,this.storageKey+"-user"),await mt(this.storage,this.storageKey,i)):i.user=Qs()}if(this._debug(a,"session from storage",i),!this._isValidSession(i)){this._debug(a,"session is not valid"),i!==null&&await this._removeSession();return}const o=((t=i.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Js;if(this._debug(a,`session has${o?"":" not"} expired with margin of ${Js}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:n}=await this._callRefreshToken(i.refresh_token);n&&(console.error(n),Ws(n)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",n),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:n,error:l}=await this._getUser(i.access_token);!l&&n?.user?(i.user=n.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(n){console.error("Error getting user data:",n),this._debug(a,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(a,"error",i),console.error(i);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var t,a;if(!e)throw new Le;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ks;const{data:o,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!o.session)throw new Le;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(i,"error",o),D(o)){const n={session:null,error:o};return Ws(o)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(n),n}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,t,a=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",t,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:t});const o=[],n=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){o.push(c)}});if(await Promise.all(n),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),a=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&t.user&&await mt(this.userStorage,this.storageKey+"-user",{user:t.user});const i=Object.assign({},t);delete i.user;const o=hr(i);await mt(this.storage,this.storageKey,o)}else{const i=hr(t);await mt(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await $e(this.storage,this.storageKey),await $e(this.storage,this.storageKey+"-code-verifier"),await $e(this.storage,this.storageKey+"-user"),this.userStorage&&await $e(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ge()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ht);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:a}}=t;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((a.expires_at*1e3-e)/ht);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${ht}ms, refresh threshold is ${ba} ticks`),i<=ba&&await this._callRefreshToken(a.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fi)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ge()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,a){const i=[`provider=${encodeURIComponent(t)}`];if(a?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a?.scopes&&i.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[o,n]=await it(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(n)}`});i.push(l.toString())}if(a?.queryParams){const o=new URLSearchParams(a.queryParams);i.push(o.toString())}return a?.skipBrowserRedirect&&i.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var a;const{data:i,error:o}=t;return o?{data:null,error:o}:await M(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var a,i;const{data:o,error:n}=t;if(n)return{data:null,error:n};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=await M(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(a=o?.session)===null||a===void 0?void 0:a.access_token});return u?{data:null,error:u}:(e.factorType==="totp"&&(!((i=c?.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(D(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:i,error:o}=t;if(o)return{data:null,error:o};const{data:n,error:l}=await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:l})})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var a;const{data:i,error:o}=t;return o?{data:null,error:o}:await M(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(a=i?.session)===null||a===void 0?void 0:a.access_token})})}catch(t){if(D(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:a}=await this._challenge({factorId:e.factorId});return a?{data:null,error:a}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const a=e?.factors||[],i=a.filter(n=>n.factor_type==="totp"&&n.status==="verified"),o=a.filter(n=>n.factor_type==="phone"&&n.status==="verified");return{data:{all:a,totp:i,phone:o},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,a;const{data:{session:i},error:o}=e;if(o)return{data:null,error:o};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=Ks(i.access_token);let l=null;n.aal&&(l=n.aal);let c=l;((a=(t=i.user.factors)===null||t===void 0?void 0:t.filter(h=>h.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(c="aal2");const d=n.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,t={keys:[]}){let a=t.keys.find(l=>l.kid===e);if(a)return a;const i=Date.now();if(a=this.jwks.keys.find(l=>l.kid===e),a&&this.jwks_cached_at+Cl>i)return a;const{data:o,error:n}=await M(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,a=o.keys.find(l=>l.kid===e),!a)?null:a}async getClaims(e,t={}){try{let a=e;if(!a){const{data:g,error:f}=await this.getSession();if(f||!g.session)return{data:null,error:f};a=g.session.access_token}const{header:i,payload:o,signature:n,raw:{header:l,payload:c}}=Ks(a);t?.allowExpired||ec(o.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!u){const{error:g}=await this.getUser(a);if(g)throw g;return{data:{claims:o,header:i,signature:n},error:null}}const d=tc(i.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,n,ql(`${l}.${c}`)))throw new ja("Invalid JWT signature");return{data:{claims:o,header:i,signature:n},error:null}}catch(a){if(D(a))return{data:null,error:a};throw a}}}qt.nextInstanceID=0;const xc=qt;class yc extends xc{constructor(e){super(e)}}var bc=globalThis&&globalThis.__awaiter||function(r,e,t,a){function i(o){return o instanceof t?o:new t(function(n){n(o)})}return new(t||(t=Promise))(function(o,n){function l(d){try{u(a.next(d))}catch(h){n(h)}}function c(d){try{u(a.throw(d))}catch(h){n(h)}}function u(d){d.done?o(d.value):i(d.value).then(l,c)}u((a=a.apply(r,e||[])).next())})};class wc{constructor(e,t,a){var i,o,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=_l(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:gl,realtime:yl,auth:Object.assign(Object.assign({},xl),{storageKey:u}),global:fl},h=Sl(a??{},d);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=h.global.headers)!==null&&o!==void 0?o:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(b,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((n=h.auth)!==null&&n!==void 0?n:{},this.headers,h.global.fetch),this.fetch=jl(t,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new $n(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new hl(this.storageUrl.href,this.headers,this.fetch,a?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new pn(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},a={}){return this.rest.rpc(e,t,a)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return bc(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:a}=yield this.auth.getSession();return(t=(e=a.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:i,userStorage:o,storageKey:n,flowType:l,lock:c,debug:u},d,h){const b={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yc({url:this.authUrl.href,headers:Object.assign(Object.assign({},b),d),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:a,storage:i,userStorage:o,flowType:l,lock:c,debug:u,fetch:h,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Zn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,a)=>{this._handleTokenChanged(t,"CLIENT",a?.access_token)})}_handleTokenChanged(e,t,a){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==a?this.changedAccessToken=a:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vc=(r,e,t)=>new wc(r,e,t);function jc(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}jc()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Nc="https://oywdjirdotwdsixpxiox.supabase.co",_c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im95d2RqaXJkb3R3ZHNpeHB4aW94Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTY4NDA0OTYsImV4cCI6MjA3MjQxNjQ5Nn0.xNtD7gxPXq-VVK3vvyLr-oL9gk6-SlDU2br_Lg5j7S4",I=vc(Nc,_c,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application-name":"essential-factor-5p"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}}),Sc=async()=>{try{const{error:r}=await I.auth.getSession();return!r}catch(r){return console.warn("Supabase connection check failed:",r),!1}};class Ec{async recordConsent(e,t,a,i,o){try{const n={user_id:e,consent_type:t,granted:a,granted_at:new Date().toISOString(),withdrawn_at:a?null:new Date().toISOString(),ip_address:i,user_agent:o,version:"1.0"},{data:l,error:c}=await I.from("user_consents").insert(n).select().single();if(c){if(c.message?.includes("Could not find the table")||c.code==="PGRST205")return console.warn("Tabela user_consents não encontrada, retornando dados simulados"),{id:`consent_${Date.now()}`,...n};throw c}return l}catch(n){return console.error("Erro ao registrar consentimento:",n),{id:`consent_${Date.now()}`,user_id:e,consent_type:t,granted:a,granted_at:new Date().toISOString(),withdrawn_at:a?void 0:new Date().toISOString(),ip_address:i,user_agent:o,version:"1.0"}}}async getPrivacySettings(e){try{const{data:t,error:a}=await I.from("privacy_settings").select("*").eq("user_id",e).single();if(a){if(a.code==="PGRST205"||a.code==="PGRST116"||a.message?.includes("Could not find the table")||a.message?.includes("does not exist")||a.message?.includes("not found"))return console.warn("Tabela privacy_settings não encontrada, usando configurações padrão"),this.getDefaultPrivacySettings(e);throw a}return t||await this.createDefaultPrivacySettings(e)}catch(t){return console.error("Erro ao obter configurações de privacidade:",t),this.getDefaultPrivacySettings(e)}}getDefaultPrivacySettings(e){return{user_id:e,data_processing_consent:!1,marketing_emails_consent:!1,analytics_consent:!1,cookies_consent:!1,ai_analysis_consent:!1,data_retention_period:365,allow_data_export:!0,allow_data_deletion:!0,updated_at:new Date().toISOString()}}async createDefaultPrivacySettings(e){try{const t=this.getDefaultPrivacySettings(e),{data:a,error:i}=await I.from("privacy_settings").insert(t).select().single();return i?(i.code==="PGRST205"||i.message?.includes("Could not find the table")?console.warn("Tabela privacy_settings não encontrada, usando configurações padrão locais"):console.warn("Não foi possível criar configurações no banco, usando padrões:",i.message),t):a}catch(t){return console.error("Erro ao criar configurações padrão:",t),this.getDefaultPrivacySettings(e)}}async updatePrivacySettings(e,t){try{const{data:a,error:i}=await I.from("privacy_settings").update({...t,updated_at:new Date().toISOString()}).eq("user_id",e).select().single();if(i){if(i.code==="PGRST205"||i.message?.includes("Could not find the table")){console.warn("Tabela privacy_settings não encontrada, retornando configurações simuladas");const n={...this.getDefaultPrivacySettings(e),...t,updated_at:new Date().toISOString()};for(const[l,c]of Object.entries(t))if(l.includes("_consent")&&typeof c=="boolean"){const u=l.replace("_consent","");await this.recordConsent(e,u,c)}return n}throw i}for(const[o,n]of Object.entries(t))if(o.includes("_consent")&&typeof n=="boolean"){const l=o.replace("_consent","");await this.recordConsent(e,l,n)}return a}catch(a){console.error("Erro ao atualizar configurações de privacidade:",a);const o={...this.getDefaultPrivacySettings(e),...t,updated_at:new Date().toISOString()};for(const[n,l]of Object.entries(t))if(n.includes("_consent")&&typeof l=="boolean"){const c=n.replace("_consent","");await this.recordConsent(e,c,l)}return o}}async requestDataExport(e){try{const t={user_id:e,request_type:"export",status:"pending",requested_at:new Date().toISOString()},{data:a,error:i}=await I.from("data_export_requests").insert(t).select().single();if(i){if(i.code==="PGRST205"||i.message?.includes("Could not find the table")){console.warn("Tabela data_export_requests não encontrada, simulando solicitação");const o={id:`export_${Date.now()}`,...t};return this.processDataExport(o.id),o}throw i}return this.processDataExport(a.id),a}catch(t){console.error("Erro ao solicitar exportação de dados:",t);const a={id:`export_${Date.now()}`,user_id:e,request_type:"export",status:"pending",requested_at:new Date().toISOString()};return this.processDataExport(a.id),a}}async requestDataDeletion(e){try{const t={user_id:e,request_type:"deletion",status:"pending",requested_at:new Date().toISOString()},{data:a,error:i}=await I.from("data_export_requests").insert(t).select().single();if(i){if(i.code==="PGRST205"||i.message?.includes("Could not find the table")){console.warn("Tabela data_export_requests não encontrada, simulando solicitação");const o={id:`deletion_${Date.now()}`,...t};return this.processDataDeletion(o.id),o}throw i}return this.processDataDeletion(a.id),a}catch(t){console.error("Erro ao solicitar exclusão de dados:",t);const a={id:`deletion_${Date.now()}`,user_id:e,request_type:"deletion",status:"pending",requested_at:new Date().toISOString()};return this.processDataDeletion(a.id),a}}async processDataExport(e){try{setTimeout(async()=>{const{error:t}=await I.from("data_export_requests").update({status:"completed",completed_at:new Date().toISOString(),download_url:`https://example.com/exports/${e}.zip`,expiry_date:new Date(Date.now()+6048e5).toISOString()}).eq("id",e);t&&console.error("Erro ao atualizar status da exportação:",t)},5e3)}catch(t){console.error("Erro no processamento da exportação:",t)}}async processDataDeletion(e){try{setTimeout(async()=>{const{error:t}=await I.from("data_export_requests").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",e);t&&console.error("Erro ao atualizar status da exclusão:",t)},3e3)}catch(t){console.error("Erro no processamento da exclusão:",t)}}async anonymizeUserData(e){try{const{data:t,error:a}=await I.from("users").select("*").eq("id",e).single();if(a)throw a;return{id:t.id,name:`Usuário Anônimo ${t.id.slice(-8)}`,email:`anonimo_${t.id.slice(-8)}@example.com`,role:t.role,subscription:t.subscription,subscription_status:t.subscription_status,created_at:t.created_at,updated_at:new Date().toISOString(),avatar_url:null,phone:null,birth_date:null,address:null}}catch(t){throw console.error("Erro ao anonimizar dados:",t),t}}async hasConsent(e,t){try{const{data:a,error:i}=await I.from("user_consents").select("granted").eq("user_id",e).eq("consent_type",t).order("granted_at",{ascending:!1}).limit(1).single();if(i){if(i.code==="PGRST205"||i.code==="PGRST116"||i.message?.includes("Could not find the table"))return console.warn("Tabela user_consents não encontrada ou sem dados, retornando false"),!1;throw i}return a?.granted||!1}catch(a){return console.error("Erro ao verificar consentimento:",a),!1}}async getConsentHistory(e){try{const{data:t,error:a}=await I.from("user_consents").select("*").eq("user_id",e).order("granted_at",{ascending:!1});if(a){if(a.code==="PGRST205"||a.message?.includes("Could not find the table"))return console.warn("Tabela user_consents não encontrada, retornando histórico vazio"),[];throw a}return t||[]}catch(t){return console.error("Erro ao obter histórico de consentimentos:",t),[]}}async canProcessData(e){try{return(await this.getPrivacySettings(e)).data_processing_consent}catch(t){return console.error("Erro ao verificar permissão de processamento:",t),!1}}async canSendMarketingEmails(e){try{return(await this.getPrivacySettings(e)).marketing_emails_consent}catch(t){return console.error("Erro ao verificar permissão de marketing:",t),!1}}async canCollectAnalytics(e){try{return(await this.getPrivacySettings(e)).analytics_consent}catch(t){return console.error("Erro ao verificar permissão de analytics:",t),!1}}}const Y=new Ec;class Ct{static async login(e){try{const{data:t,error:a}=await I.auth.signInWithPassword({email:e.email,password:e.password});if(a)throw a.message.includes("Email not confirmed")?(console.log("Email não confirmado, reenviando confirmação..."),await I.auth.resend({type:"signup",email:e.email}),new Error("Email não confirmado. Um novo email de confirmação foi enviado.")):a;let{data:i,error:o}=await I.from("users").select("*").eq("id",t.user.id).single();if(o&&o.code==="PGRST116"){console.log("Perfil não encontrado, criando...");const{data:l,error:c}=await I.from("users").insert({id:t.user.id,email:e.email,name:t.user.user_metadata?.name||"Usuário",subscription:null,subscription_status:"trial"}).select().single();if(c)throw c;i=l,await I.from("user_progress").insert({user_id:t.user.id,streak:0,longest_streak:0,total_days:0,level:1,xp:0,badges:[]})}else o&&(console.log("Usando dados dos metadados do usuário"),i={id:t.user.id,email:e.email,name:t.user.user_metadata?.name||"Usuário",role:t.user.user_metadata?.role||"user",subscription:t.user.user_metadata?.subscription||null,subscription_status:t.user.user_metadata?.subscription_status||"trial",permissions:t.user.user_metadata?.permissions||[],created_at:t.user.created_at,updated_at:t.user.updated_at});const n={...i,role:t.user.user_metadata?.role||i.role||"user",subscription:t.user.user_metadata?.subscription||i.subscription,subscription_status:t.user.user_metadata?.subscription_status||i.subscription_status,permissions:t.user.user_metadata?.permissions||i.permissions||[]};return{user:t.user,profile:n,session:t.session}}catch(t){throw console.error("Login error:",t),t}}static async register(e){try{const{data:t,error:a}=await I.auth.signUp({email:e.email,password:e.password,options:{data:{name:e.name}}});if(a)throw a;if(!t.user)throw new Error("Failed to create user");await new Promise(n=>setTimeout(n,1e3));let{data:i,error:o}=await I.from("users").select("*").eq("id",t.user.id).single();if(o){console.error("Profile fetch error:",o);const{data:n,error:l}=await I.from("users").insert({id:t.user.id,email:e.email,name:e.name,subscription:null,subscription_status:"trial"}).select().single();if(l)throw l;i=n,await I.from("user_progress").insert({user_id:t.user.id,streak:0,longest_streak:0,total_days:0,level:1,xp:0,badges:[]}).select().single()}try{console.log("User registered successfully")}catch(n){console.error("Erro ao registrar consentimentos:",n)}return{user:t.user,profile:i,session:t.session}}catch(t){throw console.error("Register error:",t),t}}static async logout(){try{const{error:e}=await I.auth.signOut();if(e)throw e}catch(e){throw console.error("Logout error:",e),e}}static async getCurrentUser(){try{const{data:{session:e},error:t}=await I.auth.getSession();if(t)return console.warn("Session error:",t.message),null;if(!e||!e.user)return null;const a=e.user,{data:i,error:o}=await I.from("users").select("*").eq("id",a.id).single();return o?(console.warn("Profile error:",o.message),{user:a,profile:null}):{user:a,profile:i}}catch(e){return console.warn("Get current user error:",e),null}}static async resetPassword(e){try{const{error:t}=await I.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(t)throw t}catch(t){throw console.error("Reset password error:",t),t}}static async canSendMarketingEmail(e){try{return await Y.canSendMarketingEmails(e)}catch(t){return console.error("Erro ao verificar consentimento de marketing:",t),!1}}static async canCollectAnalytics(e){try{return await Y.canCollectAnalytics(e)}catch(t){return console.error("Erro ao verificar consentimento de analytics:",t),!1}}static onAuthStateChange(e){return I.auth.onAuthStateChange(e)}}const kc=Object.freeze(Object.defineProperty({__proto__:null,AuthService:Ct},Symbol.toStringTag,{value:"Module"}));class xr{static async saveDailyProtocol(e,t){try{const{data:a,error:i}=await I.from("daily_protocols").upsert({user_id:e,...t,updated_at:new Date().toISOString()},{onConflict:"user_id,date"}).select().single();if(i)throw i;return a}catch(a){throw console.error("Save daily protocol error:",a),a}}static async getDailyProtocol(e,t){try{const{data:a,error:i}=await I.from("daily_protocols").select("*").eq("user_id",e).eq("date",t).single();if(i&&i.code!=="PGRST116")throw i;return a}catch(a){throw console.error("Get daily protocol error:",a),a}}static async getProtocolHistory(e,t=30){try{const a=new Date;a.setDate(a.getDate()-t);const{data:i,error:o}=await I.from("daily_protocols").select("*").eq("user_id",e).gte("date",a.toISOString().split("T")[0]).order("date",{ascending:!1});if(o)throw o;return i||[]}catch(a){throw console.error("Get protocol history error:",a),a}}static async getCompletionStats(e){try{const{data:t,error:a}=await I.from("daily_protocols").select("date, p1_affirmations, p2_feeling, p3_peak_state_completed, p4_completed, p5_victory, p5_gratitude").eq("user_id",e).order("date",{ascending:!1});if(a)throw a;const i={totalDays:t?.length||0,completedDays:0,currentStreak:0,longestStreak:0};if(!t||t.length===0)return i;i.completedDays=t.filter(d=>{const h=d.p1_affirmations?.length===3&&d.p2_feeling&&d.p3_peak_state_completed&&d.p4_completed;return new Date().getHours()>=18?h&&d.p5_victory&&d.p5_gratitude:h}).length;let o=0,n=0,l=0;const c=new Date().toISOString().split("T")[0],u=t.sort((d,h)=>new Date(h.date).getTime()-new Date(d.date).getTime());for(let d=0;d<u.length;d++){const h=u[d];h.p1_affirmations?.length===3&&h.p2_feeling&&h.p3_peak_state_completed&&h.p4_completed?(l++,d===0&&h.date===c&&(o=l)):(l>n&&(n=l),l=0)}return l>n&&(n=l),i.currentStreak=o,i.longestStreak=n,i}catch(t){throw console.error("Get completion stats error:",t),t}}}class Ys{static async getUserProgress(e){try{const{data:t,error:a}=await I.from("user_progress").select("*").eq("user_id",e).single();if(a)throw a;return t}catch(t){throw console.error("Get user progress error:",t),t}}static async updateUserProgress(e,t){try{const{data:a,error:i}=await I.from("user_progress").update({...t,updated_at:new Date().toISOString()}).eq("user_id",e).select().single();if(i)throw i;return a}catch(a){throw console.error("Update user progress error:",a),a}}static async addXP(e,t){try{const a=await this.getUserProgress(e),i=a.xp+t,o=Math.floor(i/1e3)+1,n={xp:i,level:o};return o>a.level&&(n.badges=[...a.badges,`level-${o}`]),await this.updateUserProgress(e,n)}catch(a){throw console.error("Add XP error:",a),a}}static async updateStreak(e,t=!0){try{const a=await this.getUserProgress(e),i=t?a.streak+1:0,o=Math.max(i,a.longest_streak),n=t?a.total_days+1:a.total_days,l={streak:i,longest_streak:o,total_days:n};return t&&[7,21,50,100].includes(i)&&(l.badges=[...a.badges,`streak-${i}`]),await this.updateUserProgress(e,l)}catch(a){throw console.error("Update streak error:",a),a}}static async addBadge(e,t){try{const a=await this.getUserProgress(e);if(!a.badges.includes(t)){const i={badges:[...a.badges,t]};return await this.updateUserProgress(e,i)}return a}catch(a){throw console.error("Add badge error:",a),a}}static async saveOnboardingResults(e,t){try{const{data:a,error:i}=await I.from("onboarding_results").upsert({user_id:e,...t},{onConflict:"user_id"}).select().single();if(i)throw i;return await I.from("user_profiles").update({updated_at:new Date().toISOString()}).eq("id",e),a}catch(a){throw console.error("Save onboarding results error:",a),a}}static async getOnboardingResults(e){try{const{data:t,error:a}=await I.from("onboarding_results").select("*").eq("user_id",e).single();if(a&&a.code!=="PGRST116")throw a;return t}catch(t){throw console.error("Get onboarding results error:",t),t}}static async updateUserProfile(e,t){try{const{data:a,error:i}=await I.from("user_profiles").update({...t,updated_at:new Date().toISOString()}).eq("id",e).select().single();if(i)throw i;return a}catch(a){throw console.error("Update user profile error:",a),a}}}const is=()=>new Date().toISOString().split("T")[0],ct={date:is(),p1_affirmations:[],p2_feeling:null,p2_trigger:"",p3_peak_state_completed:!1,p4_amv:"",p4_completed:!1,p5_victory:"",p5_feedback:"",p5_gratitude:""},G=rn()(dn((r,e)=>({user:null,isAuthenticated:!1,hasCompletedOnboarding:!1,onboardingResults:null,dailyProtocol:ct,streak:0,longestStreak:0,totalDays:0,level:1,xp:0,badges:[],currentAudio:null,isPlaying:!1,theme:"light",notifications:!0,setUser:t=>r({user:t,isAuthenticated:!!t}),setAuthenticated:t=>r({isAuthenticated:t}),completeOnboarding:t=>r({hasCompletedOnboarding:!0,onboardingResults:t}),updateDailyProtocol:(t,a)=>{const i=is(),o=e().dailyProtocol;o.date!==i?r({dailyProtocol:{...ct,date:i,[t]:a}}):r({dailyProtocol:{...o,[t]:a}})},resetDailyProtocol:()=>r({dailyProtocol:{...ct,date:is()}}),addXP:t=>{const i=e().xp+t,o=Math.floor(i/1e3)+1;r({xp:i,level:o}),o>e().level&&e().addBadge(`level-${o}`)},incrementStreak:()=>{const t=e().streak+1,a=Math.max(t,e().longestStreak);r({streak:t,longestStreak:a,totalDays:e().totalDays+1}),[7,21,50,100].includes(t)&&e().addBadge(`streak-${t}`)},resetStreak:()=>r({streak:0}),addBadge:t=>{const a=e().badges;a.includes(t)||r({badges:[...a,t]})},setCurrentAudio:t=>r({currentAudio:t}),setIsPlaying:t=>r({isPlaying:t}),setTheme:t=>r({theme:t}),setNotifications:t=>r({notifications:t}),hasPermission:t=>{const{user:a}=e();return a?a.role==="super_admin"?!0:a.permissions?.includes(t)||!1:!1},isAdmin:()=>{const{user:t}=e();return t?.role==="admin"||t?.role==="super_admin"},isSuperAdmin:()=>{const{user:t}=e();return t?.role==="super_admin"},hasFullAccess:()=>{const{user:t}=e();return!!(t?.role==="super_admin"||t?.subscription==="prosperous"||t?.permissions?.includes("all_features"))},login:async(t,a)=>{const i=await Sc(),n=[{email:"admin@example.com",password:"123456"},{email:"rickrapozo@gmail.com",password:"Rick@2290"},{email:"test.rickrapozo@gmail.com",password:"Rick@2290"}].some(l=>l.email===t&&l.password===a);if(!i&&n){console.log("Sem conectividade Supabase, usando modo fallback"),r({user:{id:"fallback-admin-id",email:t,name:t==="admin@example.com"?"Administrador (Demo)":"Rick Rapozo (Admin)",subscription:"prosperous",subscription_status:"active",role:"super_admin",permissions:["admin_panel","user_management","content_management","analytics","system_settings","all_features","therapist_ai","premium_content","unlimited_access"]},isAuthenticated:!0,hasCompletedOnboarding:!0,streak:30,longestStreak:45,totalDays:100,level:10,xp:15e3,badges:["admin","super_user","offline_mode"]});return}try{const{profile:l}=await Ct.login({email:t,password:a});if(r({user:l,isAuthenticated:!0,hasCompletedOnboarding:!0}),l.role==="super_admin"||l.role==="admin")r({streak:30,longestStreak:45,totalDays:100,level:10,xp:15e3,badges:["admin","super_user","streak-7","streak-21","streak-30","level-5","level-10","master","guru","transformer"],hasCompletedOnboarding:!0});else try{const c=await Ys.getUserProgress(l.id);r({streak:c.streak,longestStreak:c.longest_streak,totalDays:c.total_days,level:c.level,xp:c.xp,badges:c.badges})}catch(c){console.warn("Erro ao carregar progresso, usando padrões:",c)}}catch(l){if(console.error("Login failed:",l),n){console.log("Erro no Supabase, usando fallback para credenciais válidas"),r({user:{id:"fallback-admin-id",email:t,name:t==="admin@example.com"?"Administrador (Fallback)":"Rick Rapozo (Fallback)",subscription:"prosperous",subscription_status:"active",role:"super_admin",permissions:["admin_panel","user_management","content_management","analytics","system_settings","all_features","therapist_ai","premium_content","unlimited_access"]},isAuthenticated:!0,hasCompletedOnboarding:!0,streak:30,longestStreak:45,totalDays:100,level:10,xp:15e3,badges:["admin","super_user","fallback_mode"]});return}throw l}},register:async(t,a,i)=>{try{const{profile:o}=await Ct.register({email:t,password:a,name:i});r({user:o,isAuthenticated:!0,hasCompletedOnboarding:!1})}catch(o){throw console.error("Registration failed:",o),o}},logout:async()=>{try{await Ct.logout(),r({user:null,isAuthenticated:!1,hasCompletedOnboarding:!1,onboardingResults:null,dailyProtocol:ct,streak:0,longestStreak:0,totalDays:0,level:1,xp:0,badges:[],currentAudio:null,isPlaying:!1})}catch(t){throw console.error("Logout failed:",t),t}},loadUserData:async()=>{try{const t=await Ct.getCurrentUser();if(t){const{profile:a}=t;r({user:a,isAuthenticated:!0});try{const i=await Ys.getOnboardingResults(a.id),o=await Ys.getUserProgress(a.id);r({hasCompletedOnboarding:!!i,onboardingResults:i,streak:o.streak,longestStreak:o.longest_streak,totalDays:o.total_days,level:o.level,xp:o.xp,badges:o.badges}),await e().loadDailyProtocol()}catch(i){console.warn("Erro ao carregar dados adicionais do usuário:",i),r({hasCompletedOnboarding:!1,onboardingResults:null,streak:0,longestStreak:0,totalDays:0,level:1,xp:0,badges:[]})}}else{if(e().user?.id==="demo-user-id")return;r({user:null,isAuthenticated:!1,hasCompletedOnboarding:!1,onboardingResults:null})}}catch(t){console.error("Load user data failed:",t)}},saveDailyProtocol:async()=>{try{const{user:t,dailyProtocol:a}=e();if(!t)return;if(t.id==="demo-user-id"){console.log("Demo mode: Protocol saved locally only");return}await xr.saveDailyProtocol(t.id,a)}catch(t){throw console.error("Save daily protocol failed:",t),t}},loadDailyProtocol:async t=>{try{const{user:a}=e();if(!a)return;const i=t||is();if(a.id==="demo-user-id"){r({dailyProtocol:{...ct,date:i}});return}const o=await xr.getDailyProtocol(a.id,i);r(o?{dailyProtocol:o}:{dailyProtocol:{...ct,date:i}})}catch(a){console.error("Load daily protocol failed:",a)}}}),{name:"essential-factor-storage",partialize:r=>({user:r.user,isAuthenticated:r.isAuthenticated,hasCompletedOnboarding:r.hasCompletedOnboarding,onboardingResults:r.onboardingResults,dailyProtocol:r.dailyProtocol,streak:r.streak,longestStreak:r.longestStreak,totalDays:r.totalDays,level:r.level,xp:r.xp,badges:r.badges,theme:r.theme,notifications:r.notifications})}));class Tc{sessionId;events=[];pageViews=[];redirects=[];pageStartTime=Date.now();constructor(){this.sessionId=this.generateSessionId(),this.loadStoredData()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}loadStoredData(){try{const e=localStorage.getItem("analytics_events"),t=localStorage.getItem("analytics_pageviews"),a=localStorage.getItem("analytics_redirects");e&&(this.events=JSON.parse(e)),t&&(this.pageViews=JSON.parse(t)),a&&(this.redirects=JSON.parse(a))}catch(e){console.warn("Failed to load stored analytics data:",e)}}saveToStorage(){try{localStorage.setItem("analytics_events",JSON.stringify(this.events.slice(-1e3))),localStorage.setItem("analytics_pageviews",JSON.stringify(this.pageViews.slice(-500))),localStorage.setItem("analytics_redirects",JSON.stringify(this.redirects.slice(-200)))}catch(e){console.warn("Failed to save analytics data:",e)}}async trackButtonClick(e,t,a,i){if(t&&!await Y.canCollectAnalytics(t))return;const o={eventType:"button_click",eventName:e,userId:t,userRole:a,timestamp:new Date().toISOString(),metadata:i,source:window.location.pathname,sessionId:this.sessionId};this.events.push(o),this.saveToStorage()}async trackPageView(e,t,a,i){if(t&&!await Y.canCollectAnalytics(t))return;if(this.pageViews.length>0){const n=this.pageViews[this.pageViews.length-1];n.timeOnPage=Date.now()-this.pageStartTime}const o={page:e,userId:t,userRole:a,timestamp:new Date().toISOString(),referrer:i,sessionId:this.sessionId};this.pageViews.push(o),this.pageStartTime=Date.now(),this.saveToStorage()}async trackRedirect(e,t,a,i,o){if(i&&!await Y.canCollectAnalytics(i))return;const n={source:e,destination:t,reason:a,userId:i,userRole:o,timestamp:new Date().toISOString(),sessionId:this.sessionId};this.redirects.push(n),this.saveToStorage()}async trackAdminPanelAccess(e,t,a=!0){if(e&&!await Y.canCollectAnalytics(e))return;const i={eventType:"user_interaction",eventName:"admin_panel_access_attempt",userId:e,userRole:t,timestamp:new Date().toISOString(),metadata:{hasAccess:a,accessGranted:a},source:window.location.pathname,destination:a?"/app/admin":"/onboarding/welcome",sessionId:this.sessionId};this.events.push(i),this.saveToStorage()}getAnalyticsData(){return{events:this.events,pageViews:this.pageViews,redirects:this.redirects,sessionId:this.sessionId}}getPageViewMetrics(){const e={};return this.pageViews.forEach(t=>{e[t.page]||(e[t.page]={views:0,uniqueUsers:new Set,totalTime:0,bounces:0}),e[t.page].views++,t.userId&&e[t.page].uniqueUsers.add(t.userId),t.timeOnPage&&(e[t.page].totalTime+=t.timeOnPage),t.timeOnPage&&t.timeOnPage<5e3&&e[t.page].bounces++}),Object.keys(e).forEach(t=>{const a=e[t];a.uniqueUsers=a.uniqueUsers.size,a.avgTimeOnPage=a.views>0?a.totalTime/a.views:0,a.bounceRate=a.views>0?a.bounces/a.views*100:0}),e}getRedirectAnalytics(){const e={};return this.redirects.forEach(t=>{const a=`${t.source} -> ${t.destination}`;e[a]||(e[a]={count:0,reasons:{},users:new Set}),e[a].count++,e[a].reasons[t.reason]=(e[a].reasons[t.reason]||0)+1,t.userId&&e[a].users.add(t.userId)}),Object.keys(e).forEach(t=>{e[t].uniqueUsers=e[t].users.size,delete e[t].users}),e}clearAnalyticsData(){this.events=[],this.pageViews=[],this.redirects=[],localStorage.removeItem("analytics_events"),localStorage.removeItem("analytics_pageviews"),localStorage.removeItem("analytics_redirects"),console.log("📊 Analytics data cleared")}exportAnalyticsData(){const e={events:this.events,pageViews:this.pageViews,redirects:this.redirects,exportedAt:new Date().toISOString(),sessionId:this.sessionId};return JSON.stringify(e,null,2)}}const re=new Tc,Pc=()=>{const r=Gi(),{user:e}=G(),t=j.useRef(Date.now()),a=j.useRef("");return j.useEffect(()=>{const c=r.pathname,u=a.current||document.referrer;return re.trackPageView(c,e?.id,e?.role,u),a.current=c,t.current=Date.now(),()=>{Date.now()-t.current>1e3&&re.trackPageView(c,e?.id,e?.role,u)}},[r.pathname,e?.id,e?.role]),{trackEvent:(c,u)=>{re.trackButtonClick(c,e?.id,e?.role,{...u,currentPage:r.pathname,timestamp:new Date().toISOString()})},trackButtonClick:(c,u)=>{re.trackButtonClick(c,e?.id,e?.role,{...u,currentPage:r.pathname,userAgent:navigator.userAgent})},trackRedirect:(c,u)=>{re.trackRedirect(r.pathname,c,u,e?.id,e?.role)},trackAdminAccess:(c=!0)=>{re.trackAdminPanelAccess(e?.id,e?.role,c)},analyticsService:re}},fe=()=>s.jsxs(m.div,{className:"flex items-center justify-center space-x-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-gold to-bright-gold rounded-lg flex items-center justify-center shadow-lg",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"5P"})}),s.jsxs("div",{className:"text-left",children:[s.jsx("h1",{className:"text-white font-heading font-bold text-lg leading-tight",children:"Fator Essencial"}),s.jsx("p",{className:"text-gold-shimmer text-xs font-medium",children:"Método 5Ps Plataforma"})]})]}),Cc=()=>{const{user:r,streak:e,notifications:t,isAdmin:a,hasCompletedOnboarding:i}=G(),o=te();return s.jsx(m.header,{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-deep-forest to-forest-green backdrop-blur-lg border-b border-white/10",initial:{y:-100},animate:{y:0},transition:{duration:.5},children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-area-top",children:[s.jsx(fe,{}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(m.div,{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-3 py-1",whileTap:{scale:.95},children:[s.jsx("span",{className:"text-lg",children:"🔥"}),s.jsx("span",{className:"text-white font-semibold text-sm",children:e})]}),a()&&s.jsx(m.button,{className:"relative p-2 rounded-full bg-gradient-to-r from-purple-600 to-indigo-600 backdrop-blur-sm",whileTap:{scale:.95},title:"Painel Administrativo",onClick:()=>{re.trackButtonClick("admin_panel_button",r?.id,r?.role||"admin",{hasCompletedOnboarding:i,currentPage:window.location.pathname,userAgent:navigator.userAgent}),re.trackAdminPanelAccess(r?.id,r?.role||"admin",!0),i||re.trackRedirect(window.location.pathname,"/onboarding/welcome","incomplete_onboarding",r?.id,r?.role||"admin"),o("/app/admin")},children:s.jsx(ke,{className:"w-5 h-5 text-white"})}),s.jsxs(m.button,{className:"relative p-2 rounded-full bg-white/10 backdrop-blur-sm",whileTap:{scale:.95},children:[s.jsx(Or,{className:"w-5 h-5 text-white"}),t&&s.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-royal-gold rounded-full"})]}),s.jsxs(m.button,{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full p-1 pr-3",whileTap:{scale:.95},children:[s.jsx("div",{className:"w-8 h-8 bg-royal-gold rounded-full flex items-center justify-center",children:s.jsx(gt,{className:"w-4 h-4 text-white"})}),s.jsx("span",{className:"text-white text-sm font-medium",children:r?.name?.split(" ")[0]||"Usuário"})]})]})]})})},Ac=[{icon:Yi,label:"Dashboard",route:"/app/dashboard"},{icon:ve,label:"Terapeuta AI",route:"/app/therapist-ai",premium:!0},{icon:Zi,label:"Jornadas",route:"/app/journeys"},{icon:eo,label:"Cofre Mental",route:"/app/mind-vault"},{icon:Pa,label:"Biblioteca",route:"/app/library"}],Ic=()=>{const{user:r}=G(),e=r?.subscription==="prosperous";return s.jsx(m.nav,{className:"fixed bottom-0 left-0 right-0 z-50 bg-white/95 backdrop-blur-lg border-t border-gray-200 safe-area-bottom",initial:{y:100},animate:{y:0},transition:{duration:.5},children:s.jsx("div",{className:"flex items-center justify-around px-2 py-2",children:Ac.map(t=>{const a=t.premium&&!e;return s.jsx(Ji,{to:t.route,className:({isActive:i})=>`relative flex flex-col items-center justify-center p-2 rounded-xl transition-all duration-200 ${i?"bg-royal-gold text-white":"text-dark-gray hover:text-royal-gold"} ${a?"opacity-50":""}`,children:({isActive:i})=>s.jsxs(s.Fragment,{children:[s.jsxs(m.div,{whileTap:{scale:.9},className:"relative",children:[s.jsx(t.icon,{className:"w-6 h-6"}),t.premium&&s.jsx(ke,{className:"absolute -top-1 -right-1 w-3 h-3 text-royal-gold"}),a&&s.jsx("div",{className:"absolute inset-0 bg-gray-400/50 rounded-full"})]}),s.jsx("span",{className:"text-xs font-medium mt-1 text-center",children:t.label}),i&&s.jsx(m.div,{className:"absolute -top-1 left-1/2 w-1 h-1 bg-white rounded-full",layoutId:"activeIndicator",initial:{scale:0},animate:{scale:1},style:{x:"-50%"}})]})},t.route)})})})},Rc=()=>{const{currentAudio:r,isPlaying:e,setIsPlaying:t,setCurrentAudio:a}=G();return r?s.jsxs(m.div,{initial:{y:100},animate:{y:0},exit:{y:100},className:"fixed bottom-20 left-4 right-4 z-40 bg-gradient-to-r from-deep-forest to-forest-green backdrop-blur-lg rounded-2xl border border-white/20 p-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"text-white font-semibold text-sm truncate",children:r.title}),s.jsx("p",{className:"text-pearl-white/70 text-xs truncate",children:r.description})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(m.button,{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",whileTap:{scale:.9},children:s.jsx(to,{className:"w-4 h-4 text-white"})}),s.jsx(m.button,{className:"p-3 rounded-full bg-royal-gold hover:bg-bright-gold transition-colors",whileTap:{scale:.9},onClick:()=>t(!e),children:e?s.jsx(Dr,{className:"w-5 h-5 text-white"}):s.jsx(Ca,{className:"w-5 h-5 text-white ml-0.5"})}),s.jsx(m.button,{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",whileTap:{scale:.9},children:s.jsx(so,{className:"w-4 h-4 text-white"})}),s.jsx(m.button,{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",whileTap:{scale:.9},onClick:()=>a(null),children:s.jsx($t,{className:"w-4 h-4 text-white"})})]})]}),s.jsx("div",{className:"mt-3",children:s.jsx("div",{className:"w-full bg-white/20 rounded-full h-1",children:s.jsx(m.div,{className:"bg-royal-gold h-1 rounded-full",initial:{width:0},animate:{width:"30%"},transition:{duration:1}})})})]}):null},Oc=()=>{const{currentAudio:r}=G();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green",children:[s.jsx(Cc,{}),s.jsx("main",{className:"pt-16 pb-20",children:s.jsx(Wi,{})}),r&&s.jsx(Rc,{}),s.jsx(Ic,{})]})};class Dc{rateLimitMap=new Map;securityConfig={jwtSecret:"super_secret_jwt_key_here",sessionTimeout:86400,passwordMinLength:8,twoFactorEnabled:!0,rateLimitPerMinute:100,apiTimeout:3e4};updateSecurityConfig(e){this.securityConfig={...this.securityConfig,...e}}validatePasswordStrength(e){const t=[];return e.length<this.securityConfig.passwordMinLength&&t.push(`Senha deve ter pelo menos ${this.securityConfig.passwordMinLength} caracteres`),/[A-Z]/.test(e)||t.push("Senha deve conter pelo menos uma letra maiúscula"),/[a-z]/.test(e)||t.push("Senha deve conter pelo menos uma letra minúscula"),/\d/.test(e)||t.push("Senha deve conter pelo menos um número"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("Senha deve conter pelo menos um caractere especial"),{isValid:t.length===0,errors:t}}checkRateLimit(e){const t=Date.now(),a=this.rateLimitMap.get(e);return a?t>a.resetTime?(this.rateLimitMap.set(e,{count:1,resetTime:t+6e4}),!0):a.count>=this.securityConfig.rateLimitPerMinute?!1:(a.count++,!0):(this.rateLimitMap.set(e,{count:1,resetTime:t+6e4}),!0)}async validateSession(e){try{const{data:{session:t},error:a}=await I.auth.getSession();if(a)return console.log("Erro ao obter sessão:",a),{isValid:!1};if(!t)return console.log("Nenhuma sessão ativa encontrada"),{isValid:!1};const i=Math.floor(Date.now()/1e3);if(t.expires_at&&t.expires_at<i)return console.log("Sessão expirou pelo Supabase"),await I.auth.signOut(),{isValid:!1};if(t.user.id!==e)return console.log("ID do usuário não corresponde à sessão"),{isValid:!1};const{data:o,error:n}=await I.from("users").select("*").eq("id",e).single();return n?(console.log("Erro ao buscar perfil do usuário:",n),t.user?{isValid:!0,user:{id:t.user.id,email:t.user.email||"",name:t.user.user_metadata?.name||t.user.email?.split("@")[0]||"Usuário",role:t.user.user_metadata?.role||"user",permissions:t.user.user_metadata?.permissions||[],hasCompletedOnboarding:t.user.user_metadata?.hasCompletedOnboarding||!1}}:{isValid:!1}):{isValid:!0,user:o}}catch(t){return console.error("Erro ao validar sessão:",t),{isValid:!1}}}hasPermission(e,t){return e?e.role==="super_admin"?!0:e.permissions?.includes(t)||!1:!1}isAdmin(e){return e?.role==="admin"||e?.role==="super_admin"}canAccessAdminRoute(e,t){if(!this.isAdmin(e))return!1;const i={"/admin":["admin","super_admin"],"/admin/users":["super_admin"],"/admin/system-settings":["super_admin"],"/admin/content":["admin","super_admin"],"/admin/analytics":["admin","super_admin"]}[t];return i?i.includes(e?.role||""):!1}async logSecurityEvent(e,t,a={}){try{const i=await this.getClientIP(),o=navigator.userAgent,{error:n}=await I.from("security_events").insert({user_id:e,event_type:t,ip_address:i,user_agent:o,details:a,created_at:new Date().toISOString()});n&&(n.code==="PGRST205"||n.message?.includes("Could not find the table")?console.warn("Tabela security_events não encontrada, evento registrado apenas no console:",{userId:e,eventType:t,ipAddress:i,userAgent:o,details:a,timestamp:new Date().toISOString()}):console.error("Erro ao registrar evento de segurança:",n))}catch(i){console.error("Erro ao registrar evento de segurança:",i),console.warn("Evento de segurança (fallback):",{userId:e,eventType:t,details:a,timestamp:new Date().toISOString()})}}async detectSuspiciousActivity(e){try{const t=new Date(Date.now()-36e5).toISOString(),{data:a,error:i}=await I.from("security_events").select("*").eq("user_id",e).gte("created_at",t).order("created_at",{ascending:!1});if(i)return i.code==="PGRST205"||i.message?.includes("Could not find the table")?(console.warn("Tabela security_events não encontrada, não é possível detectar atividade suspeita"),!1):(console.error("Erro ao buscar eventos de segurança:",i),!1);const o=a?.filter(l=>l.event_type==="failed_login")||[];if(o.length>=5)return await this.logSecurityEvent(e,"suspicious_activity",{reason:"multiple_failed_logins",count:o.length}),!0;const n=new Set(a?.map(l=>l.ip_address)||[]);return n.size>=3?(await this.logSecurityEvent(e,"suspicious_activity",{reason:"multiple_ip_addresses",ips:Array.from(n)}),!0):!1}catch(t){return console.error("Erro ao detectar atividade suspeita:",t),!1}}async getClientIP(){try{return"unknown"}catch{return"unknown"}}sanitizeInput(e){return e.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<[^>]*>/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim()}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}generateCSRFToken(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}validateCSRFToken(e,t){return e===t}encryptSensitiveData(e){return btoa(e)}decryptSensitiveData(e){try{return atob(e)}catch{return""}}verifyDataIntegrity(e,t){if(!t)return!0;const a=JSON.stringify(e);return btoa(a)===t}async cleanupExpiredSessions(){try{const e=new Date(Date.now()-this.securityConfig.sessionTimeout*1e3);console.log("Limpeza de sessões expiradas simulada para:",e)}catch(e){console.error("Erro ao limpar sessões expiradas:",e)}}getSecurityConfig(){return{...this.securityConfig}}async isTwoFactorEnabled(e){try{const{data:t,error:a}=await I.from("users").select("two_factor_enabled").eq("id",e).single();return a?(console.error("Erro ao verificar 2FA:",a),!1):t?.two_factor_enabled||!1}catch(t){return console.error("Erro ao verificar 2FA:",t),!1}}}const B=new Dc;class $c{async validateAccess(e,t={}){const a={user:e,isAuthenticated:!!e,hasPermission:i=>B.hasPermission(e,i),isAdmin:()=>B.isAdmin(e),canAccessRoute:i=>B.canAccessAdminRoute(e,i)};return t.rateLimitKey&&!B.checkRateLimit(t.rateLimitKey)?(e&&await B.logSecurityEvent(e.id,"rate_limit_exceeded",{rateLimitKey:t.rateLimitKey}),{allowed:!1,reason:"Rate limit exceeded",context:a}):t.requireAuth&&!e?{allowed:!1,reason:"Authentication required",context:a}:t.requireAdmin&&!B.isAdmin(e)?(e&&await B.logSecurityEvent(e.id,"unauthorized_access",{reason:"admin_required",attemptedAction:"admin_access"}),{allowed:!1,reason:"Admin access required",context:a}):t.requiredPermissions&&t.requiredPermissions.length>0&&!t.requiredPermissions.every(o=>B.hasPermission(e,o))?(e&&await B.logSecurityEvent(e.id,"unauthorized_access",{reason:"insufficient_permissions",requiredPermissions:t.requiredPermissions,userPermissions:e?.permissions||[]}),{allowed:!1,reason:"Insufficient permissions",context:a}):t.allowedRoles&&t.allowedRoles.length>0&&!t.allowedRoles.includes(e?.role||"")?(e&&await B.logSecurityEvent(e.id,"unauthorized_access",{reason:"invalid_role",allowedRoles:t.allowedRoles,userRole:e?.role}),{allowed:!1,reason:"Invalid role for this action",context:a}):e&&await B.detectSuspiciousActivity(e.id)?{allowed:!1,reason:"Suspicious activity detected",context:a}:{allowed:!0,context:a}}async validateSession(e){try{const t=await B.validateSession(e);return t.isValid?{valid:!0,user:t.user}:{valid:!1,reason:"Invalid or expired session"}}catch(t){return console.error("Erro na validação de sessão:",t),{valid:!1,reason:"Session validation error"}}}validateInput(e){const t=[],a={};for(const[i,o]of Object.entries(e))typeof o=="string"?(a[i]=B.sanitizeInput(o),i.toLowerCase().includes("email")&&!B.isValidEmail(o)&&t.push(`Invalid email format for field: ${i}`)):a[i]=o;return{valid:t.length===0,sanitized:a,errors:t}}validatePassword(e){const t=B.validatePasswordStrength(e);return{valid:t.isValid,errors:t.errors}}async logUserAction(e,t,a={}){try{await B.logSecurityEvent(e,"login_attempt",{action:t,...a,timestamp:new Date().toISOString()})}catch(i){console.error("Erro ao registrar ação do usuário:",i)}}validateCSRF(e,t){return B.validateCSRFToken(e,t)}verifyDataIntegrity(e,t){return B.verifyDataIntegrity(e,t)}createAuthContext(e){return{user:e,isAuthenticated:!!e,hasPermission:t=>B.hasPermission(e,t),isAdmin:()=>B.isAdmin(e),canAccessRoute:t=>B.canAccessAdminRoute(e,t)}}async validateAdminAccess(e,t){return e?B.canAccessAdminRoute(e,t)?{allowed:!0}:(await B.logSecurityEvent(e.id,"unauthorized_access",{reason:"admin_route_access_denied",route:t,userRole:e.role}),{allowed:!1,reason:"Insufficient privileges for admin route"}):{allowed:!1,reason:"Authentication required"}}async requireTwoFactor(e){try{const t=await B.isTwoFactorEnabled(e);return{required:B.getSecurityConfig().twoFactorEnabled,enabled:t}}catch(t){return console.error("Erro ao verificar 2FA:",t),{required:!1,enabled:!1}}}}const ts=new $c;let Zs=!1,ea=null;const Lc=()=>{Zs||(Zs=!0,L.error("Sua sessão expirou. Faça login novamente."),ea&&clearTimeout(ea),ea=setTimeout(()=>{Zs=!1},5e3))},gi=(r={})=>{const{user:e,isAuthenticated:t}=G(),[a,i]=j.useState(!0),[o,n]=j.useState(!1),[l,c]=j.useState(null),[u,d]=j.useState(!1),h=j.useRef(!1),b=ts.createAuthContext(e),g=j.useCallback(async w=>{i(!0),c(null);try{const x={...r,...w},v=await ts.validateAccess(e,x);return v.allowed?(n(!0),!0):(c(v.reason||"Access denied"),n(!1),v.reason&&L.error(v.reason),!1)}catch(x){const v=x instanceof Error?x.message:"Validation error";return c(v),n(!1),!1}finally{i(!1)}},[e,r]),f=j.useCallback(async()=>{if(!e?.id)return d(!1),!1;try{const w=await ts.validateSession(e.id);return d(w.valid),w.valid||(c(w.reason||"Invalid session"),Lc()),w.valid}catch{return d(!1),c("Session validation failed"),!1}},[e?.id]),y=j.useCallback(async(w,x={})=>{if(e?.id)try{await ts.logUserAction(e.id,w,x)}catch(v){console.error("Erro ao registrar ação:",v)}},[e?.id]),p=j.useCallback(w=>b.hasPermission(w),[b]),N=j.useCallback(w=>e?.role===w,[e?.role]);return j.useEffect(()=>{(async()=>{if(!h.current){h.current=!0,i(!0);try{if(r.autoValidateSession&&e?.id&&!await f()){i(!1);return}await g()}finally{h.current=!1}}})()},[e,r.autoValidateSession]),j.useEffect(()=>{if(!r.autoValidateSession||!e?.id||!t)return;const w=setInterval(async()=>{!a&&e?.id&&t&&await f()},30*60*1e3);return()=>clearInterval(w)},[e?.id,t,r.autoValidateSession,a]),j.useEffect(()=>{if(!e?.id||a)return;const x=setInterval(async()=>{if(!(!e?.id||a))try{await B.detectSuspiciousActivity(e.id)&&(c("Atividade suspeita detectada. Sessão bloqueada por segurança."),n(!1),d(!1),L.error("Atividade suspeita detectada. Sua sessão foi bloqueada."))}catch(v){console.error("Erro ao verificar atividade suspeita:",v)}},20*60*1e3);return()=>clearInterval(x)},[e?.id,a]),{authContext:b,isLoading:a,isAuthorized:o,error:l,validateAccess:g,validateSession:f,logAction:y,checkPermission:p,checkRole:N,isSessionValid:u}},Mc=()=>gi({requireAuth:!0,requireAdmin:!0,autoValidateSession:!0,rateLimitKey:"admin_access"}),xi=()=>s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center",children:s.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[s.jsx(fe,{}),s.jsx(m.div,{className:"mt-8 flex justify-center",animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:s.jsx("div",{className:"w-8 h-8 border-4 border-royal-gold border-t-transparent rounded-full"})}),s.jsx(m.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"text-pearl-white/80 text-body-md mt-4",children:"Carregando sua jornada..."})]})}),ta=({children:r,requireOnboarding:e=!1,requireAdmin:t=!1,requiredPermissions:a,allowedRoles:i})=>{const{isAuthenticated:o,hasCompletedOnboarding:n,user:l}=G(),{isLoading:c,isAuthorized:u,logAction:d,isSessionValid:h}=gi({requireAuth:!0,requireAdmin:t,requiredPermissions:a,allowedRoles:i,autoValidateSession:!0,rateLimitKey:l?.id?`user_${l.id}`:void 0});return j.useEffect(()=>{o&&l&&(re.trackPageView(window.location.pathname,l.id,l.role),d("page_access",{path:window.location.pathname,requireOnboarding:e,requireAdmin:t,requiredPermissions:a,allowedRoles:i}))},[o,l,d,e,t,a,i]),c?s.jsx(xi,{}):!c&&(!o||!l)?(re.trackRedirect(window.location.pathname,"/login","unauthenticated_access",l?.id,l?.role),s.jsx(Re,{to:"/login",replace:!0})):!c&&!h&&l?(re.trackRedirect(window.location.pathname,"/login","invalid_session",l?.id,l?.role),s.jsx(Re,{to:"/login",replace:!0})):!c&&l&&!u?(l&&re.trackRedirect(window.location.pathname,"/app/dashboard","unauthorized_access",l.id,l.role),s.jsx(Re,{to:"/app/dashboard",replace:!0})):e&&!n?(re.trackRedirect(window.location.pathname,"/onboarding/welcome","incomplete_onboarding_protected_route",l?.id,l?.role),s.jsx(Re,{to:"/onboarding/welcome",replace:!0})):s.jsx(s.Fragment,{children:r})},Uc=({onAcceptAll:r,onRejectAll:e,onCustomize:t})=>{const{user:a}=G(),[i,o]=j.useState(!1),[n,l]=j.useState(!1),[c,u]=j.useState(!1);j.useEffect(()=>{d()},[a?.id]);const d=async()=>{if(!a?.id){localStorage.getItem("cookie_consent")||o(!0);return}try{await Y.hasConsent(a.id,"cookies")||o(!0)}catch(y){console.warn("Erro ao verificar consentimento no banco, verificando localStorage:",y);const p=localStorage.getItem("cookie_consent");if(!p)o(!0);else try{const N=JSON.parse(p);(!N.userId||N.userId!==a.id)&&o(!0)}catch(N){console.warn("Erro ao parsear consentimento local:",N),o(!0)}}},h=async()=>{u(!0);try{if(a?.id)try{await Promise.all([Y.recordConsent(a.id,"cookies",!0),Y.recordConsent(a.id,"analytics",!0),Y.recordConsent(a.id,"marketing_emails",!0)])}catch(y){console.warn("Erro ao salvar no banco, usando localStorage:",y),localStorage.setItem("cookie_consent",JSON.stringify({cookies:!0,analytics:!0,marketing:!0,timestamp:new Date().toISOString(),userId:a.id}))}else localStorage.setItem("cookie_consent",JSON.stringify({cookies:!0,analytics:!0,marketing:!0,timestamp:new Date().toISOString()}));o(!1),r?.()}catch(y){console.error("Erro ao aceitar cookies:",y),o(!1)}finally{u(!1)}},b=async()=>{u(!0);try{if(a?.id)try{await Y.recordConsent(a.id,"cookies",!0)}catch(y){console.warn("Erro ao salvar no banco, usando localStorage:",y),localStorage.setItem("cookie_consent",JSON.stringify({cookies:!0,analytics:!1,marketing:!1,timestamp:new Date().toISOString(),userId:a.id}))}else localStorage.setItem("cookie_consent",JSON.stringify({cookies:!0,analytics:!1,marketing:!1,timestamp:new Date().toISOString()}));o(!1),e?.()}catch(y){console.error("Erro ao rejeitar cookies:",y),o(!1)}finally{u(!1)}},g=()=>{l(!n),t?.()},f=()=>{o(!1)};return i?s.jsx(Xe,{children:s.jsx(m.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},className:"fixed bottom-4 right-4 z-50 max-w-sm",children:s.jsxs("div",{className:"bg-deep-navy/90 backdrop-blur-md border border-white/10 rounded-lg shadow-lg",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 pb-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ds,{className:"w-4 h-4 text-bright-gold"}),s.jsx("h3",{className:"text-sm font-medium text-white",children:"Cookies"})]}),s.jsx("button",{onClick:f,className:"text-gray-400 hover:text-white transition-colors",children:s.jsx($t,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"px-4 pb-3",children:[s.jsx("p",{className:"text-gray-300 text-xs leading-relaxed mb-3",children:"Usamos cookies para melhorar sua experiência. Alguns são essenciais para o funcionamento."}),s.jsx(Xe,{children:n&&s.jsx(m.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"mb-3 space-y-2 overflow-hidden",children:[{title:"Essenciais",description:"Funcionamento básico",required:!0,icon:be},{title:"Analytics",description:"Melhorar experiência",required:!1,icon:us},{title:"Marketing",description:"Conteúdo personalizado",required:!1,icon:ds}].map(({title:y,description:p,required:N,icon:w})=>s.jsxs("div",{className:"flex items-center space-x-2 p-2 bg-white/5 rounded",children:[s.jsx(w,{className:"w-3 h-3 text-bright-gold"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("h4",{className:"text-white font-medium text-xs",children:y}),N&&s.jsx("span",{className:"text-xs bg-bright-gold text-deep-navy px-1 py-0.5 rounded text-xs",children:"Obr."})]}),s.jsx("p",{className:"text-gray-400 text-xs",children:p})]}),s.jsx("input",{type:"checkbox",checked:!0,disabled:N,className:"w-3 h-3 text-bright-gold bg-transparent border border-gray-400 rounded"})]},y))})}),s.jsxs("div",{className:"flex items-center space-x-1 mb-3",children:[s.jsx(be,{className:"w-3 h-3 text-bright-gold"}),s.jsxs("span",{className:"text-gray-400 text-xs",children:["Ao continuar, você concorda com nossa"," ",s.jsx("button",{className:"text-bright-gold hover:underline",children:"Política"})," ","e"," ",s.jsx("button",{className:"text-bright-gold hover:underline",children:"Termos"})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 p-4 pt-0 border-t border-white/5",children:[s.jsxs("button",{onClick:g,className:"flex items-center justify-center space-x-1 text-gray-400 hover:text-white transition-colors text-xs",children:[s.jsx(Lt,{className:"w-3 h-3"}),s.jsx("span",{children:n?"Ocultar":"Personalizar"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:b,disabled:c,className:"flex-1 px-3 py-1.5 text-gray-300 hover:text-white border border-gray-600 hover:border-gray-400 rounded text-xs transition-colors disabled:opacity-50",children:"Essenciais"}),s.jsx("button",{onClick:h,disabled:c,className:"flex-1 px-3 py-1.5 bg-bright-gold text-deep-navy font-medium rounded hover:bg-bright-gold/90 transition-colors text-xs disabled:opacity-50 flex items-center justify-center space-x-1",children:c?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-3 h-3 border border-deep-navy/30 border-t-deep-navy rounded-full animate-spin"}),s.jsx("span",{children:"Salvando..."})]}):s.jsx("span",{children:"Aceitar"})})]})]})]})})}):null},qc=()=>{const{login:r}=G(),e=te(),[t,a]=j.useState(!1),[i,o]=j.useState(""),n=async()=>{a(!0),o("");try{await r("admin@example.com","123456"),e("/app/dashboard")}catch(l){console.error("Erro no login demo:",l),o("Erro ao fazer login. Tente novamente.")}finally{a(!1)}};return s.jsxs("div",{className:"w-full mt-4",children:[s.jsx("button",{onClick:n,disabled:t,className:"w-full px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 shadow-lg border border-purple-400/30 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:t?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),s.jsx("span",{children:"Entrando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"👑"}),s.jsx("span",{children:"Entrar como Administrador"})]})}),i&&s.jsx("p",{className:"text-red-400 text-sm mt-2 text-center",children:i})]})},Fc=()=>{const r=te(),{login:e}=G(),[t,a]=j.useState({email:"",password:""}),[i,o]=j.useState(!1),[n,l]=j.useState(!1),[c,u]=j.useState({}),d=g=>{const{name:f,value:y}=g.target;a(p=>({...p,[f]:y})),c[f]&&u(p=>({...p,[f]:""}))},h=()=>{const g={};return t.email?/\S+@\S+\.\S+/.test(t.email)||(g.email="Email inválido"):g.email="Email é obrigatório",t.password?t.password.length<6&&(g.password="Senha deve ter pelo menos 6 caracteres"):g.password="Senha é obrigatória",u(g),Object.keys(g).length===0},b=async g=>{if(g.preventDefault(),!!h()){l(!0);try{await e(t.email,t.password),L.success("Login realizado com sucesso!"),r("/app/dashboard")}catch(f){console.error("Login error:",f);let y="Erro ao fazer login. Tente novamente.";if(f.message?.includes("Invalid login credentials")?y="Email ou senha incorretos. Verifique suas credenciais.":f.message?.includes("Email not confirmed")?y="Email não confirmado. Verifique sua caixa de entrada.":f.message?.includes("Too many requests")?y="Muitas tentativas de login. Tente novamente em alguns minutos.":f.message?.includes("ERR_INTERNET_DISCONNECTED")||f.message?.includes("NetworkError")?y="Problema de conectividade. Usando modo offline com credenciais válidas.":f.message?.includes("Failed to fetch")&&(y="Erro de conexão. Verifique sua internet ou tente o modo demo."),[{email:"admin@example.com",password:"123456"},{email:"rickrapozo@gmail.com",password:"Rick@2290"},{email:"test.rickrapozo@gmail.com",password:"Rick@2290"}].some(w=>w.email===t.email&&w.password===t.password)&&(f.message?.includes("ERR_INTERNET_DISCONNECTED")||f.message?.includes("NetworkError")||f.message?.includes("Failed to fetch"))){L.success("Login realizado em modo offline!"),r("/app/dashboard");return}L.error(y),u({general:y})}finally{l(!1)}}};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(fe,{}),s.jsx(m.h1,{className:"text-white text-2xl font-heading font-bold mt-4 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Bem-vindo de volta!"}),s.jsx(m.p,{className:"text-pearl-white/80 text-body-md",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Continue sua jornada de transformação"})]}),s.jsxs(m.div,{className:"glass-card p-8",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},children:[s.jsxs("form",{onSubmit:b,className:"space-y-6",children:[c.general&&s.jsx(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-error-red/10 border border-error-red/20 rounded-lg p-3",children:s.jsx("p",{className:"text-error-red text-sm",children:c.general})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:"email",name:"email",value:t.email,onChange:d,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${c.email?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"seu@email.com"})]}),c.email&&s.jsx(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-red text-sm",children:c.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:i?"text":"password",name:"password",value:t.password,onChange:d,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${c.password?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 hover:text-white transition-colors",children:i?s.jsx(Mt,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-5 h-5"})})]}),c.password&&s.jsx(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-red text-sm",children:c.password})]}),s.jsx("div",{className:"text-right",children:s.jsx(Oe,{to:"/forgot-password",className:"text-royal-gold hover:text-bright-gold text-sm transition-colors",children:"Esqueceu sua senha?"})}),s.jsx(m.button,{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileTap:{scale:.98},children:n?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Entrar"}),s.jsx(Pe,{className:"w-5 h-5"})]})})]}),s.jsx(qc,{}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-pearl-white/80 text-sm",children:["Não tem uma conta?"," ",s.jsx(Oe,{to:"/register",className:"text-royal-gold hover:text-bright-gold font-medium transition-colors",children:"Cadastre-se"})]})})]}),s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 text-center",children:s.jsx("p",{className:"text-pearl-white/60 text-xs",children:"Demo: admin@example.com / 123456"})})]}),!1]})},zc=()=>{const r=te(),{register:e}=G(),[t,a]=j.useState({name:"",email:"",password:"",confirmPassword:""}),[i,o]=j.useState(!1),[n,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState({}),b=y=>{const{name:p,value:N}=y.target;a(w=>({...w,[p]:N})),d[p]&&h(w=>({...w,[p]:""}))},g=()=>{const y={};return t.name.trim()||(y.name="Nome é obrigatório"),t.email?/\S+@\S+\.\S+/.test(t.email)||(y.email="Email inválido"):y.email="Email é obrigatório",t.password?t.password.length<6&&(y.password="Senha deve ter pelo menos 6 caracteres"):y.password="Senha é obrigatória",t.password!==t.confirmPassword&&(y.confirmPassword="Senhas não coincidem"),h(y),Object.keys(y).length===0},f=async y=>{if(y.preventDefault(),!!g()){u(!0);try{await e(t.email,t.password,t.name),L.success("Conta criada com sucesso! Verifique seu email para confirmar."),r("/onboarding/welcome")}catch(p){console.error("Registration error:",p);let N="Erro ao criar conta. Tente novamente.";p.message?.includes("User already registered")?N="Este email já está cadastrado.":p.message?.includes("Password should be at least 6 characters")&&(N="A senha deve ter pelo menos 6 caracteres."),L.error(N),h({general:N})}finally{u(!1)}}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(fe,{}),s.jsx(m.h1,{className:"text-white text-2xl font-heading font-bold mt-4 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Comece sua transformação"}),s.jsx(m.p,{className:"text-pearl-white/80 text-body-md",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Crie sua conta e desbloqueie seu potencial"})]}),s.jsxs(m.div,{className:"glass-card p-8",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},children:[s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Nome completo"}),s.jsxs("div",{className:"relative",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:"text",name:"name",value:t.name,onChange:b,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${d.name?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"Seu nome completo"})]}),d.name&&s.jsx("p",{className:"text-error-red text-sm",children:d.name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:"email",name:"email",value:t.email,onChange:b,className:`w-full pl-10 pr-4 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${d.email?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"seu@email.com"})]}),d.email&&s.jsx("p",{className:"text-error-red text-sm",children:d.email})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:i?"text":"password",name:"password",value:t.password,onChange:b,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${d.password?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 hover:text-white transition-colors",children:i?s.jsx(Mt,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-5 h-5"})})]}),d.password&&s.jsx("p",{className:"text-error-red text-sm",children:d.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Confirmar senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:n?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:b,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${d.confirmPassword?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 hover:text-white transition-colors",children:n?s.jsx(Mt,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-5 h-5"})})]}),d.confirmPassword&&s.jsx("p",{className:"text-error-red text-sm",children:d.confirmPassword})]}),s.jsx(m.button,{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed mt-6",whileTap:{scale:.98},children:c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx("span",{children:"Criar conta"}),s.jsx(Pe,{className:"w-5 h-5"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs("p",{className:"text-pearl-white/80 text-sm",children:["Já tem uma conta?"," ",s.jsx(Oe,{to:"/login",className:"text-royal-gold hover:text-bright-gold font-medium transition-colors",children:"Faça login"})]})})]})]})})},Bc=()=>{const[r,e]=j.useState(""),[t,a]=j.useState(!1),[i,o]=j.useState(!1),n=async l=>{if(l.preventDefault(),!r||!/\S+@\S+\.\S+/.test(r)){L.error("Por favor, insira um email válido");return}a(!0);try{const{AuthService:c}=await le(()=>Promise.resolve().then(()=>kc),void 0);await c.resetPassword(r),o(!0),L.success("Email de recuperação enviado!")}catch(c){console.error("Erro ao enviar email de recuperação:",c);let u="Erro ao enviar email. Tente novamente.";c.message?.includes("User not found")?u="Email não encontrado em nossa base de dados.":c.message?.includes("Email rate limit exceeded")&&(u="Muitas tentativas. Aguarde alguns minutos antes de tentar novamente."),L.error(u)}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(fe,{}),s.jsx(m.h1,{className:"text-white text-2xl font-heading font-bold mt-4 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:i?"Email enviado!":"Recuperar senha"}),s.jsx(m.p,{className:"text-pearl-white/80 text-body-md",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:i?"Verifique sua caixa de entrada e siga as instruções":"Digite seu email para receber instruções de recuperação"})]}),s.jsxs(m.div,{className:"glass-card p-8",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},children:[i?s.jsxs("div",{className:"text-center space-y-6",children:[s.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},className:"w-16 h-16 mx-auto bg-success-green rounded-full flex items-center justify-center",children:s.jsx(ia,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-white font-medium",children:"Instruções enviadas para:"}),s.jsx("p",{className:"text-royal-gold font-semibold",children:r})]}),s.jsx("p",{className:"text-pearl-white/80 text-sm",children:"Não recebeu o email? Verifique sua pasta de spam ou tente novamente em alguns minutos."})]}):s.jsxs("form",{onSubmit:n,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Email"}),s.jsxs("div",{className:"relative",children:[s.jsx(bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:"email",value:r,onChange:l=>e(l.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-royal-gold transition-all",placeholder:"seu@email.com",required:!0})]})]}),s.jsx(m.button,{type:"submit",disabled:t,className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileTap:{scale:.98},children:t?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(ia,{className:"w-5 h-5"}),s.jsx("span",{children:"Enviar instruções"})]})})]}),s.jsx("div",{className:"mt-6 text-center",children:s.jsxs(Oe,{to:"/login",className:"inline-flex items-center space-x-2 text-royal-gold hover:text-bright-gold font-medium transition-colors",children:[s.jsx(zt,{className:"w-4 h-4"}),s.jsx("span",{children:"Voltar ao login"})]})})]})]})})},Vc=()=>{const r=te(),[e]=Ki(),[t,a]=j.useState({password:"",confirmPassword:""}),[i,o]=j.useState(!1),[n,l]=j.useState(!1),[c,u]=j.useState(!1),[d,h]=j.useState(!1),[b,g]=j.useState({});j.useEffect(()=>{const N=e.get("access_token"),w=e.get("refresh_token");e.get("type")==="recovery"&&N&&w?(h(!0),I.auth.setSession({access_token:N,refresh_token:w})):(L.error("Link de recuperação inválido ou expirado"),r("/forgot-password"))},[e,r]);const f=N=>{const{name:w,value:x}=N.target;a(v=>({...v,[w]:x})),b[w]&&g(v=>({...v,[w]:""}))},y=()=>{const N={};return t.password?t.password.length<6&&(N.password="Senha deve ter pelo menos 6 caracteres"):N.password="Nova senha é obrigatória",t.confirmPassword?t.password!==t.confirmPassword&&(N.confirmPassword="Senhas não coincidem"):N.confirmPassword="Confirmação de senha é obrigatória",g(N),Object.keys(N).length===0},p=async N=>{if(N.preventDefault(),!!y()){u(!0);try{const{error:w}=await I.auth.updateUser({password:t.password});if(w)throw w;L.success("Senha redefinida com sucesso!"),setTimeout(()=>{r("/login")},2e3)}catch(w){console.error("Erro ao redefinir senha:",w);let x="Erro ao redefinir senha. Tente novamente.";w.message?.includes("New password should be different")&&(x="A nova senha deve ser diferente da atual."),L.error(x),g({general:x})}finally{u(!1)}}};return d?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(fe,{}),s.jsx(m.h1,{className:"text-white text-2xl font-heading font-bold mt-4 mb-2",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},children:"Redefinir senha"}),s.jsx(m.p,{className:"text-pearl-white/80 text-body-md",initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},children:"Digite sua nova senha abaixo"})]}),s.jsx(m.div,{className:"glass-card p-8",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.4},children:s.jsxs("form",{onSubmit:p,className:"space-y-6",children:[b.general&&s.jsx(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:"bg-error-red/10 border border-error-red/20 rounded-lg p-3",children:s.jsx("p",{className:"text-error-red text-sm",children:b.general})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Nova senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:i?"text":"password",name:"password",value:t.password,onChange:f,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${b.password?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 hover:text-white transition-colors",children:i?s.jsx(Mt,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-5 h-5"})})]}),b.password&&s.jsx(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-red text-sm",children:b.password})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Confirmar nova senha"}),s.jsxs("div",{className:"relative",children:[s.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:n?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:f,className:`w-full pl-10 pr-12 py-3 bg-white/10 border rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold transition-all ${b.confirmPassword?"border-error-red":"border-white/20 focus:border-royal-gold"}`,placeholder:"••••••••"}),s.jsx("button",{type:"button",onClick:()=>l(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 hover:text-white transition-colors",children:n?s.jsx(Mt,{className:"w-5 h-5"}):s.jsx(Te,{className:"w-5 h-5"})})]}),b.confirmPassword&&s.jsx(m.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-error-red text-sm",children:b.confirmPassword})]}),s.jsx(m.button,{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2 hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",whileTap:{scale:.98},children:c?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsxs(s.Fragment,{children:[s.jsx(he,{className:"w-5 h-5"}),s.jsx("span",{children:"Redefinir senha"})]})})]})})]})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-royal-gold border-t-transparent rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-white",children:"Verificando link de recuperação..."})]})})},Hc=({isOpen:r,onSubmit:e})=>{const[t,a]=j.useState(""),[i,o]=j.useState(!1),n=l=>{l.preventDefault(),t.trim()&&(o(!0),setTimeout(()=>{e(t.trim())},500))};return s.jsx(Xe,{children:r&&s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/30 backdrop-blur-sm z-50 flex flex-col items-center justify-center p-4",children:[s.jsxs(m.div,{initial:{opacity:0,y:-30},animate:{opacity:1,y:0},exit:{opacity:0,y:-30},transition:{delay:.1,type:"spring",stiffness:300,damping:25},className:"text-center mb-8",children:[s.jsxs("h1",{className:"text-3xl md:text-4xl font-heading font-bold text-white mb-2 leading-tight",children:["Diagnóstico da",s.jsx("br",{}),"Mente Bloqueada"]}),s.jsx("div",{className:"w-24 h-1 bg-gradient-to-r from-royal-gold to-bright-gold mx-auto rounded-full"})]}),s.jsxs(m.div,{initial:{scale:.8,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:-20},transition:{delay:.2,type:"spring",stiffness:300,damping:25},className:"relative bg-gradient-to-br from-deep-forest via-forest-green to-sage-green p-8 rounded-2xl shadow-2xl max-w-md w-full border border-royal-gold/20 overflow-hidden",children:[s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[[...Array(20)].map((l,c)=>s.jsx(m.div,{initial:{x:Math.random()*400,y:Math.random()*300,opacity:0},animate:{y:[0,-30,0],x:[0,Math.random()*20-10,0],opacity:[0,.4,0]},transition:{duration:4+Math.random()*3,repeat:1/0,delay:Math.random()*3},className:"absolute w-1 h-1 bg-royal-gold/40 rounded-full"},c)),[...Array(8)].map((l,c)=>s.jsx(m.div,{initial:{x:Math.random()*350,y:Math.random()*250,opacity:0},animate:{y:[0,-40,0],x:[0,Math.random()*30-15,0],opacity:[0,.2,0],scale:[1,1.5,1]},transition:{duration:5+Math.random()*2,repeat:1/0,delay:Math.random()*4},className:"absolute w-2 h-2 bg-royal-gold/20 rounded-full"},`large-${c}`))]}),s.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative z-10 text-center mb-8",children:[s.jsx(m.div,{animate:{rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0,repeatDelay:3},className:"inline-flex items-center justify-center w-16 h-16 bg-royal-gold/20 rounded-full mb-4",children:s.jsx(ye,{className:"w-8 h-8 text-royal-gold"})}),s.jsx("h2",{className:"text-2xl font-heading font-bold text-white mb-2",children:"Olá! Seu teste está prestes a começar ✨"}),s.jsxs("p",{className:"text-pearl-white/80 text-sm leading-relaxed",children:["Antes de iniciarmos sua jornada de transformação,",s.jsx("br",{}),s.jsx("span",{className:"text-royal-gold font-medium",children:"qual é o seu nome?"})]})]}),s.jsxs(m.form,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},onSubmit:n,className:"relative z-10 space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(gt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-royal-gold/60"}),s.jsx("input",{type:"text",value:t,onChange:l=>a(l.target.value),placeholder:"Digite seu nome aqui...",className:"w-full pl-12 pr-4 py-3 bg-white/10 border border-royal-gold/30 rounded-lg text-white placeholder-pearl-white/50 focus:outline-none focus:border-royal-gold focus:ring-2 focus:ring-royal-gold/20 transition-all duration-300",autoFocus:!0,maxLength:50})]}),s.jsx(m.button,{type:"submit",disabled:!t.trim()||i,whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-3 rounded-lg font-semibold transition-all duration-300 ${t.trim()&&!i?"bg-royal-gold text-deep-forest hover:bg-royal-gold/90 shadow-lg hover:shadow-royal-gold/20":"bg-gray-600 text-gray-400 cursor-not-allowed"}`,children:i?s.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"inline-block w-5 h-5 border-2 border-deep-forest/30 border-t-deep-forest rounded-full"}):"Começar minha jornada"})]}),s.jsx(m.div,{animate:{opacity:[.3,.6,.3],scale:[1,1.1,1]},transition:{duration:3,repeat:1/0},className:"absolute -top-2 -right-2 w-4 h-4 bg-royal-gold/40 rounded-full"}),s.jsx(m.div,{animate:{opacity:[.4,.7,.4],scale:[1,1.2,1]},transition:{duration:2.5,repeat:1/0,delay:1},className:"absolute -bottom-1 -left-1 w-3 h-3 bg-royal-gold/30 rounded-full"})]})]})})},$a=r=>!r||typeof r!="string"?r||"":r.trim().split(" ").map(e=>e.length===0?e:e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(" "),at=r=>$a(r).split(" ")[0]||"Transformador",Gc=r=>$a(r)||"Transformador",Jc=()=>{const r=te(),{user:e}=G(),[t,a]=j.useState(!1),[i,o]=j.useState(""),[n,l]=j.useState(!1),c=at(i||e?.name||"");j.useEffect(()=>{const d=localStorage.getItem("userName");d?(o(d),l(!0)):setTimeout(()=>{a(!0)},500)},[]);const u=d=>{const h=$a(d);o(h),localStorage.setItem("userName",h),a(!1),setTimeout(()=>{l(!0)},300)};return s.jsxs(s.Fragment,{children:[s.jsx(Hc,{isOpen:t,onSubmit:u}),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:n?1:0,y:n?0:20},transition:{duration:.8},className:"w-full max-w-lg text-center",children:[s.jsx(m.div,{initial:{scale:0},animate:{scale:n?1:0},transition:{delay:.2,type:"spring",stiffness:300},className:"mb-8",children:s.jsx(fe,{})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:n?1:0,y:n?0:20},transition:{delay:.4},className:"space-y-6 mb-12",children:[s.jsxs("h1",{className:"text-white text-4xl font-heading font-bold",children:[c?`Olá, ${c}!`:"Descubra Seu Potencial"," ✨"]}),s.jsxs("p",{className:"text-pearl-white/90 text-lg leading-relaxed",children:["Você está prestes a descobrir exatamente o que está impedindo seu",s.jsx("span",{className:"text-royal-gold font-semibold",children:" crescimento pessoal "}),"e como transformar sua vida com o método científico dos 5Ps."]})]}),s.jsxs(m.button,{onClick:()=>r("/quiz/welcome"),className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-4 rounded-xl font-semibold text-lg flex items-center justify-center space-x-3 hover:shadow-2xl transition-all mb-6 shadow-lg",whileHover:{scale:1.02},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:n?1:0,y:n?0:20},transition:{delay:.6},children:[s.jsx("span",{children:"FAZER MEU DIAGNÓSTICO GRATUITO"}),s.jsx(Pe,{className:"w-6 h-6"})]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:n?1:0,y:n?0:20},transition:{delay:.7},className:"mb-8",children:s.jsx("div",{className:"bg-royal-gold/20 border border-royal-gold/30 rounded-lg p-4",children:s.jsx("p",{className:"text-royal-gold font-semibold text-sm",children:"🎯 DIAGNÓSTICO GRATUITO • Mais de 10.000 pessoas já transformaram suas vidas"})})}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:n?1:0,y:n?0:20},transition:{delay:.6},className:"glass-card p-8 mb-8",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(ye,{className:"w-6 h-6 text-royal-gold"}),s.jsx("h3",{className:"text-white font-heading font-semibold text-lg",children:"O que você vai descobrir:"})]}),s.jsx("div",{className:"grid gap-4 text-left",children:["Descubra exatamente o que bloqueia seu crescimento","Identifique seus pontos fortes e fracos reais","Receba um plano de ação personalizado e científico","Acesse estratégias que realmente funcionam"].map((d,h)=>s.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:n?1:0,x:n?0:-20},transition:{delay:.8+h*.1},className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-royal-gold rounded-full"}),s.jsx("p",{className:"text-pearl-white/90 text-body-md",children:d})]},h))})]})}),s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:n?1:0},transition:{delay:1.4},className:"text-center mt-6 space-y-2",children:[s.jsx("p",{className:"text-pearl-white/90 text-sm font-semibold",children:"⏱️ Apenas 5 minutos • 100% Gratuito • Resultados Imediatos"}),s.jsx("p",{className:"text-pearl-white/60 text-xs",children:"Mais de 10.000 pessoas já descobriram seus bloqueios e transformaram suas vidas"})]})]})})]})},Wc=()=>{const r=te();return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 max-w-md text-center",children:[s.jsx("h2",{className:"text-white text-2xl font-heading font-bold mb-4",children:"Seus Resultados"}),s.jsx("p",{className:"text-pearl-white/80 text-body-md mb-6",children:"Análise dos resultados será implementada em breve"}),s.jsxs(m.button,{onClick:()=>r("/onboarding/commitment"),className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2",whileTap:{scale:.98},children:[s.jsx("span",{children:"Ver compromisso"}),s.jsx(Pe,{className:"w-5 h-5"})]})]})})},Kc=()=>{const r=te(),{completeOnboarding:e}=G(),t=()=>{const a={thought:75,feeling:60,emotion:80,action:55,result:70,completedAt:new Date().toISOString()};e(a),r("/app/dashboard")};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 max-w-md text-center",children:[s.jsx("h2",{className:"text-white text-2xl font-heading font-bold mb-4",children:"Seu Compromisso"}),s.jsx("p",{className:"text-pearl-white/80 text-body-md mb-6",children:"Comprometa-se com sua transformação pessoal"}),s.jsxs(m.button,{onClick:t,className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold flex items-center justify-center space-x-2",whileTap:{scale:.98},children:[s.jsx("span",{children:"Aceitar compromisso"}),s.jsx(Pe,{className:"w-5 h-5"})]})]})})};function Qc(){const r=te(),[e,t]=j.useState("");j.useEffect(()=>{const o=localStorage.getItem("userName");o&&t(o)},[]);const a=at(e),i="01".split("");return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-deep-forest relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:Array.from({length:20}).map((o,n)=>s.jsx(m.div,{className:"absolute text-royal-gold font-mono text-xs",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-20,0],opacity:[.3,.8,.3]},transition:{duration:2+Math.random()*2,repeat:1/0,delay:Math.random()*2},children:i[Math.floor(Math.random()*i.length)]},n))}),s.jsx("div",{className:"absolute inset-0 opacity-20",children:s.jsxs("svg",{className:"w-full h-full",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"neuralGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#D4AF37",stopOpacity:"0.3"}),s.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.1"})]})}),Array.from({length:8}).map((o,n)=>s.jsx(m.line,{x1:`${Math.random()*100}%`,y1:`${Math.random()*100}%`,x2:`${Math.random()*100}%`,y2:`${Math.random()*100}%`,stroke:"url(#neuralGradient)",strokeWidth:"1",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.6},transition:{duration:3,delay:n*.2,repeat:1/0,repeatType:"reverse"}},n))]})}),s.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"max-w-4xl w-full text-center space-y-8",children:[s.jsx(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.2,duration:.6},className:"mb-12",children:s.jsx(fe,{})}),s.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},className:"space-y-6",children:[s.jsxs("h1",{className:"text-5xl md:text-7xl font-heading font-bold text-pearl-white leading-tight",children:["Raio-X da",s.jsx("span",{className:"block text-6xl md:text-8xl text-transparent bg-clip-text bg-gradient-to-r from-royal-gold via-bright-gold to-royal-gold animate-pulse",children:"Mente"})]}),s.jsx(m.h2,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.6},className:"text-2xl md:text-3xl font-heading font-semibold text-royal-gold mb-8",children:"Descubra o Que Realmente Te Impede de Prosperar"})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1,duration:.6},className:"max-w-3xl mx-auto space-y-6",children:[s.jsxs("p",{className:"text-xl text-pearl-white/90 leading-relaxed",children:[a?`${a}, você`:"Você"," sente que está andando em círculos? Que uma força invisível te sabota bem na hora de alcançar seus maiores sonhos?",s.jsxs("span",{className:"text-royal-gold font-semibold",children:[" A resposta não está fora",a?`, ${a}`:"",". Está na sua programação."]})]}),s.jsx("div",{className:"bg-forest-green/20 backdrop-blur-sm rounded-2xl p-8 border border-royal-gold/30",children:s.jsxs("p",{className:"text-lg text-pearl-white/80 leading-relaxed",children:["As ",s.jsx("span",{className:"text-royal-gold font-bold",children:"10 perguntas"})," a seguir não são um teste de personalidade. São engrenagens cruciais para um ",s.jsx("span",{className:"text-bright-gold font-semibold",children:"diagnóstico preciso"}),", um mapa que revela as fissuras no seu sistema operacional interno."]})}),s.jsxs("div",{className:"bg-gradient-to-r from-sage-green/20 to-forest-green/20 backdrop-blur-sm rounded-2xl p-6 border border-bright-gold/30",children:[s.jsx("p",{className:"text-lg text-bright-gold font-semibold mb-2",children:"✨ Mais de 10.000 pessoas já descobriram seus padrões limitantes"}),s.jsx("p",{className:"text-pearl-white/80 text-sm",children:'"Finalmente entendi por que sempre sabotava meu sucesso. Este diagnóstico mudou minha vida!" - Maria S.'})]})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2,duration:.6},className:"bg-gradient-to-r from-royal-gold/10 to-bright-gold/10 backdrop-blur-sm rounded-2xl p-8 border border-royal-gold/40",children:[s.jsxs("div",{className:"flex items-center justify-center mb-6",children:[s.jsx(ve,{className:"w-8 h-8 text-royal-gold mr-3"}),s.jsx("h3",{className:"text-2xl font-heading font-bold text-pearl-white",children:"Método 5Ps"})]}),s.jsxs("p",{className:"text-lg text-pearl-white/90 leading-relaxed",children:["Baseado em neurociência o ",s.jsx("span",{className:"text-royal-gold font-semibold",children:"Método 5Ps"})," (Pensamento, Sentimento, Emoção, Ação e Resultado), este raio-x irá identificar com ",s.jsx("span",{className:"text-bright-gold font-semibold",children:"precisão cirúrgica"})," qual dos seus 5 pilares está desalinhado, mantendo você preso na escassez e na frustração de tentar tanto e nunca chegar a sua vez de ter sucesso na vida."]})]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.6},className:"grid md:grid-cols-3 gap-6 my-12",children:[{icon:Te,title:"Diagnóstico Preciso",description:"Identificação exata do seu padrão limitante"},{icon:je,title:"Análise dos 5Ps",description:"Mapeamento completo dos seus pilares internos"},{icon:de,title:"Solução Personalizada",description:"Plano específico para sua reprogramação"}].map((o,n)=>s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.6+n*.1},className:"bg-forest-green/20 backdrop-blur-sm rounded-xl p-6 border border-royal-gold/20 hover:border-royal-gold/40 transition-all duration-300 group",whileHover:{scale:1.05,y:-5},children:[s.jsx(o.icon,{className:"w-10 h-10 text-royal-gold mx-auto mb-4 group-hover:text-bright-gold transition-colors"}),s.jsx("h4",{className:"text-pearl-white font-semibold mb-2 text-lg",children:o.title}),s.jsx("p",{className:"text-pearl-white/70 text-sm leading-relaxed",children:o.description})]},n))}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.8,duration:.6},className:"space-y-6",children:[s.jsxs("p",{className:"text-lg text-pearl-white/80 max-w-2xl mx-auto leading-relaxed",children:["Para começar sua jornada de libertação",a?`, ${a}`:"",", a ",s.jsx("span",{className:"text-royal-gold font-semibold",children:"honestidade é a única chave"}),". Não existem respostas certas ou erradas, apenas a sua verdade."]}),s.jsxs("div",{className:"bg-gradient-to-r from-red-900/20 to-orange-900/20 backdrop-blur-sm rounded-xl p-4 border border-orange-500/40 max-w-md mx-auto",children:[s.jsx("p",{className:"text-orange-300 font-semibold text-sm",children:"⚡ DIAGNÓSTICO GRATUITO POR TEMPO LIMITADO"}),s.jsx("p",{className:"text-pearl-white/80 text-xs mt-1",children:"Normalmente R$ 97 - Hoje 100% GRÁTIS"})]}),s.jsxs("p",{className:"text-xl font-semibold text-bright-gold",children:[a?`${a}, está`:"Está"," pronto(a) para olhar no espelho e descobrir o código que rege a sua vida até hoje?"]}),s.jsxs(m.button,{onClick:()=>r("/quiz/questions"),className:"group relative overflow-hidden bg-gradient-to-r from-royal-gold to-bright-gold text-white py-6 px-12 rounded-2xl font-bold text-xl flex items-center justify-center space-x-4 hover:shadow-2xl transition-all duration-300 mx-auto",whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(212, 175, 55, 0.3)"},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:2,duration:.6},children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-bright-gold to-royal-gold opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s.jsx("span",{className:"relative z-10",children:"INICIAR MEU DIAGNÓSTICO"}),s.jsx(Pe,{className:"w-7 h-7 relative z-10 group-hover:translate-x-1 transition-transform"})]})]}),s.jsx(m.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2.2,duration:.6},className:"text-pearl-white/60 text-sm mt-8 italic",children:"Este processo levará apenas 5 minutos e mudará sua vida para sempre."})]})})]})}const Xc=r=>[{id:1,category:"Pensamento / Crenças Limitantes",categoryIcon:ve,question:`${r}, quando você pensa em alcançar um grande objetivo (como dobrar sua renda, encontrar o amor da sua vida ou transformar sua saúde), qual é o primeiro pensamento que vem à sua mente?`,options:["'Isso é possível, eu só preciso descobrir como'","'Seria incrível, mas provavelmente é muito difícil para mim'","'Outras pessoas conseguem, mas eu não tenho sorte/talento/recursos'","'Eu sempre saboto tudo quando estou quase chegando lá'"]},{id:2,category:"Pensamento / Autoimagem",categoryIcon:ve,question:"Complete a frase: 'Eu sou o tipo de pessoa que...'",options:["'...sempre encontra uma forma de vencer, mesmo quando tudo parece impossível'","'...tem potencial, mas precisa de mais tempo/conhecimento/sorte'","'...tenta muito, mas as coisas nunca saem como eu planejo'","'...não nasceu para grandes coisas, mas faz o que pode'"]},{id:3,category:"Sentimento / Relação com o Dinheiro",categoryIcon:Ze,question:`${r}, quando você vê alguém muito bem-sucedido financeiramente, o que você sente?`,options:["Inspiração e curiosidade: 'Que estratégias essa pessoa usou?'","Admiração com um toque de inveja: 'Gostaria de ter essa sorte'","Desconfiança: 'Deve ter feito algo errado ou nasceu em berço de ouro'","Resignação: 'Algumas pessoas nasceram para isso, eu não'"]},{id:4,category:"Sentimento / Merecimento",categoryIcon:Ze,question:"Imagine que você acabou de receber uma proposta incrível (um trabalho dos sonhos, um relacionamento perfeito, uma oportunidade única). Qual é sua reação emocional imediata?",options:["Gratidão e empolgação: 'Finalmente! Eu trabalhei para isso'","Surpresa e um pouco de ansiedade: 'Será que eu mereço isso?'","Desconfiança: 'Deve ter alguma pegadinha'","Pânico: 'Eu vou estragar tudo, como sempre'"]},{id:5,category:"Emoção / Medo do Sucesso",categoryIcon:de,question:"Você está a um passo de alcançar algo que sempre quis. De repente, sente um frio na barriga. O que esse medo está tentando te dizer?",options:["'É normal estar nervoso, mas eu vou em frente mesmo assim'","'E se eu conseguir e não souber lidar com o sucesso?'","'E se as pessoas descobrirem que eu sou uma fraude?'","'Melhor não arriscar, pelo menos aqui eu estou seguro'"]},{id:6,category:"Emoção / Gestão da Frustração",categoryIcon:de,question:"Você tentou algo importante e não deu certo. Como você lida com essa frustração?",options:["Analiso o que aprendi e ajusto a estratégia para a próxima tentativa","Fico chateado por um tempo, mas eventualmente tento de novo","Sinto que desperdicei tempo e energia, fico desmotivado por semanas","Uso isso como prova de que eu estava certo: 'Eu sabia que não ia dar certo'"]},{id:7,category:"Ação / Procrastinação",categoryIcon:je,question:"Você tem uma tarefa importante que pode mudar sua vida, mas continua adiando. Qual é a verdadeira razão?",options:["Estou organizando tudo para fazer da melhor forma possível","Tenho medo de não fazer perfeito e decepcionar as pessoas","No fundo, não acredito que vai dar certo mesmo","Se eu não tentar, não posso falhar"]},{id:8,category:"Ação / Consistência",categoryIcon:je,question:"Você começou uma nova rotina/hábito/projeto que pode transformar sua vida. Depois de algumas semanas, o que acontece?",options:["Mantenho a disciplina porque sei que os resultados vêm com o tempo","Continuo, mas com menos intensidade quando não vejo resultados rápidos","Desisto quando surge a primeira dificuldade ou imprevisto","Saboto inconscientemente: 'esqueço', arranjo desculpas, perco o foco"]},{id:9,category:"Resultado / Relação com o Fracasso",categoryIcon:qe,question:"Para você, o fracasso é:",options:["Informação valiosa que me aproxima do sucesso","Algo ruim, mas que faz parte da vida","A confirmação de que eu não sou bom o suficiente","A prova de que eu nunca deveria ter tentado"]},{id:10,category:"Resultado / Cocriação da Realidade",categoryIcon:qe,question:`${r}, olhando para sua vida hoje, você acredita que:`,options:["Eu sou o principal responsável pelos meus resultados e posso mudá-los","Eu tenho algum controle, mas muita coisa depende de fatores externos","Eu faço minha parte, mas parece que o universo conspira contra mim","Minha vida é resultado do destino/sorte/circunstâncias que não posso controlar"]}];function Yc(){const r=te(),[e,t]=j.useState(0),[a,i]=j.useState([]),[o,n]=j.useState(null),[l,c]=j.useState(300),[u,d]=j.useState(!1),[h,b]=j.useState("");j.useEffect(()=>{const T=localStorage.getItem("userName");T&&b(T)},[]);const g=at(h),f=Xc(g);j.useEffect(()=>{if(l>0){const T=setTimeout(()=>c(l-1),1e3);return()=>clearTimeout(T)}},[l]);const y=T=>{const P=Math.floor(T/60),R=T%60;return`${P}:${R.toString().padStart(2,"0")}`},p=T=>{n(T)},N=()=>{o!==null&&(d(!0),setTimeout(()=>{const T=[...a];T[e]=o,i(T),e<f.length-1?(t(e+1),n(null)):(localStorage.setItem("quizAnswers",JSON.stringify(T)),r("/quiz/analysis")),d(!1)},300))},w=()=>{e>0&&(d(!0),setTimeout(()=>{t(e-1),n(a[e-1]??null),d(!1)},300))},x=(e+1)/f.length*100,v=f[e],k=v.categoryIcon;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-deep-forest relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:Array.from({length:15}).map((T,P)=>s.jsx(m.div,{className:"absolute text-royal-gold font-mono text-xs",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-30,0],opacity:[.2,.6,.2]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*3},children:Math.random()>.5?"1":"0"},P))}),s.jsxs("div",{className:"relative z-10 min-h-screen flex flex-col",children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-between",children:[s.jsx(fe,{}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("div",{className:"flex items-center space-x-2 bg-forest-green/30 backdrop-blur-sm rounded-xl px-4 py-2 border border-royal-gold/30",children:[s.jsx(Ke,{className:"w-5 h-5 text-royal-gold"}),s.jsx("span",{className:"text-pearl-white font-mono text-lg",children:y(l)})]})})]})}),s.jsx("div",{className:"px-6 mb-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("span",{className:"text-pearl-white/80 text-sm font-medium",children:["Pergunta ",e+1," de ",f.length]}),s.jsxs("span",{className:"text-royal-gold text-sm font-medium",children:[Math.round(x),"% completo"]})]}),s.jsx("div",{className:"w-full bg-forest-green/30 rounded-full h-3 overflow-hidden border border-royal-gold/20",children:s.jsx(m.div,{className:"h-full bg-gradient-to-r from-royal-gold to-bright-gold rounded-full",initial:{width:0},animate:{width:`${x}%`},transition:{duration:.5,ease:"easeOut"}})})]})}),s.jsx("div",{className:"flex-1 flex items-center justify-center px-6 pb-6",children:s.jsx("div",{className:"max-w-4xl w-full",children:s.jsx(Xe,{mode:"wait",children:s.jsxs(m.div,{initial:{opacity:0,x:u?50:0,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:-50,scale:.95},transition:{duration:.3,ease:"easeInOut"},className:"space-y-8",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"inline-flex items-center space-x-3 bg-gradient-to-r from-royal-gold/20 to-bright-gold/20 backdrop-blur-sm rounded-2xl px-6 py-3 border border-royal-gold/40 mb-6",children:[s.jsx(k,{className:"w-6 h-6 text-royal-gold"}),s.jsx("span",{className:"text-royal-gold font-semibold text-lg",children:v.category})]})}),s.jsxs("div",{className:"text-center mb-12",children:[s.jsxs("p",{className:"text-lg text-pearl-white/80 mb-8 max-w-2xl mx-auto leading-relaxed",children:[g,", cada pergunta foi cuidadosamente elaborada para revelar os padrões ocultos que moldam sua realidade.",s.jsx("span",{className:"text-royal-gold font-semibold",children:"Seja honesto(a) consigo mesmo(a)"})," - sua transformação depende disso."]}),s.jsx("h2",{className:"text-2xl md:text-3xl font-heading font-bold text-pearl-white leading-relaxed max-w-3xl mx-auto",children:v.question})]}),s.jsx("div",{className:"space-y-4 max-w-3xl mx-auto",children:v.options.map((T,P)=>s.jsx(m.button,{onClick:()=>p(P),className:`w-full text-left p-6 rounded-2xl border-2 transition-all duration-300 group ${o===P?"bg-gradient-to-r from-royal-gold/20 to-bright-gold/20 border-royal-gold text-pearl-white shadow-lg shadow-royal-gold/20":"bg-forest-green/20 backdrop-blur-sm border-royal-gold/30 text-pearl-white/90 hover:border-royal-gold/60 hover:bg-royal-gold/10"}`,whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:P*.1},children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center mt-1 transition-all duration-300 ${o===P?"border-royal-gold bg-royal-gold":"border-royal-gold/50 group-hover:border-royal-gold"}`,children:o===P&&s.jsx(m.div,{initial:{scale:0},animate:{scale:1},className:"w-2 h-2 bg-white rounded-full"})}),s.jsx("span",{className:"text-lg leading-relaxed flex-1",children:T})]})},P))}),s.jsxs("div",{className:"flex items-center justify-between max-w-3xl mx-auto pt-8",children:[s.jsxs(m.button,{onClick:w,disabled:e===0,className:`flex items-center space-x-2 px-6 py-3 rounded-xl font-semibold transition-all duration-300 ${e===0?"text-pearl-white/40 cursor-not-allowed":"text-pearl-white hover:text-royal-gold bg-forest-green/30 hover:bg-royal-gold/20 border border-royal-gold/30 hover:border-royal-gold/60"}`,whileHover:e>0?{scale:1.05}:{},whileTap:e>0?{scale:.95}:{},children:[s.jsx(zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Anterior"})]}),s.jsxs(m.button,{onClick:N,disabled:o===null,className:`flex items-center space-x-2 px-8 py-4 rounded-xl font-bold text-lg transition-all duration-300 ${o===null?"bg-gray-600 text-gray-400 cursor-not-allowed":"bg-gradient-to-r from-royal-gold to-bright-gold text-white hover:shadow-lg hover:shadow-royal-gold/30"}`,whileHover:o!==null?{scale:1.05}:{},whileTap:o!==null?{scale:.95}:{},children:[s.jsx("span",{children:e===f.length-1?"FINALIZAR":"PRÓXIMA"}),s.jsx(Pe,{className:"w-5 h-5"})]})]})]},e)})})})]})]})}function Zc(){const r=te(),[e,t]=j.useState(0),[a,i]=j.useState(0),[o,n]=j.useState(!1),[l,c]=j.useState("");j.useEffect(()=>{const g=localStorage.getItem("userName");g&&c(g)},[]);const u=at(l),d=()=>{r("/quiz/results")},h=[{icon:ve,title:"Analisando Padrões de Pensamento",description:"Identificando crenças limitantes e autoimagem",duration:2e3},{icon:Te,title:"Mapeando Sentimentos Profundos",description:"Avaliando relação com dinheiro e merecimento",duration:2e3},{icon:de,title:"Processando Padrões Emocionais",description:"Analisando medos e gestão da frustração",duration:2e3},{icon:je,title:"Decodificando Ações e Comportamentos",description:"Examinando procrastinação e consistência",duration:2e3},{icon:Ha,title:"Compilando Diagnóstico Final",description:"Gerando seu perfil personalizado dos 5Ps",duration:3e3}];j.useEffect(()=>{let g,f;return(()=>{if(a<h.length){const p=h[a],N=100/(p.duration/50);let w=0;f=setInterval(()=>{w+=N,w>=100&&(w=100,clearInterval(f)),t(w)},50),g=setTimeout(()=>{a<h.length-1?(i(a+1),t(0)):n(!0)},p.duration)}})(),()=>{clearTimeout(g),clearInterval(f)}},[a,r]);const b=h[a]?.icon||Ha;return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-deep-forest relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-10",children:Array.from({length:30}).map((g,f)=>s.jsx(m.div,{className:"absolute text-royal-gold font-mono text-xs",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-40,0],opacity:[.3,1,.3]},transition:{duration:1.5+Math.random()*1,repeat:1/0,delay:Math.random()*2},children:Math.random()>.5?"1":"0"},f))}),s.jsx("div",{className:"absolute inset-0 opacity-20",children:s.jsxs("svg",{className:"w-full h-full",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"neuralGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",stopColor:"#D4AF37",stopOpacity:"0.6"}),s.jsx("stop",{offset:"100%",stopColor:"#FFD700",stopOpacity:"0.2"})]})}),Array.from({length:12}).map((g,f)=>s.jsx(m.line,{x1:`${Math.random()*100}%`,y1:`${Math.random()*100}%`,x2:`${Math.random()*100}%`,y2:`${Math.random()*100}%`,stroke:"url(#neuralGradient)",strokeWidth:"2",initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:.8},transition:{duration:2,delay:f*.1,repeat:1/0,repeatType:"reverse"}},f))]})}),s.jsx("div",{className:"relative z-10 flex items-center justify-center min-h-screen p-4",children:s.jsxs(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8},className:"max-w-4xl w-full text-center space-y-12",children:[s.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2,duration:.6},children:s.jsx(fe,{})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4,duration:.8},className:"space-y-6",children:[s.jsxs("h1",{className:"text-4xl md:text-6xl font-heading font-bold text-pearl-white leading-tight",children:["Processando Seu",s.jsxs("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-royal-gold via-bright-gold to-royal-gold animate-pulse",children:["Diagnóstico, ",u]})]}),s.jsxs("p",{className:"text-xl text-pearl-white/80 max-w-2xl mx-auto leading-relaxed",children:[u,", nossa IA está analisando suas respostas com precisão cirúrgica..."]})]}),s.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6,duration:.8},className:"bg-gradient-to-r from-forest-green/20 to-royal-gold/10 backdrop-blur-sm rounded-3xl p-12 border border-royal-gold/30 space-y-8",children:[s.jsx(m.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{duration:.6,ease:"easeOut"},className:"flex justify-center mb-8",children:s.jsxs("div",{className:"relative",children:[s.jsx(m.div,{animate:o?{rotate:0}:{rotate:360},transition:o?{duration:.5}:{duration:2,repeat:1/0,ease:"linear"},className:`absolute inset-0 rounded-full border-4 ${o?"border-green-500 bg-green-500/10":"border-royal-gold/30 border-t-royal-gold"}`,style:{width:"120px",height:"120px"}}),s.jsx("div",{className:`w-28 h-28 bg-gradient-to-br rounded-full flex items-center justify-center border-2 ${o?"from-green-500/20 to-green-400/20 border-green-500/50":"from-royal-gold/20 to-bright-gold/20 border-royal-gold/50"}`,children:o?s.jsx(Z,{className:"w-12 h-12 text-green-500"}):s.jsx(b,{className:"w-12 h-12 text-royal-gold"})})]})},a),o?s.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.6},className:"space-y-4",children:[s.jsxs("h3",{className:"text-3xl font-heading font-bold text-bright-gold",children:[u,", Diagnóstico Completo!"]}),s.jsxs("p",{className:"text-lg text-pearl-white/80",children:["Preparando seus resultados personalizados, ",u,"..."]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"mt-6",children:s.jsxs("div",{className:"relative w-full max-w-2xl mx-auto",children:[s.jsx("div",{className:"aspect-video bg-deep-navy/50 rounded-xl border border-royal-gold/20 overflow-hidden shadow-lg",children:s.jsxs("video",{className:"w-full h-full object-cover",controls:!0,poster:"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 225'%3E%3Crect width='400' height='225' fill='%23001122'/%3E%3Ctext x='200' y='112.5' text-anchor='middle' fill='%23D4AF37' font-size='16' font-family='Arial'%3EVídeo será carregado aqui%3C/text%3E%3C/svg%3E",children:[s.jsx("source",{src:"",type:"video/mp4"}),"Seu navegador não suporta o elemento de vídeo."]})}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-deep-navy/20 to-transparent rounded-xl pointer-events-none"})]})})]}):s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-4",children:[s.jsx("h3",{className:"text-2xl font-heading font-bold text-pearl-white",children:h[a]?.title}),s.jsx("p",{className:"text-lg text-pearl-white/70",children:h[a]?.description})]},a),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-pearl-white/60",children:["Etapa ",a+1," de ",h.length]}),s.jsxs("span",{className:"text-royal-gold font-mono",children:[Math.round(e),"%"]})]}),s.jsx("div",{className:"w-full bg-forest-green/30 rounded-full h-4 overflow-hidden border border-royal-gold/20",children:s.jsx(m.div,{className:"h-full bg-gradient-to-r from-royal-gold to-bright-gold rounded-full relative overflow-hidden",style:{width:`${e}%`},transition:{duration:.1},children:s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,repeat:1/0,ease:"easeInOut"}})})})]}),s.jsx("div",{className:"grid grid-cols-5 gap-4 mt-8",children:h.map((g,f)=>{const y=g.icon,p=f===a,N=f<a||o;return s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8+f*.1},className:`text-center p-4 rounded-xl transition-all duration-300 ${p?"bg-royal-gold/20 border-2 border-royal-gold scale-105":N?"bg-bright-gold/10 border border-bright-gold/50":"bg-forest-green/20 border border-royal-gold/20"}`,children:[s.jsx(y,{className:`w-6 h-6 mx-auto mb-2 ${p?"text-royal-gold":N?"text-bright-gold":"text-pearl-white/40"}`}),s.jsx("div",{className:`text-xs font-medium ${p?"text-pearl-white":N?"text-bright-gold/80":"text-pearl-white/40"}`,children:g.title.split(" ")[0]})]},f)})})]}),s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:.6},className:"flex items-center justify-center space-x-3",children:[o?s.jsx(Z,{className:"w-5 h-5 text-green-500"}):s.jsx(ao,{className:"w-5 h-5 text-royal-gold animate-spin"}),s.jsx("span",{className:"text-pearl-white/60 text-sm italic",children:o?"Análise concluída! Clique no botão abaixo para ver seus resultados.":"Aguarde enquanto processamos seus dados..."})]}),o&&s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},className:"flex justify-center mt-8",children:s.jsxs("button",{onClick:d,className:"group relative px-8 py-4 bg-gradient-to-r from-royal-gold to-amber-500 text-deep-navy font-semibold rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center space-x-3",children:[s.jsx("span",{children:"Ver Meus Resultados"}),s.jsx(Pe,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform duration-300"})]})}),s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1.2,duration:.8},className:"text-center space-y-2",children:s.jsxs("div",{className:"font-mono text-xs text-royal-gold/60 space-y-1",children:[s.jsx(m.div,{animate:{opacity:[.3,1,.3]},transition:{duration:2,repeat:1/0},children:"[PENSAMENTO] Padrões identificados... ✓"}),s.jsx(m.div,{animate:{opacity:[.3,1,.3]},transition:{duration:2,repeat:1/0,delay:.5},children:"[SENTIMENTO] Bloqueios mapeados... ✓"}),s.jsx(m.div,{animate:{opacity:[.3,1,.3]},transition:{duration:2,repeat:1/0,delay:1},children:"[EMOÇÃO] Triggers analisados... ✓"}),s.jsx(m.div,{animate:{opacity:[.3,1,.3]},transition:{duration:2,repeat:1/0,delay:1.5},children:"[AÇÃO] Comportamentos decodificados... ✓"})]})})]})})]})}function ed(){const r=te(),[,e]=j.useState({}),[t,a]=j.useState([]),[i,o]=j.useState(null),[n,l]=j.useState(!0),[c,u]=j.useState(""),[d,h]=j.useState(""),[b,g]=j.useState(!1),[f,y]=j.useState(!1);j.useEffect(()=>{const C=localStorage.getItem("userName");C&&u(C)},[]);const p=at(c),N=Gc(c),w=async()=>{if(!d.trim()){alert("Por favor, insira seu email para receber o relatório.");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)){alert("Por favor, insira um email válido.");return}y(!0);try{localStorage.setItem("userEmail",d),await new Promise(C=>setTimeout(C,2e3)),g(!0),y(!1),x()}catch(C){console.error("Erro ao enviar email:",C),alert("Erro ao enviar email. Tente novamente."),y(!1)}},x=()=>{le(()=>import("./pdf-eb8c75c2.js").then(C=>C.j),[]).then(({jsPDF:C})=>{const S=new C;S.setProperties({title:"Relatório de Diagnóstico Pessoal - Fator Essencial",subject:"Diagnóstico Pessoal",author:"Fator Essencial",creator:"Fator Essencial Platform"});const E={deepForest:[15,32,39],forestGreen:[26,61,58],sageGreen:[45,90,84],royalGold:[212,175,55],brightGold:[255,215,0],pearlWhite:[254,254,254],lightGray:[248,249,250]};let A=30;const F=S.internal.pageSize.width,q=S.internal.pageSize.height,O=25,H=F-O*2,W=(J=20)=>A+J>q-40?(S.addPage(),A=30,!0):!1,se=()=>{S.setFillColor(E.deepForest[0],E.deepForest[1],E.deepForest[2]),S.rect(0,0,F,25,"F"),S.setTextColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.setFontSize(10),S.setFont("helvetica","bold"),S.text("FATOR ESSENCIAL",O,15),S.setTextColor(E.pearlWhite[0],E.pearlWhite[1],E.pearlWhite[2]),S.setFontSize(8),S.text(new Date().toLocaleDateString("pt-BR"),F-O,15,{align:"right"})},ce=(J,De,Ce=!1)=>{W(Ce?40:25),Ce?(S.setFillColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.rect(O-5,A-5,H+10,20,"F"),S.setTextColor(255,255,255),S.setFontSize(16),S.setFont("helvetica","bold"),S.text(J,O,A+8),A+=25):(S.setDrawColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.setLineWidth(2),S.line(O,A,O+30,A),S.setTextColor(E.deepForest[0],E.deepForest[1],E.deepForest[2]),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(J,O,A+12),A+=20),De&&(S.setTextColor(E.forestGreen[0],E.forestGreen[1],E.forestGreen[2]),S.setFontSize(11),S.setFont("helvetica","normal"),S.splitTextToSize(De,H-10).forEach(Wt=>{W(),S.text(Wt,O+5,A),A+=6}),A+=8)},$s=(J,De)=>{W(50),S.setFillColor(E.lightGray[0],E.lightGray[1],E.lightGray[2]),S.rect(O,A-5,H,45,"F");const Ce=J.score>=8?E.sageGreen:J.score>=6?E.royalGold:E.forestGreen;S.setFillColor(Ce[0],Ce[1],Ce[2]),S.rect(O,A-5,4,45,"F"),S.setFillColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.circle(O+15,A+8,8,"F"),S.setTextColor(255,255,255),S.setFontSize(12),S.setFont("helvetica","bold"),S.text((De+1).toString(),O+15,A+12,{align:"center"}),S.setTextColor(E.deepForest[0],E.deepForest[1],E.deepForest[2]),S.setFontSize(13),S.setFont("helvetica","bold"),S.text(J.pillar.toUpperCase(),O+30,A+5),S.setTextColor(Ce[0],Ce[1],Ce[2]),S.setFontSize(11),S.setFont("helvetica","bold"),S.text(`${J.score}/10 - ${J.status.toUpperCase()}`,O+30,A+15),S.setTextColor(E.forestGreen[0],E.forestGreen[1],E.forestGreen[2]),S.setFontSize(9),S.setFont("helvetica","normal");const Va=S.splitTextToSize(J.description,H-40);let Wt=A+25;Va.slice(0,2).forEach(zi=>{S.text(zi,O+30,Wt),Wt+=5}),A+=55};se(),A=40,S.setFillColor(E.deepForest[0],E.deepForest[1],E.deepForest[2]),S.rect(0,A-10,F,35,"F"),S.setTextColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.setFontSize(20),S.setFont("helvetica","bold"),S.text("RELATÓRIO DE DIAGNÓSTICO PESSOAL",F/2,A+5,{align:"center"}),S.setTextColor(E.pearlWhite[0],E.pearlWhite[1],E.pearlWhite[2]),S.setFontSize(14),S.text("Plataforma Fator Essencial",F/2,A+18,{align:"center"}),A+=45,S.setFillColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.rect(O,A,H,25,"F"),S.setTextColor(255,255,255),S.setFontSize(14),S.setFont("helvetica","bold"),S.text(`${N}`,O+10,A+10),S.setFontSize(10),S.text(`Relatório gerado em ${new Date().toLocaleDateString("pt-BR")}`,O+10,A+20),A+=35,ce("PERFIL IDENTIFICADO",i?.profile||"Não identificado",!0),ce("BLOQUEIO PRINCIPAL",i?.mainBlockage||"Não identificado"),ce("DESCRIÇÃO DETALHADA",i?.description||"Não disponível"),ce("INSIGHT CHAVE",i?.keyInsight||"Não disponível"),i?.actionPlan?.length&&(ce("PLANO DE AÇÃO",""),i.actionPlan.forEach((J,De)=>{W(),S.setTextColor(E.forestGreen[0],E.forestGreen[1],E.forestGreen[2]),S.setFontSize(11),S.text(`${De+1}. ${J}`,O+5,A),A+=8}),A+=5),ce("PRÓXIMO PASSO",i?.nextStep||"Não disponível"),W(30),S.setFillColor(E.sageGreen[0],E.sageGreen[1],E.sageGreen[2]),S.rect(O-5,A-5,H+10,20,"F"),S.setTextColor(255,255,255),S.setFontSize(16),S.setFont("helvetica","bold"),S.text("ANÁLISE DETALHADA DOS 5 PILARES",O,A+8),A+=25,t.forEach((J,De)=>{$s(J,De)});const Ba=S.getNumberOfPages();for(let J=1;J<=Ba;J++)S.setPage(J),J>1&&se(),S.setDrawColor(E.royalGold[0],E.royalGold[1],E.royalGold[2]),S.setLineWidth(1),S.line(O,q-25,F-O,q-25),S.setTextColor(E.forestGreen[0],E.forestGreen[1],E.forestGreen[2]),S.setFontSize(8),S.setFont("helvetica","normal"),S.text(`Página ${J} de ${Ba}`,O,q-15),S.text("Fator Essencial - Sua Jornada de Transformação Pessoal",F-O,q-15,{align:"right"});S.save(`diagnostico-${p}-${new Date().toISOString().split("T")[0]}.pdf`)}).catch(C=>{console.error("Erro ao gerar PDF:",C),alert("Erro ao gerar PDF. Tente novamente.")})},v=[{profile:"O Perfeccionista Paralisado",mainBlockage:"Medo do Fracasso + Procrastinação",description:"Você tem uma mente brilhante e grandes ambições, mas está preso em um ciclo de planejamento infinito. Seu medo de não fazer 'perfeito' te impede de começar, e quando começa, a menor dificuldade te faz questionar se vale a pena continuar.",keyInsight:"Seu maior inimigo não é a incompetência, é a paralisia por análise. Você sabe o que fazer, mas não consegue se permitir fazer 'mal feito' primeiro para depois melhorar.",actionPlan:["Implemente a regra dos 2 minutos: qualquer tarefa que leve menos de 2 minutos, faça imediatamente","Defina 'bom o suficiente' antes de começar qualquer projeto","Pratique o 'lançamento imperfeito': termine e publique algo 80% pronto","Crie deadlines artificiais e compartilhe com alguém para criar accountability"],nextStep:"Escolha UMA coisa que você tem adiado há semanas e faça uma versão 'feia' dela hoje mesmo. Não precisa ser perfeita, precisa existir."},{profile:"O Sabotador Inconsciente",mainBlockage:"Autoimagem Limitada + Medo do Sucesso",description:"Você tem um padrão claro: sempre que está prestes a 'vencer', algo acontece. Você esquece, adoece, arranja uma briga, ou simplesmente 'perde o interesse'. Seu inconsciente está programado para te manter 'seguro' na zona de conforto.",keyInsight:"Seu maior medo não é falhar, é ter sucesso e descobrir que não consegue lidar com ele. Você se sabota porque, no fundo, não acredita que merece ou que é capaz de sustentar o sucesso.",actionPlan:["Identifique seus padrões de sabotagem: quando e como você se sabota?","Reescreva sua identidade: 'Eu sou o tipo de pessoa que...' (complete com características de sucesso)","Pratique receber elogios sem minimizar ou desviar","Crie rituais de celebração para pequenas vitórias","Trabalhe com afirmações diárias sobre merecimento"],nextStep:"Identifique uma área onde você sempre se sabota e crie um 'plano anti-sabotagem': o que você fará quando sentir vontade de desistir?"},{profile:"O Guerreiro Cansado",mainBlockage:"Frustração Acumulada + Descrença no Sistema",description:"Você já tentou de tudo. Já leu os livros, fez os cursos, seguiu os gurus. Algumas coisas funcionaram por um tempo, mas você sempre volta ao mesmo lugar. Está cansado de tentar e começando a acreditar que 'não é para você'.",keyInsight:"Você não falhou porque não é capaz. Você falhou porque estava usando estratégias genéricas para problemas específicos. Cada fracasso foi uma lição disfarçada, não uma confirmação de incapacidade.",actionPlan:["Faça um 'inventário de aprendizados': o que cada tentativa te ensinou?","Identifique o padrão: onde exatamente você sempre trava?","Mude a estratégia, não o objetivo: se algo não funciona há 3 tentativas, mude a abordagem","Foque em sistemas, não em motivação: crie estruturas que funcionem mesmo quando você não está inspirado","Encontre um mentor ou coach que já passou pelo que você está passando"],nextStep:"Escolha UMA coisa que você quer alcançar e pesquise 3 abordagens completamente diferentes das que você já tentou. Teste a mais simples por 30 dias."},{profile:"O Visionário Disperso",mainBlockage:"Falta de Foco + Inconsistência",description:"Você tem mil ideias brilhantes e começa várias coisas ao mesmo tempo. Sua mente é um vulcão de criatividade, mas você raramente termina o que começa. Vive pulando de projeto em projeto, sempre achando que a próxima ideia é 'a definitiva'.",keyInsight:"Sua criatividade é seu superpoder e sua kriptonita. Você precisa aprender a canalizar sua genialidade em uma direção por tempo suficiente para ver resultados reais.",actionPlan:["Regra do 'Um Só': escolha UM projeto principal e pause todos os outros","Crie um 'cemitério de ideias': anote todas as ideias novas em um caderno para revisar depois","Implemente blocos de tempo: 90 minutos focado em uma coisa só, sem exceções","Defina marcos de 30 dias: pequenas metas que te mantêm motivado","Encontre um parceiro de accountability que te cobre consistência"],nextStep:"Escolha o projeto com maior potencial de impacto na sua vida e comprometa-se a trabalhar APENAS nele pelos próximos 90 dias. Anote todas as outras ideias para depois."}];j.useEffect(()=>{const C=localStorage.getItem("quizAnswers");if(C){const S=JSON.parse(C);e(S);const E=k(S);a(E);const A=T(S);o(A),setTimeout(()=>l(!1),1500)}else r("/quiz/welcome")},[r]);const k=C=>[{pillar:"Pensamento",icon:ve,questions:[0,1],answers:C.slice(0,2)},{pillar:"Sentimento",icon:Ze,questions:[2,3],answers:C.slice(2,4)},{pillar:"Emoção",icon:de,questions:[4,5],answers:C.slice(4,6)},{pillar:"Ação",icon:je,questions:[6,7],answers:C.slice(6,8)},{pillar:"Resultado",icon:qe,questions:[8,9],answers:C.slice(8,10)}].map(E=>{const A=E.answers.reduce((ce,$s)=>ce+$s,0)/E.answers.length,F=Math.round((3-A)*33.33);let q,O,H,W,se;return F>=70?(q="forte",O=`${E.pillar}: Pilar Forte`,H=`Seu ${E.pillar.toLowerCase()} está bem alinhado e funcionando a seu favor.`,W="Este pilar está impulsionando seu crescimento e sucesso.",se="Continue fortalecendo este pilar e use-o como base para melhorar os outros."):F>=40?(q="moderado",O=`${E.pillar}: Atenção Necessária`,H=`Seu ${E.pillar.toLowerCase()} tem potencial, mas precisa de ajustes.`,W="Este pilar pode estar limitando seu progresso em algumas áreas.",se="Foque em identificar e corrigir os padrões limitantes neste pilar."):(q="critico",O=`${E.pillar}: Bloqueio Crítico`,H=`Seu ${E.pillar.toLowerCase()} está criando barreiras significativas.`,W="Este é provavelmente seu maior obstáculo para o sucesso.",se="Priorize a reprogramação deste pilar - ele está sabotando seus outros esforços."),{pillar:E.pillar,icon:E.icon,status:q,score:F,title:O,description:H,impact:W,solution:se}}),T=C=>{const S=(C[0]+C[1])/2,E=(C[2]+C[3])/2,A=(C[4]+C[5])/2,F=(C[6]+C[7])/2,q=(C[8]+C[9])/2;return S<=1&&F>=2?v[0]:E>=2&&A>=2?v[1]:q>=2&&A>=1.5?v[2]:v[3]},P=C=>{switch(C){case"forte":return"text-green-400 border-green-400/50 bg-green-400/10";case"moderado":return"text-yellow-400 border-yellow-400/50 bg-yellow-400/10";case"critico":return"text-red-400 border-red-400/50 bg-red-400/10";default:return"text-royal-gold border-royal-gold/50 bg-royal-gold/10"}},R=C=>{switch(C){case"forte":return he;case"moderado":return Qe;case"critico":return Qe;default:return he}};return n?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-deep-forest flex items-center justify-center",children:s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-4",children:[s.jsx(fe,{}),s.jsx("p",{className:"text-pearl-white/80 text-lg",children:"Preparando seus resultados..."})]})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-deep-forest relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 opacity-5",children:Array.from({length:20}).map((C,S)=>s.jsx(m.div,{className:"absolute text-royal-gold font-mono text-xs",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`},animate:{y:[0,-20,0],opacity:[.2,.6,.2]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*3},children:Math.random()>.5?"1":"0"},S))}),s.jsx("div",{className:"relative z-10 min-h-screen py-8 px-4",children:s.jsxs("div",{className:"max-w-6xl mx-auto space-y-12",children:[s.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center space-y-6",children:[s.jsx(fe,{}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h1",{className:"text-4xl md:text-6xl font-heading font-bold text-pearl-white leading-tight",children:[p,", Seu Diagnóstico",s.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-royal-gold via-bright-gold to-royal-gold",children:"Está Pronto"})]}),s.jsxs("p",{className:"text-xl text-pearl-white/80 max-w-3xl mx-auto leading-relaxed",children:[p,", baseado nas suas respostas, identificamos exatamente onde estão seus bloqueios e como superá-los."]})]})]}),i&&s.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.3,duration:.8},className:"bg-gradient-to-r from-royal-gold/10 to-bright-gold/10 backdrop-blur-sm rounded-3xl p-8 border border-royal-gold/40",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsxs("h2",{className:"text-3xl font-heading font-bold text-royal-gold mb-4",children:["Seu Perfil: ",i.profile]}),s.jsxs("div",{className:"inline-flex items-center space-x-2 bg-red-400/20 text-red-400 px-4 py-2 rounded-xl border border-red-400/30",children:[s.jsx(Qe,{className:"w-5 h-5"}),s.jsxs("span",{className:"font-semibold",children:["Bloqueio Principal: ",i.mainBlockage]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-pearl-white mb-3",children:"O Que Está Acontecendo"}),s.jsx("p",{className:"text-pearl-white/80 leading-relaxed",children:i.description})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-pearl-white mb-3",children:"Insight Chave"}),s.jsx("p",{className:"text-bright-gold leading-relaxed font-medium",children:i.keyInsight})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-pearl-white mb-3",children:"Plano de Ação"}),s.jsx("ul",{className:"space-y-2",children:i.actionPlan.map((C,S)=>s.jsxs("li",{className:"flex items-start space-x-3",children:[s.jsx(he,{className:"w-5 h-5 text-green-400 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-pearl-white/80 text-sm leading-relaxed",children:C})]},S))})]}),s.jsxs("div",{className:"bg-bright-gold/10 rounded-xl p-4 border border-bright-gold/30",children:[s.jsx("h4",{className:"text-lg font-semibold text-bright-gold mb-2",children:"Próximo Passo Imediato"}),s.jsx("p",{className:"text-pearl-white/90 text-sm leading-relaxed",children:i.nextStep})]})]})]})]}),s.jsxs(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5,duration:.8},className:"space-y-8",children:[s.jsx("h2",{className:"text-3xl font-heading font-bold text-pearl-white text-center",children:"Análise Detalhada dos 5Ps"}),s.jsx("div",{className:"grid gap-6",children:t.map((C,S)=>{const E=C.icon,A=R(C.status);return s.jsx(m.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:.7+S*.1,duration:.6},className:`bg-forest-green/20 backdrop-blur-sm rounded-2xl p-6 border-2 ${P(C.status)}`,children:s.jsxs("div",{className:"flex items-start space-x-6",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${P(C.status)}`,children:s.jsx(E,{className:"w-8 h-8"})})}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-xl font-semibold text-pearl-white",children:C.title}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(A,{className:`w-5 h-5 ${C.status==="forte"?"text-green-400":C.status==="moderado"?"text-yellow-400":"text-red-400"}`}),s.jsxs("span",{className:"text-2xl font-bold text-pearl-white",children:[C.score,"%"]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-pearl-white mb-1",children:"Situação Atual"}),s.jsx("p",{className:"text-pearl-white/70 leading-relaxed",children:C.description})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-pearl-white mb-1",children:"Impacto"}),s.jsx("p",{className:"text-pearl-white/70 leading-relaxed",children:C.impact})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-pearl-white mb-1",children:"Solução"}),s.jsx("p",{className:"text-pearl-white/70 leading-relaxed",children:C.solution})]})]})]})]})},C.pillar)})})]}),s.jsx(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1,duration:.8},className:"bg-gradient-to-r from-deep-navy/80 to-royal-blue/80 backdrop-blur-sm rounded-3xl p-8 border border-royal-gold/30 max-w-5xl mx-auto",children:s.jsxs("div",{className:"text-center space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[s.jsx("div",{className:"w-14 h-14 bg-gradient-to-r from-royal-gold to-bright-gold rounded-full flex items-center justify-center",children:s.jsx(ve,{className:"w-7 h-7 text-deep-navy"})}),s.jsx("h2",{className:"text-3xl font-heading font-bold text-royal-gold",children:"Transforme Seus Resultados em Realidade"})]}),s.jsxs("p",{className:"text-xl text-pearl-white/90 leading-relaxed max-w-4xl mx-auto",children:[p,", você acabou de descobrir exatamente onde estão seus bloqueios. Agora chegou o momento mais importante: ",s.jsx("span",{className:"text-royal-gold font-bold",children:"transformar esse conhecimento em ação concreta"}),"."]}),s.jsx("div",{className:"bg-gradient-to-r from-royal-gold/10 to-bright-gold/10 rounded-2xl p-6 border border-royal-gold/30",children:s.jsxs("p",{className:"text-lg text-pearl-white/90 leading-relaxed",children:["A ",s.jsx("span",{className:"text-royal-gold font-bold",children:"Plataforma Fator Essencial"})," foi criada especificamente para pessoas como você, que querem sair do diagnóstico e partir para a ",s.jsx("span",{className:"text-bright-gold font-semibold",children:"transformação real"}),"."]})}),s.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mt-10",children:[s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-royal-gold/20 rounded-full flex items-center justify-center mx-auto",children:s.jsx(je,{className:"w-10 h-10 text-royal-gold"})}),s.jsx("h3",{className:"text-xl font-semibold text-pearl-white",children:"Planos Personalizados"}),s.jsxs("p",{className:"text-pearl-white/80 leading-relaxed",children:["Baseado no seu diagnóstico, você recebe um ",s.jsx("strong",{children:"plano de ação específico"})," para superar cada bloqueio identificado."]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-royal-gold/20 rounded-full flex items-center justify-center mx-auto",children:s.jsx(de,{className:"w-10 h-10 text-royal-gold"})}),s.jsx("h3",{className:"text-xl font-semibold text-pearl-white",children:"Ferramentas Práticas"}),s.jsxs("p",{className:"text-pearl-white/80 leading-relaxed",children:["Acesso a ",s.jsx("strong",{children:"exercícios, técnicas e estratégias"})," que você pode aplicar imediatamente na sua vida."]})]}),s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-20 h-20 bg-royal-gold/20 rounded-full flex items-center justify-center mx-auto",children:s.jsx(qe,{className:"w-10 h-10 text-royal-gold"})}),s.jsx("h3",{className:"text-xl font-semibold text-pearl-white",children:"Resultados Garantidos"}),s.jsxs("p",{className:"text-pearl-white/80 leading-relaxed",children:["Acompanhamento do seu progresso com ",s.jsx("strong",{children:"métricas claras"})," para você ver sua evolução acontecendo."]})]})]}),s.jsx("div",{className:"bg-gradient-to-r from-red-900/30 to-orange-900/30 rounded-2xl p-6 mt-8 border border-orange-500/50",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("h3",{className:"text-xl font-bold text-orange-300",children:"⚡ OFERTA ESPECIAL - APENAS HOJE"}),s.jsxs("p",{className:"text-pearl-white/90 text-lg",children:["Quem completa o diagnóstico hoje ganha ",s.jsx("span",{className:"text-bright-gold font-bold",children:"50% de desconto"})," no primeiro mês!"]}),s.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-orange-200",children:[s.jsx("span",{children:"✓ Plano Básico: De R$ 19,98 por R$ 9,99"}),s.jsx("span",{children:"✓ Plano Completo: De R$ 39,94 por R$ 19,97"})]})]})}),s.jsxs("div",{className:"bg-gradient-to-r from-bright-gold/20 to-royal-gold/20 rounded-2xl p-8 mt-8 border border-bright-gold/30",children:[s.jsx("h3",{className:"text-2xl font-bold text-bright-gold mb-4",children:"Não Deixe Seus Insights Virarem Apenas Conhecimento"}),s.jsxs("p",{className:"text-lg text-pearl-white/90 leading-relaxed mb-6",children:["Milhares de pessoas fazem diagnósticos, mas apenas algumas transformam os resultados em mudanças reais. A diferença está em ter o ",s.jsx("span",{className:"text-royal-gold font-bold",children:"sistema certo"})," para colocar tudo em prática."]}),s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs(m.button,{onClick:()=>r("/subscription"),className:"group relative overflow-hidden bg-gradient-to-r from-royal-gold to-bright-gold text-deep-navy py-4 px-10 rounded-xl font-bold text-xl flex items-center space-x-3 hover:shadow-lg hover:shadow-royal-gold/40 transition-all duration-300",whileHover:{scale:1.05},whileTap:{scale:.95},children:[s.jsx("span",{children:"CRIAR CONTA COM 50% DESCONTO"}),s.jsx(Pe,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})})]})]})}),s.jsx(m.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1.4,duration:.8},className:"text-center space-y-6",children:s.jsxs("div",{className:"bg-gradient-to-r from-forest-green/20 to-deep-navy/20 backdrop-blur-sm rounded-2xl p-6 border border-royal-gold/20",children:[s.jsx("h3",{className:"text-xl font-heading font-semibold text-pearl-white mb-4",children:"Já Tem Uma Conta?"}),s.jsx("p",{className:"text-pearl-white/70 mb-6 max-w-2xl mx-auto",children:"Faça login para acessar sua plataforma personalizada ou baixe este relatório para revisar com calma."}),s.jsxs("div",{className:"flex flex-col gap-4 justify-center items-center",children:[s.jsxs(m.button,{onClick:()=>r("/login"),className:"flex items-center space-x-2 text-pearl-white hover:text-royal-gold transition-colors duration-300 px-4 py-2 border border-royal-gold/30 rounded-lg hover:border-royal-gold/60 text-sm",whileHover:{scale:1.02},whileTap:{scale:.98},children:[s.jsx(Pe,{className:"w-4 h-4"}),s.jsx("span",{children:"Fazer Login"})]}),b?s.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center space-x-2 bg-green-600/20 border border-green-400/30 rounded-xl px-6 py-3 text-green-400",children:[s.jsx(he,{className:"w-5 h-5"}),s.jsxs("span",{children:["Relatório enviado para ",d,"!"]})]}):s.jsxs("div",{className:"flex flex-col gap-3 items-center w-full max-w-md",children:[s.jsx("div",{className:"relative w-full",children:s.jsx("input",{type:"email",value:d,onChange:C=>h(C.target.value),placeholder:"Seu melhor email",className:"bg-deep-forest/50 border border-royal-gold/30 rounded-xl px-4 py-3 text-pearl-white placeholder-pearl-white/50 focus:outline-none focus:border-royal-gold/60 focus:ring-2 focus:ring-royal-gold/20 transition-all duration-300 w-full",disabled:f})}),s.jsx(m.button,{onClick:w,disabled:f,className:"flex items-center space-x-2 bg-gradient-to-r from-royal-gold to-bright-gold text-deep-navy hover:from-bright-gold hover:to-royal-gold transition-all duration-300 px-6 py-3 rounded-xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed w-full justify-center",whileHover:f?{}:{scale:1.02},whileTap:f?{}:{scale:.98},children:f?s.jsxs(s.Fragment,{children:[s.jsx(m.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-deep-navy border-t-transparent rounded-full"}),s.jsx("span",{children:"Enviando..."})]}):s.jsxs(s.Fragment,{children:[s.jsx(bt,{className:"w-5 h-5"}),s.jsx("span",{children:"Receber por Email"})]})})]})]}),!b&&s.jsx("p",{className:"text-pearl-white/60 text-sm mt-3 max-w-md mx-auto",children:"💌 Receba seu relatório completo por email e fique por dentro de conteúdos exclusivos sobre desenvolvimento pessoal"})]})})]})})]})}const td=()=>{const{user:r}=G(),e=()=>{const o=new Date().getHours();return o<12?{text:"Bom dia",icon:ro,gradient:"from-amber-400 to-orange-500"}:o<18?{text:"Boa tarde",icon:io,gradient:"from-orange-400 to-red-500"}:{text:"Boa noite",icon:$r,gradient:"from-indigo-400 to-purple-500"}},t=at(r?.name||""),a=e(),i=a.icon;return s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative text-center py-8 overflow-hidden",children:[s.jsx(m.div,{className:`absolute inset-0 bg-gradient-to-r ${a.gradient} opacity-10 rounded-3xl`,animate:{scale:[1,1.05,1],opacity:[.1,.15,.1]},transition:{duration:4,repeat:1/0,ease:"easeInOut"}}),s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(6)].map((o,n)=>s.jsx(m.div,{className:"absolute w-2 h-2 bg-royal-gold/30 rounded-full",animate:{y:[-20,-100],x:[Math.random()*300,Math.random()*300],opacity:[0,1,0]},transition:{duration:3+Math.random()*2,repeat:1/0,delay:Math.random()*2},style:{left:`${Math.random()*100}%`,top:"100%"}},n))}),s.jsxs("div",{className:"relative z-10",children:[s.jsx(m.div,{className:"flex justify-center mb-4",initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.1,type:"spring",stiffness:200},children:s.jsx("div",{className:`p-3 rounded-full bg-gradient-to-r ${a.gradient} shadow-lg`,children:s.jsx(i,{className:"w-6 h-6 text-white"})})}),s.jsxs(m.h1,{className:"text-white text-4xl font-heading font-bold mb-3 bg-gradient-to-r from-white to-pearl-white bg-clip-text text-transparent",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2,type:"spring",stiffness:100},children:[a.text,", ",t,"!"]}),s.jsxs(m.div,{className:"flex items-center justify-center gap-2 mb-4",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3},children:[s.jsx(ye,{className:"w-5 h-5 text-royal-gold"}),s.jsx(m.p,{className:"text-pearl-white/90 text-lg font-medium",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0},children:"Pronto para transformar seu dia?"}),s.jsx(ye,{className:"w-5 h-5 text-royal-gold"})]}),s.jsx(m.div,{className:"w-24 h-1 bg-gradient-to-r from-royal-gold to-bright-gold rounded-full mx-auto",initial:{width:0},animate:{width:96},transition:{delay:.5,duration:1}})]})]})},sd=()=>{const{dailyProtocol:r}=G(),e=new Date().getHours()>=18,t=[{id:"p1",name:"Pensamento",completed:r.p1_affirmations.length===3,icon:"🧠",color:"from-purple-500 to-indigo-600"},{id:"p2",name:"Sentimento",completed:!!r.p2_feeling,icon:"❤️",color:"from-pink-500 to-red-500"},{id:"p3",name:"Emoção",completed:r.p3_peak_state_completed,icon:"⚡",color:"from-yellow-400 to-orange-500"},{id:"p4",name:"Ação",completed:r.p4_completed,icon:"🎯",color:"from-green-500 to-emerald-600"}];e&&t.push({id:"p5",name:"Reflexão",completed:!!(r.p5_victory&&r.p5_gratitude),icon:"🌙",color:"from-indigo-500 to-purple-600"});const a=t.filter(n=>n.completed).length,i=t.length,o=a/i*100;return s.jsxs(m.div,{className:"glass-card p-6 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-xl font-heading font-bold mb-1",children:"Progresso Diário"}),s.jsxs("p",{className:"text-pearl-white/80 text-sm",children:[a," de ",i," protocolos concluídos"]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(m.div,{className:"text-3xl font-bold text-white mb-1",animate:{scale:o===100?[1,1.1,1]:1,color:o===100?["#ffffff","#10b981","#ffffff"]:"#ffffff"},transition:{duration:2,repeat:o===100?1/0:0},children:[Math.round(o),"%"]}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-pearl-white/70",children:[s.jsx(Ke,{className:"w-3 h-3"}),s.jsx("span",{children:new Date().toLocaleDateString("pt-BR")})]})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"relative w-full bg-white/20 rounded-full h-4 overflow-hidden",children:[s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-royal-gold via-bright-gold to-royal-gold h-full rounded-full",initial:{width:0,x:"-100%"},animate:{width:`${o}%`,x:"0%"},transition:{duration:2,ease:"easeOut",delay:.5}}),s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent h-full",animate:{x:["-100%","100%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:2}}),t.map((n,l)=>{const c=(l+1)/i*100;return s.jsx("div",{className:"absolute top-0 bottom-0 w-0.5 bg-white/30",style:{left:`${c}%`}},l)})]})}),s.jsx("div",{className:"grid grid-cols-4 gap-4",children:t.slice(0,4).map((n,l)=>s.jsxs(m.div,{className:"text-center",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7+l*.1},children:[s.jsxs(m.div,{className:`relative mx-auto w-12 h-12 rounded-xl bg-gradient-to-br ${n.completed?n.color:"from-white/20 to-white/10"} flex items-center justify-center mb-2 shadow-lg`,animate:{scale:n.completed?[1,1.05,1]:1,rotate:n.completed?[0,5,-5,0]:0},transition:{duration:2,repeat:n.completed?1/0:0,ease:"easeInOut"},children:[s.jsx("span",{className:"text-lg",children:n.icon}),s.jsx(m.div,{className:`absolute -top-1 -right-1 w-4 h-4 rounded-full flex items-center justify-center ${n.completed?"bg-success-green":"bg-white/20"}`,animate:{scale:n.completed?[1,1.2,1]:1},transition:{duration:1,repeat:n.completed?1/0:0},children:n.completed?s.jsx(he,{className:"w-3 h-3 text-white"}):s.jsx(oa,{className:"w-3 h-3 text-white/60"})}),n.completed&&s.jsx(m.div,{className:"absolute inset-0 bg-white/20 rounded-xl blur-sm",animate:{opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0}})]}),s.jsx("p",{className:`text-xs font-medium ${n.completed?"text-white":"text-pearl-white/60"}`,children:n.name})]},n.id))}),e&&t.length===5&&s.jsxs(m.div,{className:"mt-6 pt-4 border-t border-white/20",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:1.2},children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsxs(m.div,{className:`relative w-16 h-16 rounded-xl bg-gradient-to-br ${t[4].completed?t[4].color:"from-white/20 to-white/10"} flex items-center justify-center shadow-lg`,animate:{scale:t[4].completed?[1,1.05,1]:1,rotate:t[4].completed?[0,5,-5,0]:0},transition:{duration:2,repeat:t[4].completed?1/0:0,ease:"easeInOut"},children:[s.jsx("span",{className:"text-2xl",children:t[4].icon}),s.jsx(m.div,{className:`absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center ${t[4].completed?"bg-success-green":"bg-white/20"}`,animate:{scale:t[4].completed?[1,1.2,1]:1},transition:{duration:1,repeat:t[4].completed?1/0:0},children:t[4].completed?s.jsx(he,{className:"w-4 h-4 text-white"}):s.jsx(oa,{className:"w-4 h-4 text-white/60"})}),t[4].completed&&s.jsx(m.div,{className:"absolute inset-0 bg-white/20 rounded-xl blur-sm",animate:{opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0}})]})}),s.jsxs("p",{className:`text-center text-sm font-medium mt-2 ${t[4].completed?"text-white":"text-pearl-white/60"}`,children:[t[4].name," Noturna"]})]}),o===100?s.jsxs(m.div,{className:"mt-6 p-4 bg-gradient-to-r from-success-green/20 to-emerald-500/20 border border-success-green/40 rounded-xl text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.5},children:[s.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"inline-block mb-2",children:"🎉"}),s.jsx("p",{className:"text-success-green font-semibold",children:"Parabéns! Você completou todos os protocolos hoje!"})]}):s.jsxs(m.div,{className:"mt-6 p-4 bg-gradient-to-r from-royal-gold/20 to-bright-gold/20 border border-royal-gold/40 rounded-xl text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.5},children:[s.jsx(je,{className:"w-5 h-5 text-royal-gold mx-auto mb-2"}),s.jsxs("p",{className:"text-royal-gold font-semibold",children:["Continue assim! Faltam ",i-a," protocolos."]})]})]})},ad=({percentage:r,size:e=120,strokeWidth:t=8,color:a="#F59E0B",backgroundColor:i="rgba(255, 255, 255, 0.2)",showPercentage:o=!0,children:n})=>{const l=(e-t)/2,c=l*2*Math.PI,u=c,d=c-r/100*c;return s.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[s.jsxs("svg",{width:e,height:e,className:"transform -rotate-90",children:[s.jsx("circle",{cx:e/2,cy:e/2,r:l,stroke:i,strokeWidth:t,fill:"transparent"}),s.jsx(m.circle,{cx:e/2,cy:e/2,r:l,stroke:a,strokeWidth:t,fill:"transparent",strokeLinecap:"round",strokeDasharray:u,initial:{strokeDashoffset:c},animate:{strokeDashoffset:d},transition:{duration:2,ease:"easeOut"},style:{filter:"drop-shadow(0 0 6px rgba(245, 158, 11, 0.4))"}}),s.jsx(m.circle,{cx:e/2,cy:e/2,r:l,stroke:a,strokeWidth:t/2,fill:"transparent",strokeLinecap:"round",strokeDasharray:u,strokeDashoffset:d,opacity:.3,style:{filter:"blur(4px)"}})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n||o&&s.jsx(m.div,{className:"text-center",initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{delay:1,duration:.5},children:s.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(r),"%"]})})})]})},rd=()=>{const{streak:r,longestStreak:e,level:t,xp:a}=G(),i=t*1e3-a,o=a%1e3/1e3*100;return s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(m.div,{className:"relative glass-card p-5 text-center overflow-hidden group",whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1},children:[s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-br from-orange-500/20 to-red-500/20 rounded-xl",animate:{opacity:[.2,.4,.2],scale:[1,1.02,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),s.jsx(m.div,{className:"flex items-center justify-center mb-3",animate:{rotate:[-2,2,-2],scale:[1,1.1,1]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:s.jsxs("div",{className:"relative",children:[s.jsx(ys,{className:"w-8 h-8 text-orange-400 drop-shadow-lg"}),r>0&&s.jsx(m.div,{className:"absolute -top-1 -right-1 w-3 h-3 bg-royal-gold rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}})]})}),s.jsx(m.span,{className:"text-3xl font-bold text-white block mb-2",animate:{scale:r>e?[1,1.1,1]:1},transition:{duration:.5},children:r}),s.jsx("p",{className:"text-pearl-white/90 text-sm font-medium mb-2",children:"Dias consecutivos"}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(me,{className:"w-3 h-3 text-royal-gold"}),s.jsxs("p",{className:"text-royal-gold text-xs font-semibold",children:["Recorde: ",e]}),s.jsx(me,{className:"w-3 h-3 text-royal-gold"})]})]}),s.jsxs(m.div,{className:"relative glass-card p-5 text-center overflow-hidden group",whileHover:{scale:1.03,y:-2},whileTap:{scale:.97},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2},children:[s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-br from-royal-gold/20 to-bright-gold/20 rounded-xl",animate:{opacity:[.2,.4,.2],scale:[1,1.02,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut",delay:1.5}}),s.jsx(m.div,{className:"flex items-center justify-center mb-3",animate:{y:[-2,2,-2]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"},children:s.jsxs("div",{className:"relative",children:[s.jsx(qe,{className:"w-8 h-8 text-royal-gold drop-shadow-lg"}),s.jsx(m.div,{className:"absolute inset-0 bg-royal-gold/30 rounded-full blur-md",animate:{scale:[.8,1.2,.8],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0}})]})}),s.jsx(m.span,{className:"text-3xl font-bold text-white block mb-2",animate:{textShadow:["0 0 10px rgba(255, 215, 0, 0.5)","0 0 20px rgba(255, 215, 0, 0.8)","0 0 10px rgba(255, 215, 0, 0.5)"]},transition:{duration:2,repeat:1/0},children:t}),s.jsx("p",{className:"text-pearl-white/90 text-sm font-medium mb-4",children:"Nível atual"}),s.jsxs("div",{className:"flex flex-col items-center space-y-3",children:[s.jsx(ad,{percentage:o,size:80,strokeWidth:6,color:"#F59E0B",backgroundColor:"rgba(255, 255, 255, 0.2)",showPercentage:!1,children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-lg font-bold text-royal-gold",children:Math.round(a%1e3)}),s.jsx("div",{className:"text-xs text-pearl-white/70",children:"/ 1000 XP"})]})}),s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx(de,{className:"w-3 h-3 text-bright-gold"}),s.jsxs("p",{className:"text-bright-gold text-xs font-semibold",children:[i," XP para próximo nível"]})]})]})]})]})},id=()=>{const{streak:r,xp:e}=G(),t=new Date().getDay(),a=[{day:"Dom",completed:!0,percentage:100},{day:"Seg",completed:!0,percentage:100},{day:"Ter",completed:!0,percentage:75},{day:"Qua",completed:!1,percentage:50},{day:"Qui",completed:t>=4,percentage:t>=4?100:0},{day:"Sex",completed:t>=5,percentage:t>=5?100:0},{day:"Sáb",completed:t>=6,percentage:t>=6?100:0}],i=a.filter(n=>n.completed).length,o=Math.round(i/7*100);return s.jsxs(m.div,{className:"glass-card p-6 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg",children:s.jsx(oo,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white text-lg font-heading font-bold",children:"Estatísticas da Semana"}),s.jsxs("p",{className:"text-pearl-white/80 text-sm",children:[i," de 7 dias concluídos"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs(m.div,{className:"text-2xl font-bold text-white mb-1",animate:{scale:o>=80?[1,1.05,1]:1,color:o>=80?["#ffffff","#10b981","#ffffff"]:"#ffffff"},transition:{duration:2,repeat:o>=80?1/0:0},children:[o,"%"]}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Taxa de conclusão"})]})]}),s.jsx("div",{className:"mb-6",children:s.jsx("div",{className:"flex items-end justify-between gap-2 h-24",children:a.map((n,l)=>{const c=l===t,u=Math.max(n.percentage*.8,10);return s.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[s.jsx(m.div,{className:"w-full relative",style:{height:"80px"},children:s.jsxs(m.div,{className:`absolute bottom-0 w-full rounded-t-lg ${n.completed?"bg-gradient-to-t from-success-green to-emerald-400":c?"bg-gradient-to-t from-royal-gold to-bright-gold":"bg-gradient-to-t from-white/20 to-white/10"}`,initial:{height:0},animate:{height:`${u}%`},transition:{delay:.6+l*.1,duration:.8,ease:"easeOut"},children:[n.completed&&s.jsx(m.div,{className:"absolute inset-0 bg-white/20 rounded-t-lg blur-sm",animate:{opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0}}),c&&s.jsx(m.div,{className:"absolute -top-1 left-1/2 transform -translate-x-1/2 w-2 h-2 bg-white rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}})]})}),s.jsx(m.p,{className:`text-xs font-medium mt-2 ${c?"text-royal-gold":n.completed?"text-white":"text-pearl-white/60"}`,initial:{opacity:0},animate:{opacity:1},transition:{delay:.8+l*.1},children:n.day})]},n.day)})})}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs(m.div,{className:"text-center p-3 bg-gradient-to-br from-orange-500/20 to-red-500/20 border border-orange-500/30 rounded-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.2},children:[s.jsx(ys,{className:"w-5 h-5 text-orange-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:r}),s.jsx("p",{className:"text-xs text-orange-300",children:"Sequência"})]}),s.jsxs(m.div,{className:"text-center p-3 bg-gradient-to-br from-purple-500/20 to-indigo-500/20 border border-purple-500/30 rounded-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.3},children:[s.jsx(no,{className:"w-5 h-5 text-purple-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:Math.round(e*.3)}),s.jsx("p",{className:"text-xs text-purple-300",children:"XP Semana"})]}),s.jsxs(m.div,{className:"text-center p-3 bg-gradient-to-br from-yellow-500/20 to-orange-500/20 border border-yellow-500/30 rounded-lg",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.4},children:[s.jsx(Lr,{className:"w-5 h-5 text-yellow-400 mx-auto mb-1"}),s.jsx("div",{className:"text-lg font-bold text-white",children:i}),s.jsx("p",{className:"text-xs text-yellow-300",children:"Dias Perfeitos"})]})]}),o>=80?s.jsx(m.div,{className:"mt-4 p-3 bg-gradient-to-r from-success-green/20 to-emerald-500/20 border border-success-green/40 rounded-lg text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.6},children:s.jsx("p",{className:"text-success-green font-semibold text-sm",children:"🎉 Excelente semana! Você está no caminho certo!"})}):o>=50?s.jsx(m.div,{className:"mt-4 p-3 bg-gradient-to-r from-royal-gold/20 to-bright-gold/20 border border-royal-gold/40 rounded-lg text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.6},children:s.jsx("p",{className:"text-royal-gold font-semibold text-sm",children:"💪 Boa semana! Continue assim para alcançar seus objetivos!"})}):s.jsx(m.div,{className:"mt-4 p-3 bg-gradient-to-r from-blue-500/20 to-indigo-500/20 border border-blue-500/40 rounded-lg text-center",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:1.6},children:s.jsx("p",{className:"text-blue-400 font-semibold text-sm",children:"🚀 Vamos acelerar! Cada dia é uma nova oportunidade!"})})]})},od=()=>{const{streak:r,xp:e,dailyProtocol:t}=G(),[a,i]=j.useState(null),o=[{id:"first_day",title:"Primeiro Passo",description:"Complete seu primeiro protocolo diário",icon:s.jsx(me,{className:"w-6 h-6"}),unlocked:r>=1,progress:Math.min(r,1),maxProgress:1,rarity:"common",xpReward:50},{id:"week_warrior",title:"Guerreiro da Semana",description:"Mantenha uma sequência de 7 dias",icon:s.jsx(ys,{className:"w-6 h-6"}),unlocked:r>=7,progress:Math.min(r,7),maxProgress:7,rarity:"rare",xpReward:200},{id:"month_master",title:"Mestre do Mês",description:"Complete 30 dias consecutivos",icon:s.jsx(ke,{className:"w-6 h-6"}),unlocked:r>=30,progress:Math.min(r,30),maxProgress:30,rarity:"epic",xpReward:1e3},{id:"xp_collector",title:"Coletor de XP",description:"Acumule 1000 pontos de experiência",icon:s.jsx(de,{className:"w-6 h-6"}),unlocked:e>=1e3,progress:Math.min(e,1e3),maxProgress:1e3,rarity:"rare",xpReward:300},{id:"perfectionist",title:"Perfeccionista",description:"Complete todos os 5 protocolos em um dia",icon:s.jsx(je,{className:"w-6 h-6"}),unlocked:t.p1_affirmations.length===3&&!!t.p2_feeling&&t.p3_peak_state_completed&&t.p4_completed&&!!(t.p5_victory&&t.p5_gratitude),progress:[t.p1_affirmations.length===3,!!t.p2_feeling,t.p3_peak_state_completed,t.p4_completed,!!(t.p5_victory&&t.p5_gratitude)].filter(Boolean).length,maxProgress:5,rarity:"epic",xpReward:500},{id:"legend",title:"Lenda Viva",description:"Alcance 100 dias de sequência",icon:s.jsx(qe,{className:"w-6 h-6"}),unlocked:r>=100,progress:Math.min(r,100),maxProgress:100,rarity:"legendary",xpReward:5e3}],n=o.filter(d=>d.unlocked),l=o.filter(d=>!d.unlocked),c=d=>{switch(d){case"common":return"from-gray-500 to-gray-600";case"rare":return"from-blue-500 to-blue-600";case"epic":return"from-purple-500 to-purple-600";case"legendary":return"from-yellow-400 to-orange-500";default:return"from-gray-500 to-gray-600"}},u=d=>{switch(d){case"common":return"border-gray-500/50";case"rare":return"border-blue-500/50";case"epic":return"border-purple-500/50";case"legendary":return"border-yellow-400/50";default:return"border-gray-500/50"}};return s.jsxs(m.div,{className:"glass-card p-6 mb-6",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg",children:s.jsx(Lr,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white text-lg font-heading font-bold",children:"Conquistas"}),s.jsxs("p",{className:"text-pearl-white/80 text-sm",children:[n.length," de ",o.length," desbloqueadas"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:n.reduce((d,h)=>d+h.xpReward,0)}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"XP Total"})]})]}),n.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[s.jsx(ye,{className:"w-4 h-4 text-yellow-400"}),"Desbloqueadas"]}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map((d,h)=>s.jsxs(m.div,{className:`relative p-4 bg-gradient-to-br ${c(d.rarity)} border ${u(d.rarity)} rounded-xl cursor-pointer group`,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.7+h*.1},whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>i(d),children:[s.jsx(m.div,{className:"absolute inset-0 bg-white/20 rounded-xl blur-sm opacity-0 group-hover:opacity-100",transition:{duration:.3}}),d.rarity==="legendary"&&s.jsx(m.div,{className:"absolute -top-1 -right-1 text-yellow-300",animate:{rotate:360},transition:{duration:4,repeat:1/0,ease:"linear"},children:s.jsx(ye,{className:"w-4 h-4"})}),s.jsx("div",{className:"relative z-10",children:s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("div",{className:"text-white",children:d.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"text-white font-semibold text-sm",children:d.title}),s.jsxs("p",{className:"text-white/80 text-xs",children:["+",d.xpReward," XP"]})]})]})})]},d.id))})]}),l.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[s.jsx(je,{className:"w-4 h-4 text-pearl-white/60"}),"Em Progresso"]}),s.jsx("div",{className:"grid grid-cols-1 gap-3",children:l.slice(0,3).map((d,h)=>{const b=d.progress/d.maxProgress*100;return s.jsxs(m.div,{className:"p-4 bg-white/10 border border-white/20 rounded-xl cursor-pointer group",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9+h*.1},whileHover:{scale:1.02},onClick:()=>i(d),children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"text-pearl-white/60",children:d.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"text-white font-semibold text-sm",children:d.title}),s.jsxs("p",{className:"text-pearl-white/70 text-xs",children:[d.progress,"/",d.maxProgress]})]}),s.jsx("div",{className:"text-right",children:s.jsxs("div",{className:"text-sm font-bold text-pearl-white/80",children:[Math.round(b),"%"]})})]}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:s.jsx(m.div,{className:`h-full bg-gradient-to-r ${c(d.rarity)} rounded-full`,initial:{width:0},animate:{width:`${b}%`},transition:{delay:1.2+h*.1,duration:1}})})]},d.id)})})]}),s.jsx(Xe,{children:a&&s.jsx(m.div,{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>i(null),children:s.jsxs(m.div,{className:`glass-card p-6 max-w-sm w-full border ${u(a.rarity)}`,initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},onClick:d=>d.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:`p-3 bg-gradient-to-br ${c(a.rarity)} rounded-lg`,children:a.icon}),s.jsx("button",{onClick:()=>i(null),className:"text-pearl-white/60 hover:text-white transition-colors",children:s.jsx($t,{className:"w-5 h-5"})})]}),s.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:a.title}),s.jsx("p",{className:"text-pearl-white/80 text-sm mb-4",children:a.description}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("span",{className:"text-pearl-white/70 text-sm",children:"Progresso"}),s.jsxs("span",{className:"text-white font-semibold",children:[a.progress,"/",a.maxProgress]})]}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 mb-4",children:s.jsx("div",{className:`h-full bg-gradient-to-r ${c(a.rarity)} rounded-full`,style:{width:`${a.progress/a.maxProgress*100}%`}})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/70 text-sm",children:"Recompensa"}),s.jsxs("span",{className:"text-yellow-400 font-bold",children:["+",a.xpReward," XP"]})]}),a.unlocked&&s.jsx(m.div,{className:"mt-4 p-3 bg-success-green/20 border border-success-green/40 rounded-lg text-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:s.jsx("p",{className:"text-success-green font-semibold text-sm",children:"✅ Conquista Desbloqueada!"})})]})})})]})},nd={Brain:ve,Heart:Ze,Zap:de,Target:je,Moon:$r},ld=(r,e)=>{if(!e)return"from-white/20 to-white/10";switch(r){case"Brain":return"from-purple-500 to-indigo-600";case"Heart":return"from-pink-500 to-red-500";case"Zap":return"from-yellow-400 to-orange-500";case"Target":return"from-green-500 to-emerald-600";case"Moon":return"from-indigo-500 to-purple-600";default:return"from-royal-gold to-bright-gold"}},St=({title:r,icon:e,completed:t,description:a,children:i,nightOnly:o=!1})=>{const n=nd[e],l=ld(e,t);return s.jsxs(m.div,{className:`relative glass-card p-6 overflow-hidden group ${o?"bg-gradient-to-br from-deep-forest/60 to-sage-green/40":""} ${t?"ring-2 ring-success-green/30":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{scale:1.02,y:-2},transition:{type:"spring",stiffness:200,damping:20},children:[t&&s.jsxs(s.Fragment,{children:[s.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-br from-success-green/10 to-transparent rounded-xl",animate:{opacity:[.1,.2,.1],scale:[1,1.01,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"}}),s.jsx("div",{className:"absolute inset-0 overflow-hidden",children:[...Array(3)].map((c,u)=>s.jsx(m.div,{className:"absolute w-1 h-1 bg-success-green/40 rounded-full",animate:{y:[20,-20],x:[Math.random()*200,Math.random()*200],opacity:[0,1,0]},transition:{duration:4+Math.random()*2,repeat:1/0,delay:Math.random()*2},style:{left:`${Math.random()*100}%`,top:"100%"}},u))})]}),s.jsxs("div",{className:"relative z-10 flex items-center justify-between mb-6",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs(m.div,{className:`relative p-3 rounded-xl bg-gradient-to-br ${l} shadow-lg`,animate:{rotate:t?[0,5,-5,0]:0,scale:t?[1,1.05,1]:1},transition:{duration:2,repeat:t?1/0:0,ease:"easeInOut"},children:[s.jsx(n,{className:"w-7 h-7 text-white drop-shadow-sm"}),t&&s.jsx(m.div,{className:"absolute inset-0 bg-white/20 rounded-xl blur-sm",animate:{opacity:[.2,.4,.2]},transition:{duration:2,repeat:1/0}})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx(m.h3,{className:"text-white font-heading font-bold text-xl mb-1",animate:{color:t?["#ffffff","#10b981","#ffffff"]:"#ffffff"},transition:{duration:2,repeat:t?1/0:0},children:r}),s.jsx("p",{className:"text-pearl-white/80 text-sm leading-relaxed",children:a})]})]}),s.jsx(m.div,{className:"relative",animate:{scale:t?[1,1.1,1]:1,rotate:t?[0,360]:0},transition:{scale:{duration:1,repeat:t?1/0:0},rotate:{duration:2,repeat:t?1/0:0}},children:t?s.jsxs("div",{className:"relative",children:[s.jsx(he,{className:"w-10 h-10 text-success-green drop-shadow-lg"}),s.jsx(m.div,{className:"absolute inset-0 bg-success-green/30 rounded-full blur-md",animate:{scale:[.8,1.2,.8],opacity:[.3,.6,.3]},transition:{duration:2,repeat:1/0}})]}):s.jsx(oa,{className:"w-10 h-10 text-pearl-white/40"})})]}),s.jsx("div",{className:"relative z-10 space-y-5",children:i}),t&&s.jsx(m.div,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},className:"relative z-10 mt-6 p-4 bg-gradient-to-r from-success-green/20 to-emerald-500/20 border border-success-green/40 rounded-xl backdrop-blur-sm",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:s.jsx(ye,{className:"w-5 h-5 text-success-green"})}),s.jsx("p",{className:"text-success-green text-sm font-semibold",children:"Concluído! Parabéns pela dedicação."}),s.jsx(m.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},children:s.jsx(me,{className:"w-5 h-5 text-royal-gold fill-current"})})]})})]})},cd=["Eu sou capaz de alcançar meus objetivos financeiros","Cada ação que tomo me aproxima da prosperidade","Eu mereço abundância em todas as áreas da minha vida"],dd=({affirmations:r,onUpdate:e})=>{const t=a=>{r.includes(a)?e(r.filter(i=>i!==a)):e([...r,a])};return s.jsxs("div",{className:"space-y-3",children:[cd.map((a,i)=>{const o=r.includes(a);return s.jsx(m.div,{className:`p-4 rounded-lg border-2 transition-all cursor-pointer ${o?"bg-royal-gold/20 border-royal-gold":"bg-white/5 border-white/20 hover:border-white/40"}`,whileTap:{scale:.98},onClick:()=>t(a),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${o?"bg-royal-gold border-royal-gold":"border-white/40"}`,children:o&&s.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},children:s.jsx(Z,{className:"w-4 h-4 text-white"})})}),s.jsx("p",{className:`text-body-md transition-colors ${o?"text-white font-medium":"text-pearl-white/80"}`,children:a})]})},i)}),s.jsx("div",{className:"mt-4 p-3 bg-info-blue/20 border border-info-blue/30 rounded-lg",children:s.jsx("p",{className:"text-info-blue text-sm",children:"💡 Dica: Leia cada afirmação em voz alta com convicção para potencializar o efeito."})})]})},ud=[{value:"anxious",label:"Ansioso(a)",emoji:"😰",color:"bg-warning-amber"},{value:"grateful",label:"Grato(a)",emoji:"🙏",color:"bg-success-green"},{value:"confident",label:"Confiante",emoji:"💪",color:"bg-royal-gold"},{value:"overwhelmed",label:"Sobrecarregado(a)",emoji:"😵",color:"bg-error-red"},{value:"peaceful",label:"Em Paz",emoji:"🕊️",color:"bg-sage-green"},{value:"motivated",label:"Motivado(a)",emoji:"🔥",color:"bg-info-blue"}],hd=({currentFeeling:r,trigger:e,onUpdate:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-2 gap-3",children:ud.map(a=>{const i=r===a.value;return s.jsxs(m.button,{className:`p-4 rounded-lg border-2 transition-all ${i?`${a.color} border-white shadow-lg`:"bg-white/5 border-white/20 hover:border-white/40"}`,whileTap:{scale:.95},onClick:()=>t(a.value,e),children:[s.jsx("div",{className:"text-2xl mb-2",children:a.emoji}),s.jsx("div",{className:`text-sm font-medium ${i?"text-white":"text-pearl-white/80"}`,children:a.label})]},a.value)})}),s.jsx(Xe,{children:r&&s.jsxs(m.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"O que desencadeou este sentimento? (opcional)"}),s.jsx("textarea",{className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-royal-gold resize-none",rows:3,placeholder:"Descreva brevemente o que causou este sentimento...",value:e,onChange:a=>t(r,a.target.value)})]})})]}),md=({onComplete:r,completed:e})=>{const[t,a]=j.useState(!1),[i,o]=j.useState(0),[n,l]=j.useState(60),c=j.useRef(null),u=()=>{e||(a(!0),o(0),l(60),c.current=setInterval(()=>{o(g=>{const f=g+1.6666666666666667;return f>=100?(a(!1),l(0),r(),c.current&&clearInterval(c.current),100):(l(Math.ceil(60-f/100*60)),f)})},1e3))},d=()=>{a(!1),c.current&&(clearInterval(c.current),c.current=null)},h=()=>{a(!1),o(0),l(60),c.current&&(clearInterval(c.current),c.current=null)},b=g=>{const f=Math.floor(g/60),y=g%60;return`${f}:${y.toString().padStart(2,"0")}`};return s.jsxs("div",{className:"text-center space-y-6",children:[s.jsxs("div",{className:"relative",children:[s.jsx(m.button,{className:`w-32 h-32 rounded-full shadow-2xl flex items-center justify-center relative overflow-hidden ${e?"bg-success-green":"bg-gradient-to-r from-royal-gold to-bright-gold"}`,whileTap:{scale:.95},whileHover:{scale:1.05},onClick:e?void 0:t?d:u,disabled:e,children:e?s.jsx("div",{className:"text-white",children:s.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},children:"✅"})}):t?s.jsx(Dr,{className:"w-12 h-12 text-white"}):s.jsx(Ca,{className:"w-12 h-12 text-white ml-2"})}),!e&&s.jsxs("svg",{className:"absolute inset-0 w-full h-full -rotate-90",children:[s.jsx("circle",{cx:"64",cy:"64",r:"60",fill:"none",stroke:"rgba(255, 255, 255, 0.2)",strokeWidth:"4"}),s.jsx(m.circle,{cx:"64",cy:"64",r:"60",fill:"none",stroke:"rgba(255, 255, 255, 0.8)",strokeWidth:"4",strokeDasharray:"377",strokeDashoffset:377-377*i/100,strokeLinecap:"round",transition:{duration:.5}})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-white font-heading font-semibold text-lg",children:e?"Estado Peak Ativado!":"Ativação do Estado Peak"}),s.jsx("p",{className:"text-pearl-white/80 text-sm",children:e?"Você completou sua sessão de respiração guiada":t?`Respiração guiada em andamento... ${b(n)}`:"Clique para iniciar sua sessão de 60 segundos"})]}),!e&&i>0&&s.jsxs(m.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"flex items-center justify-center space-x-2 mx-auto px-4 py-2 bg-white/10 rounded-full text-white hover:bg-white/20 transition-colors",onClick:h,children:[s.jsx(lo,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Reiniciar"})]}),!e&&!t&&s.jsx("div",{className:"p-4 bg-info-blue/20 border border-info-blue/30 rounded-lg",children:s.jsx("p",{className:"text-info-blue text-sm",children:"🧘‍♂️ Durante a sessão, respire profundamente e visualize seus objetivos sendo alcançados."})})]})},pd=({amv:r,completed:e,onUpdate:t})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-white text-sm font-medium",children:"Qual é sua Ação Mínima Viável para hoje?"}),s.jsx("textarea",{className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-royal-gold resize-none",rows:3,placeholder:"Ex: Enviar 3 currículos, fazer 30 min de exercício, ler 10 páginas...",value:r,onChange:a=>t(a.target.value,e)})]}),r&&s.jsxs(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/20",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(je,{className:"w-5 h-5 text-royal-gold"}),s.jsx("span",{className:"text-white text-sm font-medium",children:"Marcar como concluída"})]}),s.jsx(m.button,{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center transition-all ${e?"bg-success-green border-success-green":"border-white/40 hover:border-royal-gold"}`,whileTap:{scale:.9},onClick:()=>t(r,!e),children:e&&s.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:300},children:s.jsx(Z,{className:"w-5 h-5 text-white"})})})]}),s.jsx("div",{className:"p-3 bg-warning-amber/20 border border-warning-amber/30 rounded-lg",children:s.jsx("p",{className:"text-warning-amber text-sm",children:"⚡ Lembre-se: pequenas ações consistentes geram grandes transformações!"})})]}),fd=({data:r,onUpdate:e})=>{const t=[{key:"victory",label:"Qual foi sua maior vitória hoje?",placeholder:"Celebre suas conquistas, por menores que sejam...",icon:me,color:"text-royal-gold"},{key:"feedback",label:"O que você aprendeu hoje?",placeholder:"Que lição ou insight você teve hoje?",icon:co,color:"text-info-blue"},{key:"gratitude",label:"Pelo que você é grato hoje?",placeholder:"Liste 3 coisas pelas quais você é grato...",icon:Ze,color:"text-success-green"}];return s.jsxs("div",{className:"space-y-6",children:[t.map((a,i)=>{const o=a.icon;return s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:i*.1},className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(o,{className:`w-5 h-5 ${a.color}`}),s.jsx("label",{className:"block text-white text-sm font-medium",children:a.label})]}),s.jsx("textarea",{className:"w-full p-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-royal-gold resize-none",rows:3,placeholder:a.placeholder,value:r[a.key],onChange:n=>e(a.key,n.target.value)})]},a.key)}),s.jsx("div",{className:"p-4 bg-gradient-to-r from-deep-forest/50 to-sage-green/50 rounded-lg border border-royal-gold/30",children:s.jsx("p",{className:"text-royal-gold text-sm text-center",children:"🌙 A reflexão noturna é o momento de honrar sua jornada e preparar-se para um novo dia de transformação."})})]})},gd=()=>{const{dailyProtocol:r,updateDailyProtocol:e,addXP:t,incrementStreak:a,saveDailyProtocol:i}=G(),o=new Date().getHours()>=18,n=()=>{const{p1_affirmations:l,p2_feeling:c,p3_peak_state_completed:u,p4_completed:d}=r,h=l.length===3&&c&&u&&d;return o?h&&r.p5_victory&&r.p5_gratitude:h};return j.useEffect(()=>{const c=setTimeout(async()=>{try{await i()}catch(u){console.error("Failed to save protocol:",u)}},1e3);return()=>clearTimeout(c)},[r,i]),j.useEffect(()=>{if(n()){const l=new Date().toISOString().split("T")[0];localStorage.getItem("lastProtocolCompleted")!==l&&(t(50),a(),localStorage.setItem("lastProtocolCompleted",l))}},[r,t,a]),s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green pb-20",children:s.jsxs("div",{className:"px-4 py-6 space-y-6",children:[s.jsx(td,{}),s.jsx(sd,{}),s.jsx(rd,{}),s.jsx(id,{}),s.jsx(od,{}),s.jsx(St,{title:"P1 - Reprogramação do Pensamento",icon:"Brain",completed:r.p1_affirmations.length===3,description:"Reprograme sua mente com afirmações poderosas",children:s.jsx(dd,{affirmations:r.p1_affirmations,onUpdate:l=>e("p1_affirmations",l)})}),s.jsx(St,{title:"P2 - Registro de Sentimentos",icon:"Heart",completed:!!r.p2_feeling,description:"Identifique e registre seus sentimentos atuais",children:s.jsx(hd,{currentFeeling:r.p2_feeling,trigger:r.p2_trigger,onUpdate:(l,c)=>{e("p2_feeling",l),e("p2_trigger",c)}})}),s.jsx(St,{title:"P3 - Ativação do Estado Peak",icon:"Zap",completed:r.p3_peak_state_completed,description:"Ative seu estado emocional de alta performance",children:s.jsx(md,{onComplete:()=>e("p3_peak_state_completed",!0),completed:r.p3_peak_state_completed})}),s.jsx(St,{title:"P4 - Ação Mínima Viável",icon:"Target",completed:r.p4_completed,description:"Defina e execute uma ação concreta hoje",children:s.jsx(pd,{amv:r.p4_amv,completed:r.p4_completed,onUpdate:(l,c)=>{e("p4_amv",l),e("p4_completed",c)}})}),o&&s.jsx(St,{title:"P5 - Reflexão Noturna",icon:"Moon",completed:!!(r.p5_victory&&r.p5_gratitude),description:"Reflita sobre seu dia e celebre suas conquistas",nightOnly:!0,children:s.jsx(fd,{data:{victory:r.p5_victory,feedback:r.p5_feedback,gratitude:r.p5_gratitude},onUpdate:(l,c)=>e(`p5_${l}`,c)})}),n()&&s.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"glass-card p-6 text-center",children:[s.jsx(m.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-16 h-16 mx-auto mb-4 bg-gradient-to-r from-royal-gold to-bright-gold rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:"🎉"})}),s.jsx("h3",{className:"text-white text-xl font-heading font-bold mb-2",children:"Protocolo Completo!"}),s.jsx("p",{className:"text-pearl-white/80 text-body-md",children:"Parabéns! Você completou seu protocolo diário 5P. Continue assim!"})]})]})})};function yi(r,e){return function(){return r.apply(e,arguments)}}const{toString:xd}=Object.prototype,{getPrototypeOf:La}=Object,{iterator:Ts,toStringTag:bi}=Symbol,Ps=(r=>e=>{const t=xd.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Ne=r=>(r=r.toLowerCase(),e=>Ps(e)===r),Cs=r=>e=>typeof e===r,{isArray:jt}=Array,Ft=Cs("undefined");function Ht(r){return r!==null&&!Ft(r)&&r.constructor!==null&&!Ft(r.constructor)&&ne(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const wi=Ne("ArrayBuffer");function yd(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&wi(r.buffer),e}const bd=Cs("string"),ne=Cs("function"),vi=Cs("number"),Gt=r=>r!==null&&typeof r=="object",wd=r=>r===!0||r===!1,os=r=>{if(Ps(r)!=="object")return!1;const e=La(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(bi in r)&&!(Ts in r)},vd=r=>{if(!Gt(r)||Ht(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},jd=Ne("Date"),Nd=Ne("File"),_d=Ne("Blob"),Sd=Ne("FileList"),Ed=r=>Gt(r)&&ne(r.pipe),kd=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||ne(r.append)&&((e=Ps(r))==="formdata"||e==="object"&&ne(r.toString)&&r.toString()==="[object FormData]"))},Td=Ne("URLSearchParams"),[Pd,Cd,Ad,Id]=["ReadableStream","Request","Response","Headers"].map(Ne),Rd=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jt(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let a,i;if(typeof r!="object"&&(r=[r]),jt(r))for(a=0,i=r.length;a<i;a++)e.call(null,r[a],a,r);else{if(Ht(r))return;const o=t?Object.getOwnPropertyNames(r):Object.keys(r),n=o.length;let l;for(a=0;a<n;a++)l=o[a],e.call(null,r[l],l,r)}}function ji(r,e){if(Ht(r))return null;e=e.toLowerCase();const t=Object.keys(r);let a=t.length,i;for(;a-- >0;)if(i=t[a],e===i.toLowerCase())return i;return null}const Je=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ni=r=>!Ft(r)&&r!==Je;function Na(){const{caseless:r}=Ni(this)&&this||{},e={},t=(a,i)=>{const o=r&&ji(e,i)||i;os(e[o])&&os(a)?e[o]=Na(e[o],a):os(a)?e[o]=Na({},a):jt(a)?e[o]=a.slice():e[o]=a};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&Jt(arguments[a],t);return e}const Od=(r,e,t,{allOwnKeys:a}={})=>(Jt(e,(i,o)=>{t&&ne(i)?r[o]=yi(i,t):r[o]=i},{allOwnKeys:a}),r),Dd=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),$d=(r,e,t,a)=>{r.prototype=Object.create(e.prototype,a),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},Ld=(r,e,t,a)=>{let i,o,n;const l={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),o=i.length;o-- >0;)n=i[o],(!a||a(n,r,e))&&!l[n]&&(e[n]=r[n],l[n]=!0);r=t!==!1&&La(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},Md=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const a=r.indexOf(e,t);return a!==-1&&a===t},Ud=r=>{if(!r)return null;if(jt(r))return r;let e=r.length;if(!vi(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},qd=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&La(Uint8Array)),Fd=(r,e)=>{const a=(r&&r[Ts]).call(r);let i;for(;(i=a.next())&&!i.done;){const o=i.value;e.call(r,o[0],o[1])}},zd=(r,e)=>{let t;const a=[];for(;(t=r.exec(e))!==null;)a.push(t);return a},Bd=Ne("HTMLFormElement"),Vd=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,a,i){return a.toUpperCase()+i}),yr=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),Hd=Ne("RegExp"),_i=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),a={};Jt(t,(i,o)=>{let n;(n=e(i,o,r))!==!1&&(a[o]=n||i)}),Object.defineProperties(r,a)},Gd=r=>{_i(r,(e,t)=>{if(ne(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const a=r[t];if(ne(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},Jd=(r,e)=>{const t={},a=i=>{i.forEach(o=>{t[o]=!0})};return jt(r)?a(r):a(String(r).split(e)),t},Wd=()=>{},Kd=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function Qd(r){return!!(r&&ne(r.append)&&r[bi]==="FormData"&&r[Ts])}const Xd=r=>{const e=new Array(10),t=(a,i)=>{if(Gt(a)){if(e.indexOf(a)>=0)return;if(Ht(a))return a;if(!("toJSON"in a)){e[i]=a;const o=jt(a)?[]:{};return Jt(a,(n,l)=>{const c=t(n,i+1);!Ft(c)&&(o[l]=c)}),e[i]=void 0,o}}return a};return t(r,0)},Yd=Ne("AsyncFunction"),Zd=r=>r&&(Gt(r)||ne(r))&&ne(r.then)&&ne(r.catch),Si=((r,e)=>r?setImmediate:e?((t,a)=>(Je.addEventListener("message",({source:i,data:o})=>{i===Je&&o===t&&a.length&&a.shift()()},!1),i=>{a.push(i),Je.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",ne(Je.postMessage)),eu=typeof queueMicrotask<"u"?queueMicrotask.bind(Je):typeof process<"u"&&process.nextTick||Si,tu=r=>r!=null&&ne(r[Ts]),_={isArray:jt,isArrayBuffer:wi,isBuffer:Ht,isFormData:kd,isArrayBufferView:yd,isString:bd,isNumber:vi,isBoolean:wd,isObject:Gt,isPlainObject:os,isEmptyObject:vd,isReadableStream:Pd,isRequest:Cd,isResponse:Ad,isHeaders:Id,isUndefined:Ft,isDate:jd,isFile:Nd,isBlob:_d,isRegExp:Hd,isFunction:ne,isStream:Ed,isURLSearchParams:Td,isTypedArray:qd,isFileList:Sd,forEach:Jt,merge:Na,extend:Od,trim:Rd,stripBOM:Dd,inherits:$d,toFlatObject:Ld,kindOf:Ps,kindOfTest:Ne,endsWith:Md,toArray:Ud,forEachEntry:Fd,matchAll:zd,isHTMLForm:Bd,hasOwnProperty:yr,hasOwnProp:yr,reduceDescriptors:_i,freezeMethods:Gd,toObjectSet:Jd,toCamelCase:Vd,noop:Wd,toFiniteNumber:Kd,findKey:ji,global:Je,isContextDefined:Ni,isSpecCompliantForm:Qd,toJSONObject:Xd,isAsyncFn:Yd,isThenable:Zd,setImmediate:Si,asap:eu,isIterable:tu};function $(r,e,t,a,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),a&&(this.request=a),i&&(this.response=i,this.status=i.status?i.status:null)}_.inherits($,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:_.toJSONObject(this.config),code:this.code,status:this.status}}});const Ei=$.prototype,ki={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{ki[r]={value:r}});Object.defineProperties($,ki);Object.defineProperty(Ei,"isAxiosError",{value:!0});$.from=(r,e,t,a,i,o)=>{const n=Object.create(Ei);return _.toFlatObject(r,n,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),$.call(n,r.message,e,t,a,i),n.cause=r,n.name=r.name,o&&Object.assign(n,o),n};const su=null;function _a(r){return _.isPlainObject(r)||_.isArray(r)}function Ti(r){return _.endsWith(r,"[]")?r.slice(0,-2):r}function br(r,e,t){return r?r.concat(e).map(function(i,o){return i=Ti(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function au(r){return _.isArray(r)&&!r.some(_a)}const ru=_.toFlatObject(_,{},null,function(e){return/^is[A-Z]/.test(e)});function As(r,e,t){if(!_.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=_.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,p){return!_.isUndefined(p[y])});const a=t.metaTokens,i=t.visitor||d,o=t.dots,n=t.indexes,c=(t.Blob||typeof Blob<"u"&&Blob)&&_.isSpecCompliantForm(e);if(!_.isFunction(i))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(_.isDate(f))return f.toISOString();if(_.isBoolean(f))return f.toString();if(!c&&_.isBlob(f))throw new $("Blob is not supported. Use a Buffer instead.");return _.isArrayBuffer(f)||_.isTypedArray(f)?c&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,y,p){let N=f;if(f&&!p&&typeof f=="object"){if(_.endsWith(y,"{}"))y=a?y:y.slice(0,-2),f=JSON.stringify(f);else if(_.isArray(f)&&au(f)||(_.isFileList(f)||_.endsWith(y,"[]"))&&(N=_.toArray(f)))return y=Ti(y),N.forEach(function(x,v){!(_.isUndefined(x)||x===null)&&e.append(n===!0?br([y],v,o):n===null?y:y+"[]",u(x))}),!1}return _a(f)?!0:(e.append(br(p,y,o),u(f)),!1)}const h=[],b=Object.assign(ru,{defaultVisitor:d,convertValue:u,isVisitable:_a});function g(f,y){if(!_.isUndefined(f)){if(h.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));h.push(f),_.forEach(f,function(N,w){(!(_.isUndefined(N)||N===null)&&i.call(e,N,_.isString(w)?w.trim():w,y,b))===!0&&g(N,y?y.concat(w):[w])}),h.pop()}}if(!_.isObject(r))throw new TypeError("data must be an object");return g(r),e}function wr(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function Ma(r,e){this._pairs=[],r&&As(r,this,e)}const Pi=Ma.prototype;Pi.append=function(e,t){this._pairs.push([e,t])};Pi.toString=function(e){const t=e?function(a){return e.call(this,a,wr)}:wr;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function iu(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ci(r,e,t){if(!e)return r;const a=t&&t.encode||iu;_.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=_.isURLSearchParams(e)?e.toString():new Ma(e,t).toString(a),o){const n=r.indexOf("#");n!==-1&&(r=r.slice(0,n)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class ou{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){_.forEach(this.handlers,function(a){a!==null&&e(a)})}}const vr=ou,Ai={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nu=typeof URLSearchParams<"u"?URLSearchParams:Ma,lu=typeof FormData<"u"?FormData:null,cu=typeof Blob<"u"?Blob:null,du={isBrowser:!0,classes:{URLSearchParams:nu,FormData:lu,Blob:cu},protocols:["http","https","file","blob","url","data"]},Ua=typeof window<"u"&&typeof document<"u",Sa=typeof navigator=="object"&&navigator||void 0,uu=Ua&&(!Sa||["ReactNative","NativeScript","NS"].indexOf(Sa.product)<0),hu=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),mu=Ua&&window.location.href||"http://localhost",pu=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ua,hasStandardBrowserEnv:uu,hasStandardBrowserWebWorkerEnv:hu,navigator:Sa,origin:mu},Symbol.toStringTag,{value:"Module"})),ee={...pu,...du};function fu(r,e){return As(r,new ee.classes.URLSearchParams,{visitor:function(t,a,i,o){return ee.isNode&&_.isBuffer(t)?(this.append(a,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function gu(r){return _.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xu(r){const e={},t=Object.keys(r);let a;const i=t.length;let o;for(a=0;a<i;a++)o=t[a],e[o]=r[o];return e}function Ii(r){function e(t,a,i,o){let n=t[o++];if(n==="__proto__")return!0;const l=Number.isFinite(+n),c=o>=t.length;return n=!n&&_.isArray(i)?i.length:n,c?(_.hasOwnProp(i,n)?i[n]=[i[n],a]:i[n]=a,!l):((!i[n]||!_.isObject(i[n]))&&(i[n]=[]),e(t,a,i[n],o)&&_.isArray(i[n])&&(i[n]=xu(i[n])),!l)}if(_.isFormData(r)&&_.isFunction(r.entries)){const t={};return _.forEachEntry(r,(a,i)=>{e(gu(a),i,t,0)}),t}return null}function yu(r,e,t){if(_.isString(r))try{return(e||JSON.parse)(r),_.trim(r)}catch(a){if(a.name!=="SyntaxError")throw a}return(t||JSON.stringify)(r)}const qa={transitional:Ai,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",i=a.indexOf("application/json")>-1,o=_.isObject(e);if(o&&_.isHTMLForm(e)&&(e=new FormData(e)),_.isFormData(e))return i?JSON.stringify(Ii(e)):e;if(_.isArrayBuffer(e)||_.isBuffer(e)||_.isStream(e)||_.isFile(e)||_.isBlob(e)||_.isReadableStream(e))return e;if(_.isArrayBufferView(e))return e.buffer;if(_.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return fu(e,this.formSerializer).toString();if((l=_.isFileList(e))||a.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return As(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),yu(e)):e}],transformResponse:[function(e){const t=this.transitional||qa.transitional,a=t&&t.forcedJSONParsing,i=this.responseType==="json";if(_.isResponse(e)||_.isReadableStream(e))return e;if(e&&_.isString(e)&&(a&&!this.responseType||i)){const n=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(n)throw l.name==="SyntaxError"?$.from(l,$.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ee.classes.FormData,Blob:ee.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};_.forEach(["delete","get","head","post","put","patch"],r=>{qa.headers[r]={}});const Fa=qa,bu=_.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wu=r=>{const e={};let t,a,i;return r&&r.split(`
`).forEach(function(n){i=n.indexOf(":"),t=n.substring(0,i).trim().toLowerCase(),a=n.substring(i+1).trim(),!(!t||e[t]&&bu[t])&&(t==="set-cookie"?e[t]?e[t].push(a):e[t]=[a]:e[t]=e[t]?e[t]+", "+a:a)}),e},jr=Symbol("internals");function Et(r){return r&&String(r).trim().toLowerCase()}function ns(r){return r===!1||r==null?r:_.isArray(r)?r.map(ns):String(r)}function vu(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=t.exec(r);)e[a[1]]=a[2];return e}const ju=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function sa(r,e,t,a,i){if(_.isFunction(a))return a.call(this,e,t);if(i&&(e=t),!!_.isString(e)){if(_.isString(a))return e.indexOf(a)!==-1;if(_.isRegExp(a))return a.test(e)}}function Nu(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,a)=>t.toUpperCase()+a)}function _u(r,e){const t=_.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(r,a+t,{value:function(i,o,n){return this[a].call(this,e,i,o,n)},configurable:!0})})}class Is{constructor(e){e&&this.set(e)}set(e,t,a){const i=this;function o(l,c,u){const d=Et(c);if(!d)throw new Error("header name must be a non-empty string");const h=_.findKey(i,d);(!h||i[h]===void 0||u===!0||u===void 0&&i[h]!==!1)&&(i[h||c]=ns(l))}const n=(l,c)=>_.forEach(l,(u,d)=>o(u,d,c));if(_.isPlainObject(e)||e instanceof this.constructor)n(e,t);else if(_.isString(e)&&(e=e.trim())&&!ju(e))n(wu(e),t);else if(_.isObject(e)&&_.isIterable(e)){let l={},c,u;for(const d of e){if(!_.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?_.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}n(l,t)}else e!=null&&o(t,e,a);return this}get(e,t){if(e=Et(e),e){const a=_.findKey(this,e);if(a){const i=this[a];if(!t)return i;if(t===!0)return vu(i);if(_.isFunction(t))return t.call(this,i,a);if(_.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Et(e),e){const a=_.findKey(this,e);return!!(a&&this[a]!==void 0&&(!t||sa(this,this[a],a,t)))}return!1}delete(e,t){const a=this;let i=!1;function o(n){if(n=Et(n),n){const l=_.findKey(a,n);l&&(!t||sa(a,a[l],l,t))&&(delete a[l],i=!0)}}return _.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let a=t.length,i=!1;for(;a--;){const o=t[a];(!e||sa(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,a={};return _.forEach(this,(i,o)=>{const n=_.findKey(a,o);if(n){t[n]=ns(i),delete t[o];return}const l=e?Nu(o):String(o).trim();l!==o&&delete t[o],t[l]=ns(i),a[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return _.forEach(this,(a,i)=>{a!=null&&a!==!1&&(t[i]=e&&_.isArray(a)?a.join(", "):a)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const a=new this(e);return t.forEach(i=>a.set(i)),a}static accessor(e){const a=(this[jr]=this[jr]={accessors:{}}).accessors,i=this.prototype;function o(n){const l=Et(n);a[l]||(_u(i,n),a[l]=!0)}return _.isArray(e)?e.forEach(o):o(e),this}}Is.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);_.reduceDescriptors(Is.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(a){this[t]=a}}});_.freezeMethods(Is);const we=Is;function aa(r,e){const t=this||Fa,a=e||t,i=we.from(a.headers);let o=a.data;return _.forEach(r,function(l){o=l.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function Ri(r){return!!(r&&r.__CANCEL__)}function Nt(r,e,t){$.call(this,r??"canceled",$.ERR_CANCELED,e,t),this.name="CanceledError"}_.inherits(Nt,$,{__CANCEL__:!0});function Oi(r,e,t){const a=t.config.validateStatus;!t.status||!a||a(t.status)?r(t):e(new $("Request failed with status code "+t.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function Su(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function Eu(r,e){r=r||10;const t=new Array(r),a=new Array(r);let i=0,o=0,n;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),d=a[o];n||(n=u),t[i]=c,a[i]=u;let h=o,b=0;for(;h!==i;)b+=t[h++],h=h%r;if(i=(i+1)%r,i===o&&(o=(o+1)%r),u-n<e)return;const g=d&&u-d;return g?Math.round(b*1e3/g):void 0}}function ku(r,e){let t=0,a=1e3/e,i,o;const n=(u,d=Date.now())=>{t=d,i=null,o&&(clearTimeout(o),o=null),r(...u)};return[(...u)=>{const d=Date.now(),h=d-t;h>=a?n(u,d):(i=u,o||(o=setTimeout(()=>{o=null,n(i)},a-h)))},()=>i&&n(i)]}const fs=(r,e,t=3)=>{let a=0;const i=Eu(50,250);return ku(o=>{const n=o.loaded,l=o.lengthComputable?o.total:void 0,c=n-a,u=i(c),d=n<=l;a=n;const h={loaded:n,total:l,progress:l?n/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-n)/u:void 0,event:o,lengthComputable:l!=null,[e?"download":"upload"]:!0};r(h)},t)},Nr=(r,e)=>{const t=r!=null;return[a=>e[0]({lengthComputable:t,total:r,loaded:a}),e[1]]},_r=r=>(...e)=>_.asap(()=>r(...e)),Tu=ee.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,ee.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(ee.origin),ee.navigator&&/(msie|trident)/i.test(ee.navigator.userAgent)):()=>!0,Pu=ee.hasStandardBrowserEnv?{write(r,e,t,a,i,o){const n=[r+"="+encodeURIComponent(e)];_.isNumber(t)&&n.push("expires="+new Date(t).toGMTString()),_.isString(a)&&n.push("path="+a),_.isString(i)&&n.push("domain="+i),o===!0&&n.push("secure"),document.cookie=n.join("; ")},read(r){const e=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(r){this.write(r,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Cu(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function Au(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function Di(r,e,t){let a=!Cu(e);return r&&(a||t==!1)?Au(r,e):e}const Sr=r=>r instanceof we?{...r}:r;function tt(r,e){e=e||{};const t={};function a(u,d,h,b){return _.isPlainObject(u)&&_.isPlainObject(d)?_.merge.call({caseless:b},u,d):_.isPlainObject(d)?_.merge({},d):_.isArray(d)?d.slice():d}function i(u,d,h,b){if(_.isUndefined(d)){if(!_.isUndefined(u))return a(void 0,u,h,b)}else return a(u,d,h,b)}function o(u,d){if(!_.isUndefined(d))return a(void 0,d)}function n(u,d){if(_.isUndefined(d)){if(!_.isUndefined(u))return a(void 0,u)}else return a(void 0,d)}function l(u,d,h){if(h in e)return a(u,d);if(h in r)return a(void 0,u)}const c={url:o,method:o,data:o,baseURL:n,transformRequest:n,transformResponse:n,paramsSerializer:n,timeout:n,timeoutMessage:n,withCredentials:n,withXSRFToken:n,adapter:n,responseType:n,xsrfCookieName:n,xsrfHeaderName:n,onUploadProgress:n,onDownloadProgress:n,decompress:n,maxContentLength:n,maxBodyLength:n,beforeRedirect:n,transport:n,httpAgent:n,httpsAgent:n,cancelToken:n,socketPath:n,responseEncoding:n,validateStatus:l,headers:(u,d,h)=>i(Sr(u),Sr(d),h,!0)};return _.forEach(Object.keys({...r,...e}),function(d){const h=c[d]||i,b=h(r[d],e[d],d);_.isUndefined(b)&&h!==l||(t[d]=b)}),t}const $i=r=>{const e=tt({},r);let{data:t,withXSRFToken:a,xsrfHeaderName:i,xsrfCookieName:o,headers:n,auth:l}=e;e.headers=n=we.from(n),e.url=Ci(Di(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),l&&n.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(_.isFormData(t)){if(ee.hasStandardBrowserEnv||ee.hasStandardBrowserWebWorkerEnv)n.setContentType(void 0);else if((c=n.getContentType())!==!1){const[u,...d]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];n.setContentType([u||"multipart/form-data",...d].join("; "))}}if(ee.hasStandardBrowserEnv&&(a&&_.isFunction(a)&&(a=a(e)),a||a!==!1&&Tu(e.url))){const u=i&&o&&Pu.read(o);u&&n.set(i,u)}return e},Iu=typeof XMLHttpRequest<"u",Ru=Iu&&function(r){return new Promise(function(t,a){const i=$i(r);let o=i.data;const n=we.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,d,h,b,g,f;function y(){g&&g(),f&&f(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let p=new XMLHttpRequest;p.open(i.method.toUpperCase(),i.url,!0),p.timeout=i.timeout;function N(){if(!p)return;const x=we.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?p.responseText:p.response,status:p.status,statusText:p.statusText,headers:x,config:r,request:p};Oi(function(P){t(P),y()},function(P){a(P),y()},k),p=null}"onloadend"in p?p.onloadend=N:p.onreadystatechange=function(){!p||p.readyState!==4||p.status===0&&!(p.responseURL&&p.responseURL.indexOf("file:")===0)||setTimeout(N)},p.onabort=function(){p&&(a(new $("Request aborted",$.ECONNABORTED,r,p)),p=null)},p.onerror=function(){a(new $("Network Error",$.ERR_NETWORK,r,p)),p=null},p.ontimeout=function(){let v=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const k=i.transitional||Ai;i.timeoutErrorMessage&&(v=i.timeoutErrorMessage),a(new $(v,k.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,r,p)),p=null},o===void 0&&n.setContentType(null),"setRequestHeader"in p&&_.forEach(n.toJSON(),function(v,k){p.setRequestHeader(k,v)}),_.isUndefined(i.withCredentials)||(p.withCredentials=!!i.withCredentials),l&&l!=="json"&&(p.responseType=i.responseType),u&&([b,f]=fs(u,!0),p.addEventListener("progress",b)),c&&p.upload&&([h,g]=fs(c),p.upload.addEventListener("progress",h),p.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(d=x=>{p&&(a(!x||x.type?new Nt(null,r,p):x),p.abort(),p=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const w=Su(i.url);if(w&&ee.protocols.indexOf(w)===-1){a(new $("Unsupported protocol "+w+":",$.ERR_BAD_REQUEST,r));return}p.send(o||null)})},Ou=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let a=new AbortController,i;const o=function(u){if(!i){i=!0,l();const d=u instanceof Error?u:this.reason;a.abort(d instanceof $?d:new Nt(d instanceof Error?d.message:d))}};let n=e&&setTimeout(()=>{n=null,o(new $(`timeout ${e} of ms exceeded`,$.ETIMEDOUT))},e);const l=()=>{r&&(n&&clearTimeout(n),n=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),r=null)};r.forEach(u=>u.addEventListener("abort",o));const{signal:c}=a;return c.unsubscribe=()=>_.asap(l),c}},Du=Ou,$u=function*(r,e){let t=r.byteLength;if(!e||t<e){yield r;return}let a=0,i;for(;a<t;)i=a+e,yield r.slice(a,i),a=i},Lu=async function*(r,e){for await(const t of Mu(r))yield*$u(t,e)},Mu=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:a}=await e.read();if(t)break;yield a}}finally{await e.cancel()}},Er=(r,e,t,a)=>{const i=Lu(r,e);let o=0,n,l=c=>{n||(n=!0,a&&a(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await i.next();if(u){l(),c.close();return}let h=d.byteLength;if(t){let b=o+=h;t(b)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Rs=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Li=Rs&&typeof ReadableStream=="function",Uu=Rs&&(typeof TextEncoder=="function"?(r=>e=>r.encode(e))(new TextEncoder):async r=>new Uint8Array(await new Response(r).arrayBuffer())),Mi=(r,...e)=>{try{return!!r(...e)}catch{return!1}},qu=Li&&Mi(()=>{let r=!1;const e=new Request(ee.origin,{body:new ReadableStream,method:"POST",get duplex(){return r=!0,"half"}}).headers.has("Content-Type");return r&&!e}),kr=64*1024,Ea=Li&&Mi(()=>_.isReadableStream(new Response("").body)),gs={stream:Ea&&(r=>r.body)};Rs&&(r=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!gs[e]&&(gs[e]=_.isFunction(r[e])?t=>t[e]():(t,a)=>{throw new $(`Response type '${e}' is not supported`,$.ERR_NOT_SUPPORT,a)})})})(new Response);const Fu=async r=>{if(r==null)return 0;if(_.isBlob(r))return r.size;if(_.isSpecCompliantForm(r))return(await new Request(ee.origin,{method:"POST",body:r}).arrayBuffer()).byteLength;if(_.isArrayBufferView(r)||_.isArrayBuffer(r))return r.byteLength;if(_.isURLSearchParams(r)&&(r=r+""),_.isString(r))return(await Uu(r)).byteLength},zu=async(r,e)=>{const t=_.toFiniteNumber(r.getContentLength());return t??Fu(e)},Bu=Rs&&(async r=>{let{url:e,method:t,data:a,signal:i,cancelToken:o,timeout:n,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:d,withCredentials:h="same-origin",fetchOptions:b}=$i(r);u=u?(u+"").toLowerCase():"text";let g=Du([i,o&&o.toAbortSignal()],n),f;const y=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let p;try{if(c&&qu&&t!=="get"&&t!=="head"&&(p=await zu(d,a))!==0){let k=new Request(e,{method:"POST",body:a,duplex:"half"}),T;if(_.isFormData(a)&&(T=k.headers.get("content-type"))&&d.setContentType(T),k.body){const[P,R]=Nr(p,fs(_r(c)));a=Er(k.body,kr,P,R)}}_.isString(h)||(h=h?"include":"omit");const N="credentials"in Request.prototype;f=new Request(e,{...b,signal:g,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:N?h:void 0});let w=await fetch(f,b);const x=Ea&&(u==="stream"||u==="response");if(Ea&&(l||x&&y)){const k={};["status","statusText","headers"].forEach(C=>{k[C]=w[C]});const T=_.toFiniteNumber(w.headers.get("content-length")),[P,R]=l&&Nr(T,fs(_r(l),!0))||[];w=new Response(Er(w.body,kr,P,()=>{R&&R(),y&&y()}),k)}u=u||"text";let v=await gs[_.findKey(gs,u)||"text"](w,r);return!x&&y&&y(),await new Promise((k,T)=>{Oi(k,T,{data:v,headers:we.from(w.headers),status:w.status,statusText:w.statusText,config:r,request:f})})}catch(N){throw y&&y(),N&&N.name==="TypeError"&&/Load failed|fetch/i.test(N.message)?Object.assign(new $("Network Error",$.ERR_NETWORK,r,f),{cause:N.cause||N}):$.from(N,N&&N.code,r,f)}}),ka={http:su,xhr:Ru,fetch:Bu};_.forEach(ka,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const Tr=r=>`- ${r}`,Vu=r=>_.isFunction(r)||r===null||r===!1,Ui={getAdapter:r=>{r=_.isArray(r)?r:[r];const{length:e}=r;let t,a;const i={};for(let o=0;o<e;o++){t=r[o];let n;if(a=t,!Vu(t)&&(a=ka[(n=String(t)).toLowerCase()],a===void 0))throw new $(`Unknown adapter '${n}'`);if(a)break;i[n||"#"+o]=a}if(!a){const o=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let n=e?o.length>1?`since :
`+o.map(Tr).join(`
`):" "+Tr(o[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return a},adapters:ka};function ra(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Nt(null,r)}function Pr(r){return ra(r),r.headers=we.from(r.headers),r.data=aa.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Ui.getAdapter(r.adapter||Fa.adapter)(r).then(function(a){return ra(r),a.data=aa.call(r,r.transformResponse,a),a.headers=we.from(a.headers),a},function(a){return Ri(a)||(ra(r),a&&a.response&&(a.response.data=aa.call(r,r.transformResponse,a.response),a.response.headers=we.from(a.response.headers))),Promise.reject(a)})}const qi="1.11.0",Os={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{Os[r]=function(a){return typeof a===r||"a"+(e<1?"n ":" ")+r}});const Cr={};Os.transitional=function(e,t,a){function i(o,n){return"[Axios v"+qi+"] Transitional option '"+o+"'"+n+(a?". "+a:"")}return(o,n,l)=>{if(e===!1)throw new $(i(n," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!Cr[n]&&(Cr[n]=!0,console.warn(i(n," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,n,l):!0}};Os.spelling=function(e){return(t,a)=>(console.warn(`${a} is likely a misspelling of ${e}`),!0)};function Hu(r,e,t){if(typeof r!="object")throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const a=Object.keys(r);let i=a.length;for(;i-- >0;){const o=a[i],n=e[o];if(n){const l=r[o],c=l===void 0||n(l,o,r);if(c!==!0)throw new $("option "+o+" must be "+c,$.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new $("Unknown option "+o,$.ERR_BAD_OPTION)}}const ls={assertOptions:Hu,validators:Os},_e=ls.validators;class xs{constructor(e){this.defaults=e||{},this.interceptors={request:new vr,response:new vr}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=tt(this.defaults,t);const{transitional:a,paramsSerializer:i,headers:o}=t;a!==void 0&&ls.assertOptions(a,{silentJSONParsing:_e.transitional(_e.boolean),forcedJSONParsing:_e.transitional(_e.boolean),clarifyTimeoutError:_e.transitional(_e.boolean)},!1),i!=null&&(_.isFunction(i)?t.paramsSerializer={serialize:i}:ls.assertOptions(i,{encode:_e.function,serialize:_e.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ls.assertOptions(t,{baseUrl:_e.spelling("baseURL"),withXsrfToken:_e.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let n=o&&_.merge(o.common,o[t.method]);o&&_.forEach(["delete","get","head","post","put","patch","common"],f=>{delete o[f]}),t.headers=we.concat(n,o);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(t)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,h=0,b;if(!c){const f=[Pr.bind(this),void 0];for(f.unshift(...l),f.push(...u),b=f.length,d=Promise.resolve(t);h<b;)d=d.then(f[h++],f[h++]);return d}b=l.length;let g=t;for(h=0;h<b;){const f=l[h++],y=l[h++];try{g=f(g)}catch(p){y.call(this,p);break}}try{d=Pr.call(this,g)}catch(f){return Promise.reject(f)}for(h=0,b=u.length;h<b;)d=d.then(u[h++],u[h++]);return d}getUri(e){e=tt(this.defaults,e);const t=Di(e.baseURL,e.url,e.allowAbsoluteUrls);return Ci(t,e.params,e.paramsSerializer)}}_.forEach(["delete","get","head","options"],function(e){xs.prototype[e]=function(t,a){return this.request(tt(a||{},{method:e,url:t,data:(a||{}).data}))}});_.forEach(["post","put","patch"],function(e){function t(a){return function(o,n,l){return this.request(tt(l||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:n}))}}xs.prototype[e]=t(),xs.prototype[e+"Form"]=t(!0)});const cs=xs;class za{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const a=this;this.promise.then(i=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](i);a._listeners=null}),this.promise.then=i=>{let o;const n=new Promise(l=>{a.subscribe(l),o=l}).then(i);return n.cancel=function(){a.unsubscribe(o)},n},e(function(o,n,l){a.reason||(a.reason=new Nt(o,n,l),t(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=a=>{e.abort(a)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new za(function(i){e=i}),cancel:e}}}const Gu=za;function Ju(r){return function(t){return r.apply(null,t)}}function Wu(r){return _.isObject(r)&&r.isAxiosError===!0}const Ta={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ta).forEach(([r,e])=>{Ta[e]=r});const Ku=Ta;function Fi(r){const e=new cs(r),t=yi(cs.prototype.request,e);return _.extend(t,cs.prototype,e,{allOwnKeys:!0}),_.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Fi(tt(r,i))},t}const K=Fi(Fa);K.Axios=cs;K.CanceledError=Nt;K.CancelToken=Gu;K.isCancel=Ri;K.VERSION=qi;K.toFormData=As;K.AxiosError=$;K.Cancel=K.CanceledError;K.all=function(e){return Promise.all(e)};K.spread=Ju;K.isAxiosError=Wu;K.mergeConfig=tt;K.AxiosHeaders=we;K.formToJSON=r=>Ii(_.isHTMLForm(r)?new FormData(r):r);K.getAdapter=Ui.getAdapter;K.HttpStatusCode=Ku;K.default=K;const Ar=K;class Ee{static instance;responseCallbacks=new Map;static getInstance(){return Ee.instance||(Ee.instance=new Ee),Ee.instance}registerCallback(e,t){this.responseCallbacks.set(e,t)}unregisterCallback(e){this.responseCallbacks.delete(e)}async processWebhookResponse(e){try{console.log("📨 Processando resposta do webhook:",e),await this.saveResponseToDatabase(e);const t=e.conversationId||e.userId,a=this.responseCallbacks.get(t);return a?(console.log("🎯 Callback encontrado para conversationId:",t),a(e),this.unregisterCallback(t)):console.log("⚠️ Nenhum callback registrado para conversationId:",t),{success:!0}}catch(t){return console.error("❌ Erro ao processar resposta do webhook:",t),{success:!1,error:t instanceof Error?t.message:"Erro desconhecido"}}}async saveResponseToDatabase(e){try{const{error:t}=await I.from("chat_messages").insert({user_id:e.userId,message:e.response,sender:"ai",metadata:{suggestions:e.suggestions,exercises:e.exercises,conversation_id:e.conversationId,webhook_response:!0},created_at:new Date(e.timestamp).toISOString()});if(t)throw console.error("Erro ao salvar mensagem no banco:",t),t;console.log("Resposta salva no banco de dados com sucesso")}catch(t){throw console.error("Erro ao salvar no banco:",t),t}}async pollForResponse(e){try{const t=await fetch(`http://localhost:3001/api/webhook/poll/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)return console.log(`⚠️ Polling response não OK: ${t.status} - ${t.statusText}`),null;const a=await t.json();return a.success&&a.data?(console.log("📥 Resposta encontrada via polling:",a.data),await this.processWebhookResponse(a.data),a.data):null}catch(t){return console.error("Erro no polling:",t),null}}startPolling(e,t,a=30){let i=0,o=!0;this.registerCallback(e,t);const n=async()=>{if(!o){this.unregisterCallback(e);return}i++,console.log(`🔄 Polling tentativa ${i}/${a} para conversationId: ${e}`);try{const l=await this.pollForResponse(e);if(l&&o){o=!1,console.log("✅ Resposta encontrada via polling, parando polling"),this.unregisterCallback(e),t(l);return}}catch(l){console.error("❌ Erro durante polling:",l)}i<a&&o?setTimeout(n,2e3):o&&(o=!1,this.unregisterCallback(e),console.log("⏰ Timeout no polling para conversationId:",e),t({response:"Desculpe, o tempo limite foi excedido. Tente novamente em alguns instantes.",suggestions:["Tente reformular sua pergunta","Verifique sua conexão com a internet"],exercises:[],userId:"",conversationId:e,timestamp:new Date().toISOString()}))};console.log("🚀 Iniciando sistema de polling para conversationId:",e),setTimeout(n,1e3)}static createWebhookEndpoint(){typeof window<"u"&&(window.addEventListener("message",e=>{e.data.type==="webhook_response"&&Ee.getInstance().processWebhookResponse(e.data.payload)}),window.addEventListener("storage",e=>{if(e.key==="webhook_response")try{const t=JSON.parse(e.newValue||"{}");Ee.getInstance().processWebhookResponse(t),localStorage.removeItem("webhook_response")}catch(t){console.error("Erro ao processar resposta do localStorage:",t)}}))}static async testWebhookResponse(e,t){const a={response:`Resposta de teste para: "${t}". Esta é uma simulação do webhook do n8n funcionando corretamente.`,suggestions:["Continue praticando o protocolo 5P","Mantenha o foco na gratidão","Lembre-se de respirar profundamente"],exercises:["Exercício de respiração 4-7-8","Meditação de 5 minutos","Journaling de gratidão"],userId:e,conversationId:`test_${Date.now()}`,timestamp:new Date().toISOString()};return await Ee.getInstance().processWebhookResponse(a)}}Ee.createWebhookEndpoint();class Qu{static webhookUrl="https://fator5ps.app.n8n.cloud/webhook-test/a95c2946-75d2-4e20-82bf-f04442a5cdbf";static productionWebhookUrl="https://fator5ps.app.n8n.cloud/webhook/a95c2946-75d2-4e20-82bf-f04442a5cdbf";static async getWebhookUrl(){if(this.productionWebhookUrl)return this.productionWebhookUrl;if(this.webhookUrl)return this.webhookUrl;throw new Error("Nenhuma URL de webhook configurada")}static generateSmartSuggestions(e){const t=e.toLowerCase();return t.includes("ansiedade")||t.includes("ansioso")||t.includes("preocupação")||t.includes("nervoso")?["Como posso usar a respiração para controlar a ansiedade?","Quais técnicas de mindfulness podem me ajudar agora?","Como identificar os gatilhos da minha ansiedade?"]:t.includes("estresse")||t.includes("estressado")||t.includes("pressão")||t.includes("sobrecarga")?["Como posso gerenciar melhor meu tempo e prioridades?","Quais exercícios de relaxamento são mais eficazes?","Como criar limites saudáveis no trabalho e vida pessoal?"]:t.includes("sono")||t.includes("dormir")||t.includes("insônia")||t.includes("cansaço")?["Que rotina noturna pode melhorar meu sono?","Como a meditação pode ajudar com a insônia?","Quais hábitos durante o dia afetam meu sono?"]:t.includes("relacionamento")||t.includes("família")||t.includes("amigos")||t.includes("conflito")?["Como melhorar a comunicação nos meus relacionamentos?","Quais são as bases de um relacionamento saudável?","Como lidar com conflitos de forma construtiva?"]:t.includes("autoestima")||t.includes("confiança")||t.includes("insegurança")||t.includes("valor")?["Como desenvolver uma autoimagem mais positiva?","Quais práticas diárias fortalecem a autoconfiança?","Como lidar com a autocrítica excessiva?"]:t.includes("protocolo")||t.includes("5p")||t.includes("prática")||t.includes("rotina")?["Como posso personalizar o protocolo 5P para minha rotina?","Qual a melhor hora do dia para praticar o protocolo?","Como manter a consistência na prática diária?"]:t.includes("trabalho")||t.includes("carreira")||t.includes("profissional")||t.includes("emprego")?["Como encontrar propósito no meu trabalho atual?","Quais estratégias ajudam com o burnout profissional?","Como equilibrar ambição e bem-estar mental?"]:t.includes("mudança")||t.includes("transição")||t.includes("novo")||t.includes("diferente")?["Como me adaptar melhor a mudanças na vida?","Quais são os primeiros passos para uma transformação pessoal?","Como lidar com a incerteza durante transições?"]:["Como posso aplicar o protocolo 5P na minha situação?","Que exercícios de mindfulness você recomenda?","Como posso desenvolver mais resiliência emocional?"]}static async sendMessage(e){try{const t=await this.getWebhookUrl();console.log("📤 Enviando mensagem para terapeuta AI (modo síncrono):",e),console.log("🔗 Usando webhook URL:",t);const a=`conv_${Date.now()}_${e.userId}`,i=await Ar.post(t,{message:e.message,user:{id:e.userId,name:e.userName,email:e.userEmail},context:e.context,conversationId:a,timestamp:new Date().toISOString(),platform:"essential-factor-5p"},{timeout:6e4});console.log("✅ Resposta síncrona do terapeuta AI:",i.data);const o=i.data.output||i.data.response||i.data.message,n=this.generateSmartSuggestions(e.message);return{response:o||"Resposta não encontrada no campo output",suggestions:i.data.suggestions||n,exercises:i.data.exercises||["Exercício de respiração 4-7-8","Meditação de 5 minutos"]}}catch(t){console.error("Erro ao comunicar com terapeuta AI:",t);const a=this.generateSmartSuggestions(e.message);return t.code==="ECONNABORTED"?{response:"Desculpe, o tempo limite foi excedido. Tente novamente em alguns instantes.",suggestions:a}:t.response?.status===404?{response:"Serviço temporariamente indisponível. Nossa equipe está trabalhando para resolver isso.",suggestions:a}:{response:"Desculpe, estou enfrentando dificuldades técnicas no momento. Que tal tentar novamente?",suggestions:a}}}static async sendMessageWithCallback(e,t){try{console.log("🔄 Usando método de callback (redirecionando para síncrono):",e);const a=await this.sendMessage(e);t(a)}catch(a){console.error("❌ Erro ao enviar mensagem via callback:",a),t({response:"Erro ao enviar mensagem. Tente novamente.",suggestions:["Verifique sua conexão","Tente reformular a pergunta"]})}}static async simulateWebhookResponse(e,t){setTimeout(async()=>{await Ee.testWebhookResponse(e,t)},2e3)}static async testConnection(){try{if(!this.webhookUrl)return console.warn("Webhook URL do n8n não configurada"),!1;const e=await Ar.post(this.webhookUrl,{message:"Teste de conexão",user:{id:"test-user",name:"Test User",email:"test@example.com"},test:!0,timestamp:new Date().toISOString()},{timeout:1e4});return console.log("Teste de conexão com n8n bem-sucedido:",e.status),e.status===200}catch(e){return console.error("Falha no teste de conexão com n8n:",e),!1}}}const Xu=()=>{const{user:r,dailyProtocol:e,onboardingResults:t,streak:a,level:i,xp:o,hasFullAccess:n,isAdmin:l}=G(),[c,u]=j.useState(1),h=(()=>{const P=at(r?.name||"amigo(a)"),R=i||1,C=a||0;if(l())return{content:`Olá ${P}! 👋 Sou seu Terapeuta Essencial AI com acesso administrativo completo. Estou aqui para te apoiar tanto no seu bem-estar pessoal quanto na gestão da plataforma. Posso te ajudar com análises de dados, suporte aos usuários, ou simplesmente conversar sobre seu equilíbrio mental e físico. Como posso te apoiar hoje?`,suggestions:["Análise de métricas da plataforma","Como está meu bem-estar pessoal?","Gerenciamento de conteúdo","Preciso de um momento de relaxamento"]};let S=`Olá ${P}! 🌟 Sou seu Terapeuta Essencial AI, seu companheiro dedicado ao seu bem-estar mental e físico. `;if(C>0&&(S+=`Vejo que você está em uma sequência incrível de ${C} dias! Isso mostra sua dedicação ao autocuidado. `),R>1&&(S+=`Você já alcançou o nível ${R} em sua jornada de transformação - que conquista! `),t){const A=(t.thought+t.feeling+t.emotion+t.action+t.result)/5;A<3?S+="Vejo que você tem enfrentado alguns desafios. ":A>4&&(S+="Que bom ver que você está em um bom momento! ")}S+="Estou aqui para te apoiar em cada passo, seja para fortalecer sua mente, cuidar do seu corpo, ou encontrar equilíbrio emocional. Vamos conversar sobre o que está em seu coração hoje?";let E=["Como está meu bem-estar hoje?","Preciso de técnicas de relaxamento","Como melhorar minha energia física?"];return t&&(t.emotion<3?E.push("Exercícios para acalmar a ansiedade"):t.thought<3?E.push("Como fortalecer minha autoconfiança?"):t.feeling<3?E.push("Estratégias para lidar com o estresse"):E.push("Como manter minha motivação?")),{content:S,suggestions:E}})(),[b,g]=j.useState([{id:"1",type:"ai",content:h.content,timestamp:new Date,suggestions:h.suggestions}]),[f,y]=j.useState(""),[p,N]=j.useState(!1),w=j.useRef(null),x=n()||l(),v=()=>{w.current?.scrollIntoView({behavior:"smooth"})};j.useEffect(()=>{v()},[b]);const k=async P=>{const R=P||f.trim();if(!R||p)return;const C={id:Date.now().toString(),type:"user",content:R,timestamp:new Date};g(E=>[...E,C]),y(""),N(!0);const S={id:"typing",type:"ai",content:"🤔 Pensando...",timestamp:new Date};g(E=>[...E,S]);try{console.log("📤 Enviando mensagem para terapeuta AI:",R);const E=await Qu.sendMessage({message:R,userId:r?.id||"",userName:r?.name||"",userEmail:r?.email||"",context:{dailyProtocol:e,userProgress:{streak:a,level:i,xp:o},onboardingResults:t}});g(q=>q.filter(O=>O.id!=="typing"));const A=c+1;u(A);const F={id:(Date.now()+1).toString(),type:"ai",content:E.response,timestamp:new Date,suggestions:A<=3?E.suggestions:void 0};g(q=>[...q,F])}catch(E){console.error("❌ Erro ao enviar mensagem:",E),g(q=>q.filter(O=>O.id!=="typing"));const A=c+1;u(A);const F={id:(Date.now()+2).toString(),type:"ai",content:"Desculpe, estou enfrentando dificuldades técnicas no momento. Tente novamente em alguns instantes.",timestamp:new Date,suggestions:A<=3?["Verifique sua conexão com a internet","Tente reformular sua pergunta","Entre em contato com o suporte se necessário"]:void 0};g(q=>[...q,F]),L.error("Erro ao comunicar com o terapeuta AI")}finally{N(!1)}},T=P=>{P.key==="Enter"&&!P.shiftKey&&(P.preventDefault(),k())};return x?s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex flex-col",children:[s.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center py-6 px-4",children:[s.jsx("h1",{className:"text-white text-2xl font-heading font-bold mb-2",children:"Terapeuta Essencial AI"}),s.jsx("p",{className:"text-pearl-white/80 text-sm",children:"Seu assistente pessoal para transformação mental"})]}),s.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto space-y-4",children:[b.map(P=>s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`flex ${P.type==="user"?"justify-end":"justify-start"}`,children:s.jsxs("div",{className:`flex items-start space-x-3 max-w-[80%] ${P.type==="user"?"flex-row-reverse space-x-reverse":""}`,children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${P.type==="user"?"bg-royal-gold":"bg-gradient-to-br from-sage-green to-forest-green"}`,children:P.type==="user"?s.jsx(gt,{className:"w-4 h-4 text-white"}):s.jsx(Ze,{className:"w-4 h-4 text-white"})}),s.jsxs("div",{className:`rounded-2xl px-4 py-3 ${P.type==="user"?"bg-royal-gold text-white":"glass-card text-white"}`,children:[s.jsx("p",{className:"text-sm leading-relaxed",children:P.content}),P.suggestions&&P.suggestions.length>0&&s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("p",{className:"text-xs text-pearl-white/80 font-medium",children:"Sugestões:"}),P.suggestions.map((R,C)=>s.jsx("button",{onClick:()=>k(R),className:"block w-full text-left text-xs bg-white/10 hover:bg-white/20 rounded-lg px-3 py-2 transition-colors",disabled:p,children:R},C))]})]})]})},P.id)),p&&s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-sage-green to-forest-green flex items-center justify-center",children:s.jsx(Ze,{className:"w-4 h-4 text-white"})}),s.jsx("div",{className:"glass-card px-4 py-3 rounded-2xl",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(uo,{className:"w-4 h-4 text-white animate-spin"}),s.jsx("span",{className:"text-white text-sm",children:"Pensando..."})]})})]})}),s.jsx("div",{ref:w})]})}),s.jsx("div",{className:"p-4 border-t border-white/10",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsxs("div",{className:"flex items-end space-x-3",children:[s.jsx("div",{className:"flex-1",children:s.jsx("textarea",{value:f,onChange:P=>y(P.target.value),onKeyPress:T,placeholder:"Digite sua mensagem...",className:"w-full bg-white/10 border border-white/20 rounded-2xl px-4 py-3 text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-transparent resize-none",rows:1,disabled:p})}),s.jsx(m.button,{onClick:()=>k(),disabled:!f.trim()||p,className:"w-12 h-12 bg-gradient-to-r from-royal-gold to-bright-gold rounded-full flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",whileTap:{scale:.95},children:s.jsx(ia,{className:"w-5 h-5 text-white"})})]})})})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 text-center max-w-md",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-royal-gold rounded-full flex items-center justify-center",children:s.jsx(ke,{className:"w-8 h-8 text-white"})}),s.jsx("h2",{className:"text-white text-2xl font-heading font-bold mb-4",children:"Recurso Premium"}),s.jsx("p",{className:"text-pearl-white/80 text-body-md mb-6",children:"O Terapeuta Essencial AI está disponível apenas para assinantes do plano Prosperous."}),s.jsx(m.button,{className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold",whileTap:{scale:.98},children:"Fazer upgrade"})]})})},Yu=()=>{const r=[{id:"abundance-21",title:"Jornada da Abundância",subtitle:"21 dias para reprogramar sua mente para a prosperidade",description:"Transforme sua relação com o dinheiro e abra-se para oportunidades infinitas",duration:"21 dias",difficulty:"Intermediário",color:"from-royal-gold to-bright-gold",progress:0,isUnlocked:!0,icon:"💰"},{id:"confidence-21",title:"Jornada da Confiança",subtitle:"21 dias para desenvolver autoestima inabalável",description:"Elimine crenças limitantes e desenvolva uma confiança genuína em si mesmo",duration:"21 dias",difficulty:"Iniciante",color:"from-sage-green to-forest-green",progress:0,isUnlocked:!1,requiresPremium:!0,icon:"💪"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[s.jsx("h1",{className:"text-white text-3xl font-heading font-bold mb-4",children:"Jornadas Guiadas"}),s.jsx("p",{className:"text-pearl-white/80 text-body-lg",children:"Transformação estruturada em 21 dias"})]}),s.jsx("div",{className:"space-y-6",children:r.map((e,t)=>s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:`glass-card p-6 relative overflow-hidden ${e.isUnlocked?"":"opacity-75"}`,children:[s.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${e.color} opacity-10`}),!e.isUnlocked&&s.jsx("div",{className:"absolute top-4 right-4",children:s.jsx("div",{className:"bg-royal-gold rounded-full p-2",children:s.jsx(Ye,{className:"w-4 h-4 text-white"})})}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"text-4xl",children:e.icon}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-white font-heading font-bold text-xl mb-2",children:e.title}),s.jsx("p",{className:"text-royal-gold font-medium text-sm mb-2",children:e.subtitle}),s.jsx("p",{className:"text-pearl-white/80 text-body-md mb-4",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ke,{className:"w-4 h-4 text-pearl-white/60"}),s.jsx("span",{className:"text-pearl-white/80",children:e.duration})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(me,{className:"w-4 h-4 text-pearl-white/60"}),s.jsx("span",{className:"text-pearl-white/80",children:e.difficulty})]})]}),e.progress>0&&s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Progresso"}),s.jsxs("span",{className:"text-royal-gold",children:[e.progress,"%"]})]}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:s.jsx("div",{className:`bg-gradient-to-r ${e.color} h-2 rounded-full`,style:{width:`${e.progress}%`}})})]})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(m.button,{className:`w-full py-3 rounded-lg font-semibold transition-all ${e.isUnlocked?`bg-gradient-to-r ${e.color} text-white hover:shadow-lg`:"bg-gray-500 text-gray-300 cursor-not-allowed"}`,whileTap:e.isUnlocked?{scale:.98}:{},disabled:!e.isUnlocked,children:e.isUnlocked?e.progress>0?"Continuar jornada":"Iniciar jornada":e.requiresPremium?"Requer plano Premium":"Bloqueado"})})]})]},e.id))})]})},Zu=()=>{const r=te(),{journeyId:e,dayNumber:t}=Rr();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:s.jsxs("button",{onClick:()=>r("/app/journeys"),className:"flex items-center space-x-2 text-pearl-white/80 hover:text-white transition-colors",children:[s.jsx(zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Voltar às jornadas"})]})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-8 text-center",children:[s.jsxs("h1",{className:"text-white text-2xl font-heading font-bold mb-4",children:["Jornada: ",e]}),s.jsxs("h2",{className:"text-royal-gold text-xl font-semibold mb-6",children:["Dia ",t]}),s.jsx("p",{className:"text-pearl-white/80 text-body-md",children:"Conteúdo do dia será implementado em breve"})]})]})},eh=()=>{const[r,e]=j.useState(""),[t,a]=j.useState("Todos"),i=["Todos","Prosperidade","Foco","Confiança","Sono","Relacionamentos"],n=[{id:"prosperity-meditation",title:"Meditação da Prosperidade",description:"Reprogramação profunda para abundância financeira",duration:"15:30",category:"Prosperidade",thumbnail:"💰",isPremium:!1,plays:1250,rating:4.9},{id:"focus-enhancement",title:"Potencializador de Foco",description:"Elimine distrações e maximize sua concentração",duration:"12:45",category:"Foco",thumbnail:"🎯",isPremium:!0,plays:980,rating:4.8},{id:"sleep-reprogramming",title:"Reprogramação no Sono",description:"Transforme sua mente enquanto dorme",duration:"45:00",category:"Sono",thumbnail:"🌙",isPremium:!0,plays:2100,rating:4.95}].filter(l=>{const c=t==="Todos"||l.category===t,u=l.title.toLowerCase().includes(r.toLowerCase())||l.description.toLowerCase().includes(r.toLowerCase());return c&&u});return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[s.jsx("h1",{className:"text-white text-3xl font-heading font-bold mb-4",children:"Cofre da Mente"}),s.jsx("p",{className:"text-pearl-white/80 text-body-lg",children:"Biblioteca de áudios para reprogramação mental"})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative mb-6",children:[s.jsx(ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-pearl-white/60"}),s.jsx("input",{type:"text",value:r,onChange:l=>e(l.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-full text-white placeholder-pearl-white/60 focus:outline-none focus:ring-2 focus:ring-royal-gold focus:border-royal-gold transition-all",placeholder:"Buscar áudios..."})]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"flex space-x-2 overflow-x-auto pb-2 mb-6",children:i.map(l=>s.jsx("button",{onClick:()=>a(l),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${t===l?"bg-royal-gold text-white":"bg-white/10 text-pearl-white/80 hover:bg-white/20"}`,children:l},l))}),s.jsx("div",{className:"space-y-4",children:n.map((l,c)=>s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3+c*.1},className:"glass-card p-4 flex items-center space-x-4",children:[s.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-royal-gold to-bright-gold rounded-lg flex items-center justify-center text-2xl relative",children:[l.thumbnail,l.isPremium&&s.jsx(ke,{className:"absolute -top-1 -right-1 w-4 h-4 text-royal-gold bg-white rounded-full p-0.5"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-white font-semibold text-lg mb-1",children:l.title}),s.jsx("p",{className:"text-pearl-white/70 text-sm mb-2",children:l.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-xs text-pearl-white/60",children:[s.jsx("span",{children:l.duration}),s.jsx("span",{children:l.category}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(me,{className:"w-3 h-3 fill-current text-royal-gold"}),s.jsx("span",{children:l.rating})]}),s.jsxs("span",{children:[l.plays.toLocaleString()," plays"]})]})]}),s.jsx(m.button,{className:"w-12 h-12 bg-royal-gold rounded-full flex items-center justify-center",whileTap:{scale:.9},whileHover:{scale:1.1},children:s.jsx(Ca,{className:"w-6 h-6 text-white ml-0.5"})})]},l.id))}),n.length===0&&s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:s.jsxs("p",{className:"text-pearl-white/60 text-lg",children:['Nenhum áudio encontrado para "',r,'" na categoria "',t,'"']})})]})},th=()=>{const r=te(),{audioId:e}=Rr();return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-6",children:s.jsxs("button",{onClick:()=>r("/app/mind-vault"),className:"flex items-center space-x-2 text-pearl-white/80 hover:text-white transition-colors",children:[s.jsx(zt,{className:"w-5 h-5"}),s.jsx("span",{children:"Voltar ao cofre"})]})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-8 text-center",children:[s.jsx("h1",{className:"text-white text-2xl font-heading font-bold mb-4",children:"Player de Áudio"}),s.jsxs("h2",{className:"text-royal-gold text-xl font-semibold mb-6",children:["Áudio ID: ",e]}),s.jsx("p",{className:"text-pearl-white/80 text-body-md",children:"Player avançado será implementado em breve"})]})]})},sh=()=>{const r=[{id:"mindset-transformation",title:"Transformação Mental Completa",author:"Dr. Essential Factor",description:"Guia completo para reprogramação mental usando o método 5P",pages:250,readTime:"4h 30min",rating:4.9,cover:"📚",category:"Desenvolvimento Pessoal"},{id:"prosperity-mindset",title:"Mentalidade da Prosperidade",author:"Prof. Abundância",description:"Como desenvolver uma relação saudável com o dinheiro e a abundância",pages:180,readTime:"3h 15min",rating:4.8,cover:"💎",category:"Finanças Pessoais"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[s.jsx("h1",{className:"text-white text-3xl font-heading font-bold mb-4",children:"Biblioteca Digital"}),s.jsx("p",{className:"text-pearl-white/80 text-body-lg",children:"Conhecimento transformador ao seu alcance"})]}),s.jsx("div",{className:"space-y-6",children:r.map((e,t)=>s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"glass-card p-6",children:[s.jsxs("div",{className:"flex space-x-4",children:[s.jsx("div",{className:"w-20 h-28 bg-gradient-to-br from-royal-gold to-bright-gold rounded-lg flex items-center justify-center text-3xl shadow-lg",children:e.cover}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-white font-heading font-bold text-xl mb-2",children:e.title}),s.jsxs("p",{className:"text-royal-gold font-medium text-sm mb-2",children:["por ",e.author]}),s.jsx("p",{className:"text-pearl-white/80 text-body-md mb-4",children:e.description}),s.jsxs("div",{className:"flex items-center space-x-4 text-sm text-pearl-white/70 mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Pa,{className:"w-4 h-4"}),s.jsxs("span",{children:[e.pages," páginas"]})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ke,{className:"w-4 h-4"}),s.jsx("span",{children:e.readTime})]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(me,{className:"w-4 h-4 fill-current text-royal-gold"}),s.jsx("span",{children:e.rating})]})]}),s.jsx("span",{className:"inline-block px-3 py-1 bg-sage-green/30 text-sage-green text-xs rounded-full",children:e.category})]})]}),s.jsx("div",{className:"mt-6",children:s.jsx(m.button,{className:"w-full bg-gradient-to-r from-royal-gold to-bright-gold text-white py-3 rounded-lg font-semibold hover:shadow-lg transition-all",whileTap:{scale:.98},children:"Começar leitura"})})]},e.id))})]})},ah=()=>{const{user:r,streak:e,longestStreak:t,level:a,xp:i,badges:o,totalDays:n}=G(),l=[{label:"Dias consecutivos",value:e,icon:ys,color:"text-royal-gold"},{label:"Recorde de streak",value:t,icon:qe,color:"text-success-green"},{label:"Nível atual",value:a,icon:me,color:"text-info-blue"},{label:"Total de dias",value:n,icon:gt,color:"text-pearl-white"}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4 pb-24",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-8",children:[s.jsx("h1",{className:"text-white text-3xl font-heading font-bold mb-4",children:"Meu Perfil"}),s.jsx("p",{className:"text-pearl-white/80 text-body-lg",children:"Acompanhe sua jornada de transformação"})]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"glass-card p-6 mb-6",children:s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-royal-gold to-bright-gold rounded-full flex items-center justify-center",children:s.jsx(gt,{className:"w-8 h-8 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-white font-heading font-bold text-xl",children:r?.name||"Usuário"}),s.jsx("p",{className:"text-pearl-white/70 text-sm",children:r?.email}),s.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[r?.subscription==="prosperous"&&s.jsxs("div",{className:"flex items-center space-x-1 bg-royal-gold/20 px-2 py-1 rounded-full",children:[s.jsx(ke,{className:"w-4 h-4 text-royal-gold"}),s.jsx("span",{className:"text-royal-gold text-xs font-medium",children:"Premium"})]}),s.jsx("div",{className:"bg-sage-green/20 px-2 py-1 rounded-full",children:s.jsxs("span",{className:"text-sage-green text-xs font-medium",children:["Nível ",a]})})]})]}),s.jsx(m.button,{className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",whileTap:{scale:.9},children:s.jsx(Lt,{className:"w-5 h-5 text-white"})})]})}),s.jsx("div",{className:"grid grid-cols-2 gap-4 mb-6",children:l.map((c,u)=>{const d=c.icon;return s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+u*.1},className:"glass-card p-4 text-center",children:[s.jsx(d,{className:`w-8 h-8 mx-auto mb-2 ${c.color}`}),s.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:c.value}),s.jsx("p",{className:"text-pearl-white/70 text-sm",children:c.label})]},c.label)})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"glass-card p-6 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h3",{className:"text-white font-heading font-semibold",children:"Experiência"}),s.jsxs("span",{className:"text-royal-gold font-bold",children:[i," XP"]})]}),s.jsx("div",{className:"w-full bg-white/20 rounded-full h-3",children:s.jsx(m.div,{className:"bg-gradient-to-r from-royal-gold to-bright-gold h-3 rounded-full",initial:{width:0},animate:{width:`${i%1e3/10}%`},transition:{duration:1,ease:"easeOut"}})}),s.jsxs("p",{className:"text-pearl-white/70 text-sm mt-2",children:[1e3-i%1e3," XP para o próximo nível"]})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"glass-card p-6",children:[s.jsxs("h3",{className:"text-white font-heading font-semibold mb-4",children:["Conquistas (",o.length,")"]}),o.length>0?s.jsx("div",{className:"grid grid-cols-3 gap-3",children:o.map((c,u)=>s.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.8+u*.1},className:"bg-gradient-to-br from-royal-gold to-bright-gold p-3 rounded-lg text-center",children:[s.jsx("div",{className:"text-2xl mb-1",children:"🏆"}),s.jsx("p",{className:"text-white text-xs font-medium",children:c})]},c))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(qe,{className:"w-12 h-12 text-pearl-white/40 mx-auto mb-3"}),s.jsx("p",{className:"text-pearl-white/60",children:"Continue sua jornada para desbloquear conquistas!"})]})]})]})},Ir=()=>{const[r,e]=j.useState("yearly"),t=[{id:"basic",name:"Plano Básico",price:{monthly:9.99,yearly:99.9},features:["Protocolo Diário 5P completo","Uma Jornada Guiada","Biblioteca básica de áudios","Progresso e estatísticas","Suporte por email"],color:"from-sage-green to-forest-green",popular:!1},{id:"complete",name:"Plano Completo",price:{monthly:19.97,yearly:199.7},features:["Tudo do Plano Básico","🌟 Terapeuta Essencial AI ilimitado","Todas as Jornadas Guiadas","Biblioteca completa de áudios","Análises avançadas de progresso","Relatórios personalizados","Suporte prioritário"],color:"from-royal-gold to-bright-gold",popular:!0}];return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest via-forest-green to-sage-green p-4 pb-24 relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-sage-green/20 via-transparent to-transparent"}),s.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-mint-accent/10 rounded-full blur-3xl animate-pulse"}),s.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-royal-gold/10 rounded-full blur-3xl animate-pulse delay-1000"}),s.jsx("div",{className:"absolute top-1/2 left-0 w-64 h-64 bg-bright-gold/5 rounded-full blur-2xl animate-bounce"}),s.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto",children:[s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-12",children:[s.jsxs(m.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{delay:.2,type:"spring",stiffness:100},className:"inline-flex items-center space-x-2 bg-gradient-to-r from-sage-green/30 to-mint-accent/30 backdrop-blur-sm border border-royal-gold/30 rounded-full px-6 py-2 mb-6",children:[s.jsx(ke,{className:"w-5 h-5 text-royal-gold"}),s.jsx("span",{className:"text-royal-gold font-semibold text-sm",children:"PLANOS PREMIUM"}),s.jsx(ye,{className:"w-4 h-4 text-bright-gold"})]}),s.jsx("h1",{className:"text-white text-4xl md:text-5xl font-heading font-bold mb-6 bg-gradient-to-r from-pearl-white via-gold-shimmer to-bright-gold bg-clip-text text-transparent",children:"Transforme Sua Vida"}),s.jsx("p",{className:"text-pearl-white/80 text-lg md:text-xl max-w-2xl mx-auto leading-relaxed",children:"Invista em você mesmo e desbloqueie seu potencial máximo com nossa plataforma premium de desenvolvimento pessoal"})]}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex justify-center mb-12",children:s.jsxs("div",{className:"bg-gradient-to-r from-forest-green/80 to-sage-green/80 backdrop-blur-xl p-1.5 rounded-2xl border border-royal-gold/20 shadow-2xl",children:[s.jsxs("button",{className:`px-8 py-3 rounded-xl transition-all duration-300 font-semibold relative ${r==="monthly"?"bg-gradient-to-r from-royal-gold to-bright-gold text-white shadow-lg transform scale-105":"text-pearl-white/80 hover:text-white hover:bg-white/5"}`,onClick:()=>e("monthly"),children:[r==="monthly"&&s.jsx(m.div,{layoutId:"billing-bg",className:"absolute inset-0 bg-gradient-to-r from-royal-gold to-bright-gold rounded-xl",transition:{type:"spring",stiffness:300,damping:30}}),s.jsx("span",{className:"relative z-10",children:"Mensal"})]}),s.jsxs("button",{className:`px-8 py-3 rounded-xl transition-all duration-300 font-semibold relative ${r==="yearly"?"bg-gradient-to-r from-royal-gold to-bright-gold text-white shadow-lg transform scale-105":"text-pearl-white/80 hover:text-white hover:bg-white/5"}`,onClick:()=>e("yearly"),children:[r==="yearly"&&s.jsx(m.div,{layoutId:"billing-bg",className:"absolute inset-0 bg-gradient-to-r from-royal-gold to-bright-gold rounded-xl",transition:{type:"spring",stiffness:300,damping:30}}),s.jsx("span",{className:"relative z-10",children:"Anual"}),s.jsxs(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-3 -right-3 bg-gradient-to-r from-bright-gold to-royal-gold text-deep-forest text-xs font-bold px-3 py-1 rounded-full shadow-lg z-30",children:[s.jsx(ye,{className:"w-3 h-3 inline mr-1"}),"-17%"]})]})]})}),s.jsx("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto px-4",children:t.map((a,i)=>s.jsxs(m.div,{initial:{opacity:0,y:30,scale:.9},animate:{opacity:1,y:0,scale:1},transition:{delay:.4+i*.2,type:"spring",stiffness:100},whileHover:{y:-8,transition:{duration:.3}},className:`relative h-fit group ${a.popular?"bg-gradient-to-br from-forest-green/40 via-sage-green/40 to-deep-forest/40 backdrop-blur-xl border-2 border-royal-gold/50 shadow-2xl shadow-royal-gold/25":"bg-gradient-to-br from-deep-forest/60 via-forest-green/60 to-sage-green/60 backdrop-blur-xl border border-mint-accent/30 shadow-xl"} rounded-3xl p-8 transition-all duration-500`,children:[a.popular&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-royal-gold/10 via-bright-gold/10 to-royal-gold/10 rounded-3xl blur-xl group-hover:blur-2xl transition-all duration-500"}),a.popular&&s.jsx(m.div,{initial:{scale:0,rotate:-10},animate:{scale:1,rotate:0},transition:{delay:.6,type:"spring",stiffness:200},className:"absolute -top-4 -right-4 bg-gradient-to-r from-royal-gold via-bright-gold to-gold-shimmer text-deep-forest px-6 py-2 text-sm font-bold rounded-2xl shadow-lg transform rotate-3 z-30",children:s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(ke,{className:"w-4 h-4"}),s.jsx("span",{children:"MAIS POPULAR"}),s.jsx(ye,{className:"w-3 h-3"})]})}),s.jsxs("div",{className:"relative z-10 space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(m.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6+i*.1},className:`inline-flex items-center space-x-2 px-4 py-2 rounded-full mb-4 ${a.popular?"bg-gradient-to-r from-royal-gold/30 to-bright-gold/30 border border-royal-gold/30":"bg-forest-green/50 border border-sage-green/30"}`,children:a.popular?s.jsxs(s.Fragment,{children:[s.jsx(ke,{className:"w-4 h-4 text-royal-gold"}),s.jsx("span",{className:"text-royal-gold font-semibold text-sm",children:"PREMIUM"})]}):s.jsxs(s.Fragment,{children:[s.jsx(be,{className:"w-4 h-4 text-mint-accent"}),s.jsx("span",{className:"text-mint-accent font-semibold text-sm",children:"ESSENCIAL"})]})}),s.jsx("h3",{className:`font-heading font-bold text-2xl mb-4 ${a.popular?"bg-gradient-to-r from-pearl-white via-gold-shimmer to-bright-gold bg-clip-text text-transparent":"text-white"}`,children:a.name}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"flex items-baseline justify-center space-x-2 mb-2",children:[s.jsxs("span",{className:`text-5xl font-bold ${a.popular?"bg-gradient-to-r from-pearl-white to-gold-shimmer bg-clip-text text-transparent":"text-white"}`,children:["R$ ",a.price[r].toFixed(2).replace(".",",")]}),s.jsxs("span",{className:"text-lg text-gray-400",children:["/",r==="monthly"?"mês":"ano"]})]}),r==="yearly"&&s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"text-sm text-gray-400 bg-slate-800/50 rounded-full px-3 py-1 inline-block",children:["R$ ",(a.price.yearly/12).toFixed(2).replace(".",",")," por mês"]})]})]}),s.jsx("div",{className:"space-y-4",children:a.features.map((o,n)=>s.jsxs(m.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.8+n*.1},className:"flex items-start space-x-3 group",children:[s.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 ${a.popular?"bg-gradient-to-r from-royal-gold to-bright-gold":"bg-gradient-to-r from-sage-green to-forest-green"}`,children:s.jsx(Z,{className:"w-3 h-3 text-white"})}),s.jsx("span",{className:"text-gray-200 text-sm leading-relaxed group-hover:text-white transition-colors duration-200",children:o})]},n))}),s.jsxs(m.button,{whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`w-full py-4 rounded-2xl font-bold text-lg transition-all duration-300 relative overflow-hidden group ${a.popular?"bg-gradient-to-r from-royal-gold via-bright-gold to-royal-gold text-white shadow-2xl shadow-royal-gold/25 hover:shadow-royal-gold/40":"bg-gradient-to-r from-forest-green to-sage-green text-white hover:from-sage-green hover:to-mint-accent shadow-xl"}`,children:[a.popular&&s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-royal-gold/20 via-bright-gold/20 to-royal-gold/20 group-hover:from-royal-gold/30 group-hover:via-bright-gold/30 group-hover:to-royal-gold/30 transition-all duration-300"}),s.jsx("div",{className:"relative z-10 flex items-center justify-center space-x-2",children:a.popular?s.jsxs(s.Fragment,{children:[s.jsx(de,{className:"w-5 h-5"}),s.jsx("span",{children:"Começar Agora"}),s.jsx(ye,{className:"w-4 h-4"})]}):s.jsxs(s.Fragment,{children:[s.jsx(be,{className:"w-5 h-5"}),s.jsx("span",{children:"Escolher Plano"})]})})]})]})]},a.id))}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"mt-12 mb-8 max-w-5xl mx-auto px-4",children:[s.jsx("h3",{className:"text-white font-heading font-bold text-2xl text-center mb-8",children:"Compare os Benefícios"}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-sage-green to-forest-green rounded-full"}),s.jsx("h4",{className:"text-white font-heading font-bold text-xl",children:"Plano Básico - Ideal para Iniciantes"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Protocolo Diário 5P Completo"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Transforme seus dias com nossa metodologia comprovada de 5 pilares para bem-estar mental e físico"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Uma Jornada Guiada"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Acesso a uma jornada completa de autoconhecimento com exercícios práticos e reflexões profundas"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Biblioteca Básica de Áudios"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Meditações guiadas, relaxamentos e áudios motivacionais para diferentes momentos do seu dia"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Progresso e Estatísticas"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Acompanhe sua evolução com gráficos detalhados, streaks e conquistas que motivam sua jornada"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Suporte por Email"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Nossa equipe está sempre pronta para ajudar você em sua jornada de transformação pessoal"})]})]})]})]})]}),s.jsxs(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},className:"glass-card p-6 ring-2 ring-royal-gold/50",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[s.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-royal-gold to-bright-gold rounded-full"}),s.jsx("h4",{className:"text-white font-heading font-bold text-xl",children:"Plano Completo - Transformação Total"}),s.jsx("div",{className:"bg-royal-gold text-white px-3 py-1 text-xs font-bold rounded-full",children:"RECOMENDADO"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Tudo do Plano Básico +"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Todos os recursos fundamentais para começar sua jornada de transformação"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("div",{className:"w-5 h-5 flex items-center justify-center flex-shrink-0 mt-0.5",children:s.jsx("span",{className:"text-royal-gold text-lg",children:"🌟"})}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Terapeuta Essencial AI Ilimitado"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Conversas ilimitadas com nossa IA especializada em bem-estar, disponível 24/7 para te apoiar"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Todas as Jornadas Guiadas"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Acesso completo a todas as jornadas: ansiedade, autoestima, relacionamentos, propósito e mais"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Biblioteca Completa de Áudios"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Mais de 100 áudios premium: meditações avançadas, hipnose, sons da natureza e muito mais"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Análises Avançadas de Progresso"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Insights profundos sobre seus padrões, tendências e áreas de crescimento com IA"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Relatórios Personalizados"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Relatórios semanais e mensais personalizados com recomendações específicas para você"})]})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(Z,{className:"w-5 h-5 text-success-green flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h5",{className:"text-pearl-white font-semibold text-sm mb-1",children:"Suporte Prioritário"}),s.jsx("p",{className:"text-pearl-white/70 text-xs",children:"Atendimento prioritário com resposta em até 2 horas e acesso direto aos especialistas"})]})]})]})]}),s.jsxs("div",{className:"mt-6 p-4 bg-royal-gold/10 rounded-lg border border-royal-gold/20",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[s.jsx("span",{className:"text-royal-gold text-lg",children:"💎"}),s.jsx("h6",{className:"text-royal-gold font-semibold text-sm",children:"Exclusivo do Plano Completo"})]}),s.jsx("p",{className:"text-pearl-white/80 text-xs",children:"Acesso antecipado a novos recursos, workshops exclusivos mensais e comunidade VIP de membros premium"})]})]})]})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"mt-12 mb-8 max-w-4xl mx-auto px-4",children:[s.jsx("h3",{className:"text-white font-heading font-bold text-2xl text-center mb-8",children:"O que nossos usuários dizem"}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.7},className:"glass-card p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-gold to-bright-gold rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"M"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:s.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((a,i)=>s.jsx(me,{className:"w-4 h-4 text-royal-gold fill-current"},i))})}),s.jsx(Ls,{className:"w-6 h-6 text-royal-gold/60 mb-2"}),s.jsx("p",{className:"text-pearl-white/90 text-sm mb-3 italic",children:'"Em apenas 3 semanas usando o Protocolo 5P, consegui quebrar um ciclo de ansiedade que me acompanhava há anos. O Terapeuta AI me ajudou a entender padrões que eu nem percebia. Hoje me sinto mais equilibrada e confiante."'}),s.jsxs("div",{className:"text-pearl-white/70 text-xs",children:[s.jsx("span",{className:"font-semibold",children:"Maria Silva"})," • Empresária • São Paulo"]})]})]})}),s.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.8},className:"glass-card p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-sage-green to-forest-green rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"R"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:s.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((a,i)=>s.jsx(me,{className:"w-4 h-4 text-royal-gold fill-current"},i))})}),s.jsx(Ls,{className:"w-6 h-6 text-royal-gold/60 mb-2"}),s.jsx("p",{className:"text-pearl-white/90 text-sm mb-3 italic",children:'"A plataforma transformou minha rotina matinal. O protocolo diário me deu estrutura e propósito. Minha produtividade aumentou 300% e finalmente consegui equilibrar trabalho e vida pessoal. Recomendo para todos!"'}),s.jsxs("div",{className:"text-pearl-white/70 text-xs",children:[s.jsx("span",{className:"font-semibold",children:"Roberto Santos"})," • Desenvolvedor • Rio de Janeiro"]})]})]})}),s.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.9},className:"glass-card p-6",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-royal-gold to-bright-gold rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-lg",children:"A"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex items-center space-x-2 mb-2",children:s.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((a,i)=>s.jsx(me,{className:"w-4 h-4 text-royal-gold fill-current"},i))})}),s.jsx(Ls,{className:"w-6 h-6 text-royal-gold/60 mb-2"}),s.jsx("p",{className:"text-pearl-white/90 text-sm mb-3 italic",children:'"Depois de meses tentando diferentes abordagens para melhorar meu bem-estar, encontrei na plataforma a solução completa. As jornadas guiadas me ajudaram a superar traumas antigos e hoje vivo com mais leveza e gratidão."'}),s.jsxs("div",{className:"text-pearl-white/70 text-xs",children:[s.jsx("span",{className:"font-semibold",children:"Ana Costa"})," • Psicóloga • Belo Horizonte"]})]})]})})]})]}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:1.2},className:"bg-gradient-to-r from-sage-green/40 via-forest-green/40 to-sage-green/40 backdrop-blur-xl border border-royal-gold/30 rounded-3xl p-8 text-center mt-12 shadow-2xl shadow-royal-gold/10 max-w-4xl mx-auto",children:[s.jsx(m.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:1.4,type:"spring",stiffness:200},className:"w-16 h-16 bg-gradient-to-r from-royal-gold to-bright-gold rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:s.jsx(mo,{className:"w-8 h-8 text-white"})}),s.jsx("h4",{className:"text-white font-heading font-bold text-2xl mb-4 bg-gradient-to-r from-gold-shimmer to-bright-gold bg-clip-text text-transparent",children:"🎁 7 Dias Completamente Grátis"}),s.jsx("p",{className:"text-pearl-white/80 text-lg leading-relaxed max-w-2xl mx-auto mb-6",children:"Experimente todos os recursos premium sem compromisso. Acesso total à plataforma, Terapeuta AI ilimitado e todas as jornadas guiadas."}),s.jsxs("div",{className:"flex items-center justify-center space-x-6 text-sm text-pearl-white/60",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(be,{className:"w-4 h-4 text-royal-gold"}),s.jsx("span",{children:"Sem cartão de crédito"})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(de,{className:"w-4 h-4 text-bright-gold"}),s.jsx("span",{children:"Cancele quando quiser"})]})]})]})]})," "]})};class We{static instance;apiKey="AIzaSyBt4vyuZZhxDd5Vz1I4WfkTzKWht7SdcNA";baseUrl="https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent";static getInstance(){return We.instance||(We.instance=new We),We.instance}async makeRequest(e){try{const t=await fetch(`${this.baseUrl}?key=${this.apiKey}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:e}]}]})});if(!t.ok)throw new Error(`Gemini API error: ${t.status} ${t.statusText}`);return(await t.json()).candidates[0]?.content?.parts[0]?.text||"Sem resposta disponível"}catch(t){throw console.error("Erro na requisição Gemini:",t),t}}async analyzeUserBehavior(e){const t=`
      Analise os seguintes dados de comportamento do usuário de uma plataforma de desenvolvimento pessoal:
      
      ${JSON.stringify(e,null,2)}
      
      Por favor, forneça uma análise detalhada incluindo:
      1. Padrões de uso identificados
      2. Insights sobre engajamento
      3. Recomendações para melhorar a experiência
      4. Métricas-chave calculadas
      5. Resumo executivo
      
      Responda em formato JSON com as seguintes chaves:
      {
        "insights": ["insight1", "insight2", ...],
        "recommendations": ["rec1", "rec2", ...],
        "metrics": {"engagement_score": 0.85, "retention_rate": 0.72, ...},
        "summary": "Resumo executivo da análise",
        "confidence": 0.9
      }
    `;try{const a=await this.makeRequest(t);return this.parseAnalysisResponse(a)}catch{return this.getDefaultAnalysis("user_behavior")}}async analyzeSystemPerformance(e){const t=`
      Analise as seguintes métricas de performance do sistema:
      
      ${JSON.stringify(e,null,2)}
      
      Forneça uma análise técnica incluindo:
      1. Identificação de gargalos
      2. Tendências de performance
      3. Recomendações de otimização
      4. Alertas de sistema
      5. Previsões de capacidade
      
      Responda em formato JSON com as seguintes chaves:
      {
        "insights": ["insight1", "insight2", ...],
        "recommendations": ["rec1", "rec2", ...],
        "metrics": {"performance_score": 0.78, "optimization_potential": 0.65, ...},
        "summary": "Resumo da análise de performance",
        "confidence": 0.85
      }
    `;try{const a=await this.makeRequest(t);return this.parseAnalysisResponse(a)}catch{return this.getDefaultAnalysis("system_performance")}}async generateContentInsights(e){const t=`
      Analise os seguintes dados de conteúdo e engajamento:
      
      ${JSON.stringify(e,null,2)}
      
      Forneça insights sobre:
      1. Conteúdo mais eficaz
      2. Padrões de engajamento
      3. Oportunidades de melhoria
      4. Sugestões de novos conteúdos
      5. Otimização de jornadas
      
      Responda em formato JSON com as seguintes chaves:
      {
        "insights": ["insight1", "insight2", ...],
        "recommendations": ["rec1", "rec2", ...],
        "metrics": {"content_effectiveness": 0.82, "engagement_rate": 0.67, ...},
        "summary": "Resumo dos insights de conteúdo",
        "confidence": 0.88
      }
    `;try{const a=await this.makeRequest(t);return this.parseAnalysisResponse(a)}catch{return this.getDefaultAnalysis("content_insights")}}async generatePredictiveAnalysis(e){const t=`
      Com base nos seguintes dados históricos, gere uma análise preditiva:
      
      ${JSON.stringify(e,null,2)}
      
      Forneça previsões sobre:
      1. Tendências futuras de uso
      2. Crescimento esperado
      3. Possíveis problemas
      4. Oportunidades de expansão
      5. Recomendações estratégicas
      
      Responda em formato JSON com as seguintes chaves:
      {
        "insights": ["insight1", "insight2", ...],
        "recommendations": ["rec1", "rec2", ...],
        "metrics": {"growth_prediction": 0.25, "risk_score": 0.15, ...},
        "summary": "Resumo da análise preditiva",
        "confidence": 0.75
      }
    `;try{const a=await this.makeRequest(t);return this.parseAnalysisResponse(a)}catch{return this.getDefaultAnalysis("predictive_analysis")}}async generateCustomAnalysis(e){const t=`
      Análise customizada do tipo: ${e.type}
      Contexto: ${e.context||"Não especificado"}
      
      Dados para análise:
      ${JSON.stringify(e.data,null,2)}
      
      Por favor, forneça uma análise detalhada e específica para este contexto.
      
      Responda em formato JSON com as seguintes chaves:
      {
        "insights": ["insight1", "insight2", ...],
        "recommendations": ["rec1", "rec2", ...],
        "metrics": {"key1": value1, "key2": value2, ...},
        "summary": "Resumo da análise customizada",
        "confidence": 0.8
      }
    `;try{const a=await this.makeRequest(t);return this.parseAnalysisResponse(a)}catch{return this.getDefaultAnalysis(e.type)}}async generateRecommendations(e,t){const a=`
      Contexto: ${e}
      Dados: ${JSON.stringify(t,null,2)}
      
      Gere 5 recomendações específicas e acionáveis baseadas nos dados fornecidos.
      Responda apenas com uma lista de recomendações, uma por linha, sem numeração.
    `;try{return(await this.makeRequest(a)).split(`
`).filter(o=>o.trim().length>0).slice(0,5)}catch{return["Monitore métricas-chave regularmente","Implemente feedback contínuo dos usuários","Otimize performance baseado em dados","Personalize experiência do usuário","Mantenha segurança e privacidade"]}}async summarizeData(e,t){const a=`
      Contexto: ${t}
      
      Dados para resumir:
      ${JSON.stringify(e,null,2)}
      
      Forneça um resumo executivo conciso (máximo 200 palavras) destacando os pontos mais importantes.
    `;try{return(await this.makeRequest(a)).trim()}catch{return"Resumo não disponível devido a erro na análise."}}parseAnalysisResponse(e){try{const t=e.match(/\{[\s\S]*\}/);if(t){const a=JSON.parse(t[0]);return{insights:a.insights||[],recommendations:a.recommendations||[],metrics:a.metrics||{},summary:a.summary||"Análise concluída",confidence:a.confidence||.7}}return this.parseTextResponse(e)}catch(t){return console.error("Erro ao parsear resposta Gemini:",t),this.getDefaultAnalysis("general")}}parseTextResponse(e){const t=e.split(`
`).filter(a=>a.trim().length>0);return{insights:t.slice(0,3).map(a=>a.replace(/^[\d\-\*\.]\s*/,"").trim()),recommendations:t.slice(3,6).map(a=>a.replace(/^[\d\-\*\.]\s*/,"").trim()),metrics:{analysis_score:.75},summary:t[0]||"Análise processada com sucesso",confidence:.7}}getDefaultAnalysis(e){const t={user_behavior:{insights:["Padrões de uso identificados nos dados","Engajamento varia por período do dia","Usuários preferem conteúdo interativo"],recommendations:["Implementar notificações personalizadas","Otimizar horários de conteúdo","Adicionar mais elementos interativos"],metrics:{engagement_score:.75,retention_rate:.68},summary:"Análise de comportamento do usuário concluída com dados limitados"},system_performance:{insights:["Performance geral dentro dos parâmetros","Picos de uso em horários específicos","Oportunidades de otimização identificadas"],recommendations:["Implementar cache mais eficiente","Otimizar consultas de banco de dados","Monitorar recursos em tempo real"],metrics:{performance_score:.78,optimization_potential:.65},summary:"Sistema operando adequadamente com espaço para melhorias"},content_insights:{insights:["Conteúdo educacional tem alta aceitação","Formatos visuais geram mais engajamento","Jornadas personalizadas são mais eficazes"],recommendations:["Expandir biblioteca de conteúdo visual","Criar mais jornadas personalizadas","Implementar sistema de feedback"],metrics:{content_effectiveness:.82,engagement_rate:.67},summary:"Conteúdo atual mostra boa aceitação com oportunidades de expansão"},predictive_analysis:{insights:["Tendência de crescimento positiva","Sazonalidade identificada nos dados","Potencial para expansão de recursos"],recommendations:["Preparar infraestrutura para crescimento","Desenvolver estratégias sazonais","Investir em novos recursos"],metrics:{growth_prediction:.25,risk_score:.15},summary:"Previsões indicam crescimento sustentável com baixo risco"}};return{...t[e]||t.user_behavior,confidence:.6}}async testConnection(){try{return(await this.makeRequest('Teste de conexão. Responda apenas "OK".')).toLowerCase().includes("ok")}catch(e){return console.error("Erro no teste de conexão Gemini:",e),!1}}}const rh=We.getInstance();class ih{geminiService;constructor(){this.geminiService=new We}async getSystemMetrics(){try{const[e,t,a]=await Promise.all([I.from("users").select("*"),I.from("daily_protocols").select("*"),I.from("chat_messages").select("*")]),i=e.data||[],o=t.data||[],n=a.data||[],l=i.length,c=i.filter(g=>{const f=new Date(g.updated_at);return(Date.now()-f.getTime())/(1e3*60*60*24)<=7}).length,u=o.length+n.length,d=this.calculateAverageSessionDuration(n),h=this.calculateCompletionRate(o);return{totalUsers:l,activeUsers:c,totalSessions:u,avgSessionDuration:d,completionRate:h,errorRate:.5,responseTime:150,cpuUsage:Math.random()*20+40,memoryUsage:Math.random()*15+60,diskUsage:Math.random()*10+45,networkLatency:Math.random()*50+20,uptime:99.9}}catch(e){throw console.error("Erro ao buscar métricas do sistema:",e),e}}async getUsers(){try{const{data:e,error:t}=await I.from("users").select(`
          *,
          user_progress(*),
          daily_protocols(count),
          journey_progress(count)
        `);if(t)throw t;return e.map(a=>({id:a.id,name:a.name,email:a.email,role:a.role,status:a.subscription_status==="active"?"active":"inactive",lastLogin:a.updated_at,joinDate:a.created_at,subscription:a.subscription||"essential",totalSessions:a.daily_protocols?.length||0,completedJourneys:a.journey_progress?.filter(i=>i.completed_at).length||0}))}catch(e){throw console.error("Erro ao buscar usuários:",e),e}}async getSystemConfigs(){try{const{data:e,error:t}=await I.from("system_configs").select("*").order("category",{ascending:!0});if(t&&t.code!=="PGRST116")throw t;return!e||e.length===0?[{id:"1",category:"general",key:"app_name",value:"Essential Factor",type:"string",description:"Nome da aplicação",required:!0,sensitive:!1},{id:"2",category:"general",key:"app_version",value:"1.0.0",type:"string",description:"Versão da aplicação",required:!0,sensitive:!1},{id:"3",category:"security",key:"session_timeout",value:"3600",type:"number",description:"Timeout da sessão em segundos",required:!0,sensitive:!1},{id:"4",category:"general",key:"maintenance_mode",value:"false",type:"boolean",description:"Modo de manutenção",required:!1,sensitive:!1},{id:"5",category:"general",key:"max_users",value:"10000",type:"number",description:"Número máximo de usuários",required:!1,sensitive:!1}]:e}catch(e){throw console.error("Erro ao buscar configurações:",e),e}}async updateSystemConfigs(e){try{for(const t of e){const{error:a}=await I.from("system_configs").upsert(t,{onConflict:"id"});a&&console.error(`Erro ao salvar configuração ${t.key}:`,a)}}catch(t){throw console.error("Erro ao atualizar configurações:",t),t}}async getServiceStatus(){try{return[{name:"Supabase Database",status:"online",uptime:"99.9%",lastCheck:new Date().toISOString(),responseTime:45,errorCount:0},{name:"Gemini AI",status:await this.testGeminiConnection()?"online":"offline",uptime:"99.5%",lastCheck:new Date().toISOString(),responseTime:120,errorCount:0},{name:"Authentication",status:"online",uptime:"100%",lastCheck:new Date().toISOString(),responseTime:30,errorCount:0}]}catch(e){throw console.error("Erro ao verificar status dos serviços:",e),e}}async getContentMetrics(){try{const{data:e,error:t}=await I.from("contents").select("*").order("created_at",{ascending:!1});if(t&&t.code!=="PGRST116")throw t;return!e||e.length===0?[]:e.map(a=>({id:a.id,title:a.title,type:a.type,status:a.status,author:a.author,createdAt:a.created_at,updatedAt:a.updated_at,publishedAt:a.published_at,views:a.views||0,likes:a.likes||0,rating:a.rating||0,category:a.category,tags:a.tags||[],description:a.description}))}catch(e){return console.error("Erro ao buscar conteúdos:",e),[]}}async deleteContent(e){try{const{error:t}=await I.from("contents").delete().eq("id",e);if(t)throw t}catch(t){throw console.error("Erro ao excluir conteúdo:",t),t}}async analyzeSystemData(){try{return"Analysis not available"}catch(e){return console.error("Erro na análise de dados:",e),"Não foi possível realizar a análise no momento."}}calculateAverageSessionDuration(e){return e.length===0?0:e.length*5/e.length}calculateCompletionRate(e){return e.length===0?0:e.filter(a=>a.p4_completed&&a.p3_peak_state_completed).length/e.length*100}async testGeminiConnection(){try{return await this.geminiService.testConnection(),!0}catch{return!1}}async canCollectAnalytics(e){try{return await Y.canCollectAnalytics(e)}catch(t){return console.error("Erro ao verificar consentimento de analytics:",t),!1}}async canSendMarketingEmails(e){try{return await Y.canSendMarketingEmails(e)}catch(t){return console.error("Erro ao verificar consentimento de marketing:",t),!1}}}const dt=new ih;class ft{static instance;activities=[];errors=[];sessionId;pageViews=new Map;apiCalls=0;errorCount=0;localMetrics=null;async getSystemMetrics(){return await dt.getSystemMetrics()}constructor(){this.sessionId=this.generateSessionId(),this.initializeMonitoring()}static getInstance(){return ft.instance||(ft.instance=new ft),ft.instance}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}initializeMonitoring(){if(typeof window<"u"){window.addEventListener("error",a=>{this.logError({id:this.generateId(),timestamp:new Date().toISOString(),error_type:"JavaScript Error",error_message:a.message,stack_trace:a.error?.stack,page:window.location.pathname,severity:"medium"})}),window.addEventListener("unhandledrejection",a=>{this.logError({id:this.generateId(),timestamp:new Date().toISOString(),error_type:"Unhandled Promise Rejection",error_message:a.reason?.message||"Unknown promise rejection",stack_trace:a.reason?.stack,page:window.location.pathname,severity:"high"})});let e=window.location.pathname;new MutationObserver(()=>{window.location.pathname!==e&&(e=window.location.pathname,this.trackPageView(e))}).observe(document.body,{childList:!0,subtree:!0}),setInterval(()=>{this.collectMetrics()},3e4),setInterval(()=>{this.saveToDatabase()},3e5)}}generateId(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}trackPageView(e,t){const a=this.pageViews.get(e)||0;this.pageViews.set(e,a+1);const i={user_id:t||"anonymous",action:"page_view",page:e,timestamp:new Date().toISOString(),session_id:this.sessionId,user_agent:navigator.userAgent};this.activities.push(i)}trackUserAction(e,t,a){const i={user_id:a||"anonymous",action:e,page:t,timestamp:new Date().toISOString(),session_id:this.sessionId,user_agent:navigator.userAgent};this.activities.push(i)}trackApiCall(e,t,a){this.apiCalls++,a>=400&&this.logError({id:this.generateId(),timestamp:new Date().toISOString(),error_type:"API Error",error_message:`${t} ${e} returned ${a}`,page:window.location.pathname,severity:a>=500?"high":"medium"})}logError(e){this.errors.push(e),this.errorCount++,e.severity==="critical"&&this.saveErrorToDatabase(e)}async collectMetrics(){const t={...await dt.getSystemMetrics(),sessionPageViews:Array.from(this.pageViews.values()).reduce((a,i)=>a+i,0),sessionApiCalls:this.apiCalls,sessionErrors:this.errorCount};this.localMetrics=t}async saveToDatabase(){try{if(this.activities.length>0&&(await I.from("user_activities").insert(this.activities),this.activities=[]),this.errors.length>0&&(await I.from("error_logs").insert(this.errors),this.errors=[]),this.localMetrics){const e={timestamp:new Date().toISOString(),session_id:this.sessionId,page_views:this.localMetrics.sessionPageViews,api_calls:this.localMetrics.sessionApiCalls,errors:this.localMetrics.sessionErrors};await I.from("session_metrics").insert([e])}}catch(e){console.error("Erro ao salvar dados de monitoramento:",e)}}async saveErrorToDatabase(e){try{await I.from("error_logs").insert([e])}catch(t){console.error("Erro ao salvar log de erro:",t)}}async getRealtimeMetrics(){try{return await dt.getSystemMetrics()}catch(e){return console.error("Erro ao buscar métricas em tempo real:",e),null}}getRecentActivities(e=50){return this.activities.slice(-e)}getRecentErrors(e=20){return this.errors.slice(-e)}getPageViewStats(){return Array.from(this.pageViews.entries()).map(([e,t])=>({page:e,views:t}))}async getHistoricalMetrics(e=24){const t=new Date(Date.now()-e*60*60*1e3).toISOString();try{const{data:a,error:i}=await I.from("session_metrics").select("*").gte("timestamp",t).order("timestamp",{ascending:!0});if(i)throw i;return a||[]}catch(a){return console.error("Erro ao buscar métricas históricas:",a),[]}}async getUserActivityReport(e,t=7){const a=new Date(Date.now()-t*24*60*60*1e3).toISOString();try{const{data:i,error:o}=await I.from("user_activities").select("*").eq("user_id",e).gte("timestamp",a).order("timestamp",{ascending:!1});if(o)throw o;return i||[]}catch(i){return console.error("Erro ao buscar relatório de atividade:",i),[]}}async getSystemHealth(){const e=await this.getRealtimeMetrics(),t=this.getRecentErrors(10),a=[];let i="healthy";e&&(e.cpuUsage>80&&(a.push("Alto uso de CPU"),i="warning"),e.memoryUsage>85&&(a.push("Alto uso de memória"),i="warning"),e.responseTime>2e3&&(a.push("Tempo de resposta elevado"),i="warning"),e.errorRate>5&&(a.push("Taxa de erro elevada"),i="critical"));const o=t.filter(n=>n.severity==="critical");return o.length>0&&(a.push(`${o.length} erros críticos`),i="critical"),{status:i,metrics:e,issues:a}}async testAllServices(){try{const e=await dt.getServiceStatus();return await Promise.all(e.map(async a=>{const i=Date.now();let o="online",n=0;try{if(a.name==="Supabase Database"){const{error:l}=await I.from("users").select("count").limit(1);n=Date.now()-i,o=l?"offline":"online"}else if(a.name==="Gemini AI"){const l=await dt.testGeminiConnection();n=Date.now()-i,o=l?"online":"offline"}else n=Math.random()*100+20,o=Math.random()>.1?"online":"warning"}catch{n=Date.now()-i,o="offline"}return{...a,status:o,responseTime:n,lastCheck:new Date().toISOString()}}))}catch(e){throw console.error("Erro ao testar serviços:",e),e}}async getServiceStatus(){return await dt.getServiceStatus()}}const ut=ft.getInstance();class Ds{cache;config;cleanupTimer;constructor(e={}){this.cache=new Map,this.config={defaultTTL:5*60*1e3,maxSize:100,cleanupInterval:60*1e3,...e},this.cleanupTimer=null,this.startCleanup()}set(e,t,a){const i=Date.now(),o=i+(a||this.config.defaultTTL);if(this.cache.size>=this.config.maxSize){const n=this.cache.keys().next().value;n&&this.cache.delete(n)}this.cache.set(e,{data:t,timestamp:i,expiry:o})}get(e){const t=this.cache.get(e);return t?Date.now()>t.expiry?(this.cache.delete(e),null):t.data:null}has(e){const t=this.cache.get(e);return t?Date.now()>t.expiry?(this.cache.delete(e),!1):!0:!1}delete(e){return this.cache.delete(e)}clear(){this.cache.clear()}getStats(){return{size:this.cache.size,maxSize:this.config.maxSize,hitRate:0,keys:Array.from(this.cache.keys())}}async getOrSet(e,t,a){const i=this.get(e);if(i!==null)return i;const o=await t();return this.set(e,o,a),o}invalidatePattern(e){let t=0;const a=new RegExp(e);for(const i of this.cache.keys())a.test(i)&&(this.cache.delete(i),t++);return t}startCleanup(){this.cleanupTimer&&clearInterval(this.cleanupTimer),this.cleanupTimer=setInterval(()=>{this.cleanup()},this.config.cleanupInterval)}cleanup(){const e=Date.now(),t=[];for(const[a,i]of this.cache.entries())e>i.expiry&&t.push(a);t.forEach(a=>this.cache.delete(a))}destroy(){this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null),this.cache.clear()}}const pt=new Ds({defaultTTL:30*1e3,maxSize:50}),oh=new Ds({defaultTTL:5*60*1e3,maxSize:200}),nh=new Ds({defaultTTL:10*60*1e3,maxSize:100}),lh=new Ds({defaultTTL:15*60*1e3,maxSize:50}),ss={REALTIME_METRICS:"metrics:realtime",HISTORICAL_METRICS:r=>`metrics:historical:${r}`,SYSTEM_HEALTH:"metrics:system_health",USER_ACTIVITIES:"metrics:user_activities",ERROR_LOGS:"metrics:error_logs",USER_LIST:(r,e)=>`users:list:${r}:${e}`,USER_DETAILS:r=>`users:details:${r}`,USER_STATS:"users:stats",CONTENT_LIST:(r,e)=>`content:list:${r}:${e}`,CONTENT_DETAILS:r=>`content:details:${r}`,CONTENT_STATS:"content:stats",SYSTEM_CONFIG:"system:config",SERVICE_STATUS:"system:services",GEMINI_INSIGHTS:r=>`system:gemini:${r}`},as={async apiCall(r,e,t,a){return r.getOrSet(e,t,a)},compute(r,e,t,a){const i=r.get(e);if(i!==null)return i;const o=t();return r.set(e,o,a),o},invalidateRelated(r){r.forEach(e=>{pt.invalidatePattern(e),oh.invalidatePattern(e),nh.invalidatePattern(e),lh.invalidatePattern(e)})}},ch=(r={})=>{const{updateInterval:e=3e4,enableAnalysis:t=!0,historicalHours:a=24}=r,[i,o]=j.useState({current:null,historical:[],activities:[],errors:[],health:{status:"healthy",issues:[]},analysis:null,isLoading:!0,lastUpdated:null}),[n,l]=j.useState(!1),c=j.useCallback(async()=>{try{const w=await as.apiCall(pt,ss.REALTIME_METRICS,()=>ut.getRealtimeMetrics(),3e4),x=await as.apiCall(pt,ss.HISTORICAL_METRICS(a),()=>ut.getHistoricalMetrics(a),12e4),v=ut.getRecentActivities(100),k=ut.getRecentErrors(50),T=await as.apiCall(pt,ss.SYSTEM_HEALTH,()=>ut.getSystemHealth(),3e4);o(P=>({...P,current:w,historical:x,activities:v,errors:k,health:T,isLoading:!1,lastUpdated:new Date}))}catch(w){console.error("Erro ao atualizar métricas:",w),o(x=>({...x,isLoading:!1}))}},[a]),u=j.useCallback(async()=>{if(!(!t||n)){l(!0);try{const w={metrics:i.historical.slice(-10),activities:i.activities.slice(-50),errors:i.errors.slice(-20),health:i.health},x=await as.apiCall(pt,ss.GEMINI_INSIGHTS("performance"),()=>rh.analyzeSystemPerformance([w]),3e5);o(v=>({...v,analysis:x}))}catch(w){console.error("Erro ao gerar análise:",w)}finally{l(!1)}}},[t,n,i.historical,i.activities,i.errors,i.health]);j.useEffect(()=>{c();const w=setInterval(c,e);return()=>clearInterval(w)},[c,e]),j.useEffect(()=>{if(!t)return;const w=setInterval(u,5*60*1e3);return()=>clearInterval(w)},[u,t]),j.useEffect(()=>{!i.isLoading&&i.historical.length>0&&!i.analysis&&t&&setTimeout(u,2e3)},[i.isLoading,i.historical.length,i.analysis,t,u]);const d=j.useCallback(()=>{pt.invalidatePattern("metrics:"),o(w=>({...w,isLoading:!0})),c()},[c]),h=j.useCallback(()=>{u()},[u]),b=j.useCallback((w,x,v)=>{ut.trackUserAction(w,x,v)},[]),g=j.useCallback((w,x=6)=>{const v=i.historical.slice(-x*2);if(v.length<2)return"stable";const k=v.map(C=>C[w]).filter(C=>typeof C=="number");if(k.length<2)return"stable";const T=k[0],R=(k[k.length-1]-T)/T*100;return R>10?"increasing":R<-10?"decreasing":"stable"},[i.historical]),f=j.useCallback(()=>{const w=new Map;return i.activities.filter(x=>x.action==="page_view").forEach(x=>{const v=w.get(x.page)||0;w.set(x.page,v+1)}),Array.from(w.entries()).map(([x,v])=>({page:x,views:v})).sort((x,v)=>v.views-x.views).slice(0,10)},[i.activities]),y=j.useCallback((w=30)=>{const x=new Date(Date.now()-w*60*1e3),v=i.activities.filter(T=>new Date(T.timestamp)>x);return new Set(v.map(T=>T.user_id)).size},[i.activities]),p=j.useCallback((w=1)=>{const x=new Date(Date.now()-w*60*60*1e3),v=i.errors.filter(T=>new Date(T.timestamp)>x),k=i.activities.filter(T=>new Date(T.timestamp)>x).length;return k>0?v.length/k*100:0},[i.errors,i.activities]),N=j.useCallback(()=>{if(!i.current)return 0;const w=Math.max(0,100-i.current.cpuUsage),x=Math.max(0,100-i.current.memoryUsage),v=Math.max(0,100-i.current.responseTime/50),k=Math.max(0,100-i.current.errorRate*10);return Math.round((w+x+v+k)/4)},[i.current]);return{metrics:i,analysisLoading:n,refreshMetrics:d,refreshAnalysis:h,trackCustomEvent:b,getMetricsTrend:g,getTopPages:f,getActiveUsers:y,getErrorRate:p,getPerformanceScore:N,isHealthy:i.health.status==="healthy",hasWarnings:i.health.status==="warning",isCritical:i.health.status==="critical",hasAnalysis:!!i.analysis&&!n}},dh=({className:r=""})=>{const{user:e}=G(),[t,a]=j.useState([]),[i,o]=j.useState(!1),[n,l]=j.useState("all"),[c,u]=j.useState(!1),d=j.useCallback(()=>[{id:"1",type:"error",title:"Alto Uso de Memória Detectado",message:"O sistema está usando 85% da memória disponível. Considere otimizar ou reiniciar serviços.",timestamp:new Date(Date.now()-3e5),read:!1,priority:"critical",category:"performance",actionUrl:"/app/admin/performance",actionLabel:"Ver Detalhes"},{id:"2",type:"warning",title:"Taxa de Cache Baixa",message:"A taxa de acerto do cache caiu para 65%. Performance pode estar comprometida.",timestamp:new Date(Date.now()-9e5),read:!1,priority:"high",category:"performance",actionUrl:"/app/admin/performance",actionLabel:"Otimizar Cache"},{id:"3",type:"success",title:"Backup Concluído",message:"Backup automático do banco de dados foi concluído com sucesso.",timestamp:new Date(Date.now()-18e5),read:!0,priority:"medium",category:"system"},{id:"4",type:"info",title:"Novo Usuário Registrado",message:"5 novos usuários se registraram na última hora.",timestamp:new Date(Date.now()-27e5),read:!1,priority:"low",category:"user",actionUrl:"/app/admin/users",actionLabel:"Ver Usuários"},{id:"5",type:"warning",title:"Tentativa de Login Suspeita",message:"Múltiplas tentativas de login falharam para o IP 192.168.1.100.",timestamp:new Date(Date.now()-36e5),read:!1,priority:"high",category:"security"},{id:"6",type:"info",title:"Conteúdo Publicado",message:'Nova jornada "Mindfulness Avançado" foi publicada e está disponível.',timestamp:new Date(Date.now()-72e5),read:!0,priority:"medium",category:"content",actionUrl:"/app/admin/content",actionLabel:"Ver Conteúdo"}],[]),h=j.useCallback(async()=>{u(!0);try{const v=d();a(v)}catch(v){console.error("Error loading notifications:",v)}finally{u(!1)}},[d]),b=j.useCallback(v=>{a(k=>k.map(T=>T.id===v?{...T,read:!0}:T))},[]),g=j.useCallback(()=>{a(v=>v.map(k=>({...k,read:!0})))},[]),f=j.useCallback(v=>{a(k=>k.filter(T=>T.id!==v))},[]),y=t.filter(v=>{switch(n){case"unread":return!v.read;case"high":return v.priority==="high"||v.priority==="critical";default:return!0}}),p=v=>{switch(v){case"success":return s.jsx(he,{className:"w-5 h-5 text-green-500"});case"warning":return s.jsx(Qe,{className:"w-5 h-5 text-yellow-500"});case"error":return s.jsx(po,{className:"w-5 h-5 text-red-500"});case"info":default:return s.jsx(us,{className:"w-5 h-5 text-blue-500"})}},N=v=>{switch(v){case"critical":return"border-l-red-500 bg-red-50";case"high":return"border-l-orange-500 bg-orange-50";case"medium":return"border-l-yellow-500 bg-yellow-50";case"low":default:return"border-l-blue-500 bg-blue-50"}},w=v=>{const T=new Date().getTime()-v.getTime(),P=Math.floor(T/(1e3*60)),R=Math.floor(T/(1e3*60*60)),C=Math.floor(T/(1e3*60*60*24));return P<1?"Agora":P<60?`${P}m atrás`:R<24?`${R}h atrás`:`${C}d atrás`},x=t.filter(v=>!v.read).length;return j.useEffect(()=>{if(e?.role==="admin"||e?.role==="super_admin"){h();const v=setInterval(h,3e4);return()=>clearInterval(v)}},[e?.role,h]),e?.role!=="admin"&&e?.role!=="super_admin"?null:s.jsxs("div",{className:`relative ${r}`,children:[s.jsxs("button",{onClick:()=>o(!i),className:"relative p-2 text-gray-600 hover:text-gray-900 transition-colors",children:[s.jsx(Or,{className:"w-6 h-6"}),x>0&&s.jsx(m.span,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:x>99?"99+":x})]}),s.jsx(Xe,{children:i&&s.jsxs(s.Fragment,{children:[s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-40",onClick:()=>o(!1)}),s.jsxs(m.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-0 top-full mt-2 w-96 bg-white rounded-lg shadow-xl border border-gray-200 z-50 max-h-96 overflow-hidden",children:[s.jsxs("div",{className:"p-4 border-b border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Notificações"}),s.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx($t,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l("all"),className:`px-3 py-1 text-sm rounded-full transition-colors ${n==="all"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Todas"}),s.jsxs("button",{onClick:()=>l("unread"),className:`px-3 py-1 text-sm rounded-full transition-colors ${n==="unread"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:["Não Lidas (",x,")"]}),s.jsx("button",{onClick:()=>l("high"),className:`px-3 py-1 text-sm rounded-full transition-colors ${n==="high"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Prioridade"})]}),x>0&&s.jsx("button",{onClick:g,className:"mt-2 text-sm text-blue-600 hover:text-blue-700",children:"Marcar todas como lidas"})]}),s.jsx("div",{className:"max-h-80 overflow-y-auto",children:c?s.jsx("div",{className:"p-4 text-center text-gray-500",children:"Carregando notificações..."}):y.length===0?s.jsx("div",{className:"p-4 text-center text-gray-500",children:n==="unread"?"Nenhuma notificação não lida":"Nenhuma notificação"}):s.jsx("div",{className:"divide-y divide-gray-100",children:y.map(v=>s.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:`p-4 hover:bg-gray-50 transition-colors border-l-4 ${N(v.priority)} ${v.read?"":"bg-blue-50"}`,onClick:()=>!v.read&&b(v.id),children:s.jsxs("div",{className:"flex items-start gap-3",children:[p(v.type),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("h4",{className:`text-sm font-medium text-gray-900 ${v.read?"":"font-semibold"}`,children:v.title}),s.jsx("span",{className:"text-xs text-gray-500",children:w(v.timestamp)})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:v.message}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${v.priority==="critical"?"bg-red-100 text-red-700":v.priority==="high"?"bg-orange-100 text-orange-700":v.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:v.category}),s.jsxs("div",{className:"flex items-center gap-2",children:[v.actionUrl&&s.jsx("a",{href:v.actionUrl,className:"text-xs text-blue-600 hover:text-blue-700",onClick:()=>o(!1),children:v.actionLabel||"Ver"}),s.jsx("button",{onClick:k=>{k.stopPropagation(),f(v.id)},className:"text-xs text-gray-400 hover:text-gray-600",children:s.jsx($t,{className:"w-3 h-3"})})]})]})]})]})},v.id))})})]})]})})]})},uh=()=>{const{user:r,isSuperAdmin:e}=G(),[t,a]=j.useState("overview"),i=te(),{metrics:o,getActiveUsers:n,getPerformanceScore:l,isHealthy:c,hasWarnings:u}=ch({updateInterval:6e4}),{isLoading:d,isAuthorized:h,error:b,logAction:g}=Mc();if(j.useEffect(()=>{!d&&h&&g("admin_panel_access",{tab:t})},[d,h,t,g]),d)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 text-center max-w-md",children:[s.jsx(Ga,{className:"w-16 h-16 mx-auto mb-4 text-royal-gold animate-spin"}),s.jsx("h2",{className:"text-white text-xl font-bold mb-2",children:"Verificando Acesso"}),s.jsx("p",{className:"text-pearl-white/80",children:"Validando suas credenciais administrativas..."})]})});if(!h||b)return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green flex items-center justify-center p-4",children:s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"glass-card p-8 text-center max-w-md",children:[s.jsx(be,{className:"w-16 h-16 mx-auto mb-4 text-error-red"}),s.jsx("h2",{className:"text-white text-xl font-bold mb-2",children:"Acesso Negado"}),s.jsx("p",{className:"text-pearl-white/80",children:b||"Você não tem permissão para acessar o painel administrativo."}),s.jsx("button",{onClick:()=>i("/dashboard"),className:"mt-4 bg-royal-gold hover:bg-bright-gold text-deep-teal px-6 py-2 rounded-lg font-semibold transition-colors",children:"Voltar ao Dashboard"})]})});const f=[{id:"overview",label:"Visão Geral",icon:la},{id:"users",label:"Usuários",icon:Ms},{id:"content",label:"Conteúdo",icon:Pa},{id:"ai",label:"IA & Webhooks",icon:ve},{id:"system",label:"Sistema",icon:Lt}],y=[{label:"Usuários Ativos",value:n(30).toString(),change:"+12%",icon:Ms,color:"text-success-green"},{label:"Performance",value:`${l()}%`,change:l()>80?"+5%":"-2%",icon:de,color:l()>80?"text-success-green":"text-warning-yellow"},{label:"Visualizações",value:(o.current?.totalUsers||0).toString(),change:"+8%",icon:Te,color:"text-royal-gold"},{label:"Status Sistema",value:c?"Saudável":u?"Atenção":"Crítico",change:c?"✓":u?"⚠":"✗",icon:c?he:u?Qe:na,color:c?"text-success-green":u?"text-warning-yellow":"text-error-red"}];return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green p-4",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-white text-3xl font-heading font-bold mb-2",children:"Painel Administrativo"}),s.jsxs("p",{className:"text-pearl-white/80",children:["Bem-vindo, ",r?.name," • ",e()?"Super Admin":"Admin"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx(dh,{}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ke,{className:"w-6 h-6 text-royal-gold"}),s.jsx("span",{className:"text-royal-gold font-semibold",children:e()?"Super Admin":"Admin"})]})]})]})}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:y.map((p,N)=>s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx(p.icon,{className:`w-8 h-8 ${p.color}`}),s.jsx("span",{className:`text-sm font-semibold ${p.color}`,children:p.change})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-2xl font-bold text-white mb-1",children:p.value}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:p.label})]})]},p.label))}),s.jsx(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"glass-card mb-6",children:s.jsx("div",{className:"flex overflow-x-auto",children:f.map(p=>s.jsxs("button",{onClick:()=>a(p.id),className:`flex items-center space-x-2 px-6 py-4 font-medium transition-colors whitespace-nowrap ${t===p.id?"text-royal-gold border-b-2 border-royal-gold":"text-pearl-white/80 hover:text-white"}`,children:[s.jsx(p.icon,{className:"w-5 h-5"}),s.jsx("span",{children:p.label})]},p.id))})}),s.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"glass-card p-8",children:[t==="overview"&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Visão Geral do Sistema"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Atividade Recente"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-success-green rounded-full"}),s.jsx("span",{className:"text-pearl-white/80 text-sm",children:"15 novos usuários registrados hoje"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-royal-gold rounded-full"}),s.jsx("span",{className:"text-pearl-white/80 text-sm",children:"234 protocolos diários completados"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-2 h-2 bg-bright-gold rounded-full"}),s.jsx("span",{className:"text-pearl-white/80 text-sm",children:"89 consultas ao Terapeuta AI"})]})]})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Status do Sistema"}),s.jsxs("div",{className:"space-y-3 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Supabase"}),s.jsx("span",{className:"text-success-green font-semibold",children:"Online"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Webhook N8N"}),s.jsx("span",{className:"text-success-green font-semibold",children:"Conectado"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Email Service"}),s.jsx("span",{className:"text-success-green font-semibold",children:"Funcionando"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-white/10 space-y-3",children:[s.jsxs(m.button,{onClick:()=>i("/app/admin/analytics"),className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center space-x-2 w-full justify-center",whileTap:{scale:.98},children:[s.jsx(la,{className:"w-5 h-5"}),s.jsx("span",{children:"📊 Analytics Avançado"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(Oe,{to:"/app/admin/realtime-metrics",className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center space-x-2 w-full justify-center",children:[s.jsx(Us,{className:"w-5 h-5"}),s.jsx("span",{children:"⚡ Métricas Tempo Real"})]}),s.jsxs(Oe,{to:"/app/admin/performance",className:"neuro-button bg-royal-purple hover:bg-royal-purple/80 text-white py-3 px-6 rounded-lg font-medium transition-colors flex items-center space-x-2 w-full justify-center",children:[s.jsx(de,{className:"w-5 h-5"}),s.jsx("span",{children:"📊 Análise de Performance"})]})]})]})]})]})]}),t==="users"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Gerenciamento de Usuários"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Ms,{className:"w-8 h-8 text-royal-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Total de Usuários"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Registrados na plataforma"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"1,247"}),s.jsx("p",{className:"text-success-green text-sm mt-2",children:"+23 esta semana"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Us,{className:"w-8 h-8 text-bright-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Usuários Ativos"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Últimos 30 dias"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:n(30*24*60)}),s.jsx("p",{className:"text-royal-gold text-sm mt-2",children:"Taxa: 78%"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(be,{className:"w-8 h-8 text-success-green"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Administradores"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Com acesso total"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"3"}),s.jsx("p",{className:"text-pearl-white/60 text-sm mt-2",children:"Ativos"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Ações Rápidas"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("button",{className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Adicionar Usuário"}),s.jsx("button",{className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Exportar Lista"}),s.jsx("button",{className:"neuro-button bg-success-green hover:bg-success-green/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Enviar Convites"}),s.jsx(Oe,{to:"/app/admin/users",className:"neuro-button bg-royal-purple hover:bg-royal-purple/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Gerenciar Usuários"})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Usuários Recentes"}),s.jsx("div",{className:"space-y-3",children:[{name:"Maria Silva",email:"maria@email.com",date:"2024-01-15",status:"Ativo"},{name:"João Santos",email:"joao@email.com",date:"2024-01-14",status:"Ativo"},{name:"Ana Costa",email:"ana@email.com",date:"2024-01-13",status:"Pendente"},{name:"Pedro Lima",email:"pedro@email.com",date:"2024-01-12",status:"Ativo"}].map((p,N)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:"w-10 h-10 bg-royal-gold/20 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-royal-gold font-semibold",children:p.name.charAt(0)})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:p.name}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:p.email})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:`text-sm font-medium ${p.status==="Ativo"?"text-success-green":"text-warning-yellow"}`,children:p.status}),s.jsx("p",{className:"text-pearl-white/60 text-xs",children:p.date})]})]},N))})]})]})]}),t==="content"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Gerenciamento de Conteúdo"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6 mb-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(kt,{className:"w-8 h-8 text-royal-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Jornadas"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Guiadas"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"12"}),s.jsx("p",{className:"text-success-green text-sm mt-2",children:"+2 este mês"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(fo,{className:"w-8 h-8 text-bright-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Áudios"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Biblioteca"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"48"}),s.jsx("p",{className:"text-royal-gold text-sm mt-2",children:"156h total"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(ca,{className:"w-8 h-8 text-success-green"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Templates"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Email"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"24"}),s.jsx("p",{className:"text-pearl-white/60 text-sm mt-2",children:"Ativos"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Te,{className:"w-8 h-8 text-royal-purple"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Visualizações"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Este mês"})]})]}),s.jsx("p",{className:"text-3xl font-bold text-white",children:"8.4K"}),s.jsx("p",{className:"text-success-green text-sm mt-2",children:"+18%"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Ações de Conteúdo"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("button",{className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Nova Jornada"}),s.jsx("button",{className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Upload Áudio"}),s.jsx("button",{className:"neuro-button bg-success-green hover:bg-success-green/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Criar Template"}),s.jsx(Oe,{to:"/app/admin/content",className:"neuro-button bg-royal-purple hover:bg-royal-purple/80 text-white py-3 px-4 rounded-lg transition-colors",children:"Gerenciar Conteúdo"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Conteúdo Mais Popular"}),s.jsx("div",{className:"space-y-3",children:[{title:"Jornada da Autoestima",type:"Jornada",views:"1.2K",rating:4.8},{title:"Meditação Matinal",type:"Áudio",views:"890",rating:4.9},{title:"Protocolo de Ansiedade",type:"Template",views:"756",rating:4.7},{title:"Respiração Consciente",type:"Áudio",views:"634",rating:4.6}].map((p,N)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-medium",children:p.title}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:p.type})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-royal-gold font-semibold",children:[p.views," views"]}),s.jsxs("p",{className:"text-success-green text-sm",children:["★ ",p.rating]})]})]},N))})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Atividade Recente"}),s.jsx("div",{className:"space-y-3",children:[{action:"Nova jornada criada",item:"Mindfulness Avançado",time:"2h atrás"},{action:"Áudio atualizado",item:"Relaxamento Profundo",time:"4h atrás"},{action:"Template publicado",item:"Boas-vindas Premium",time:"1d atrás"},{action:"Jornada arquivada",item:"Teste Beta v1",time:"2d atrás"}].map((p,N)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white text-sm",children:p.action}),s.jsx("p",{className:"text-pearl-white/60 text-xs",children:p.item})]}),s.jsx("p",{className:"text-pearl-white/60 text-xs",children:p.time})]},N))})]})]})]})]}),t==="ai"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"IA & Webhooks"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Terapeuta AI"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Status do Webhook N8N"}),s.jsx("span",{className:"text-success-green font-semibold",children:"Conectado"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"URL"}),s.jsx("span",{className:"text-pearl-white/60 text-sm",children:"https://fator5ps.app.n8n.cloud/webhook-test/..."})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-pearl-white/80",children:"Consultas hoje"}),s.jsx("span",{className:"text-royal-gold font-semibold",children:"89"})]})]})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Configurações"}),s.jsx("p",{className:"text-pearl-white/80 mb-4",children:"Configurações avançadas da IA e webhooks."}),s.jsx(m.button,{onClick:()=>i("/admin/webhook-test"),className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white py-2 px-4 rounded-lg font-medium transition-colors",whileTap:{scale:.98},children:"🔧 Testar Webhook N8N"})]})]})]}),t==="system"&&s.jsxs("div",{children:[s.jsx("h2",{className:"text-white text-2xl font-bold mb-6",children:"Configurações do Sistema"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(go,{className:`w-8 h-8 ${c?"text-success-green":u?"text-warning-yellow":"text-error-red"}`}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Status Servidor"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Monitoramento ativo"})]})]}),s.jsx("p",{className:`text-2xl font-bold ${c?"text-success-green":u?"text-warning-yellow":"text-error-red"}`,children:c?"Saudável":u?"Atenção":"Crítico"}),s.jsx("p",{className:"text-pearl-white/60 text-sm mt-2",children:"Uptime: 99.8%"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(ca,{className:"w-8 h-8 text-royal-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Banco de Dados"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Supabase PostgreSQL"})]})]}),s.jsx("p",{className:"text-2xl font-bold text-success-green",children:"Online"}),s.jsx("p",{className:"text-pearl-white/60 text-sm mt-2",children:"Latência: 45ms"})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(ve,{className:"w-8 h-8 text-bright-gold"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold",children:"Gemini AI"}),s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Sistema de análise"})]})]}),s.jsx("p",{className:"text-2xl font-bold text-success-green",children:"Ativo"}),s.jsx("p",{className:"text-pearl-white/60 text-sm mt-2",children:"API conectada"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Informações do Sistema"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Versão da Aplicação"}),s.jsx("p",{className:"text-white font-semibold",children:"2.1.0"})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Ambiente"}),s.jsx("p",{className:"text-white font-semibold",children:"Produção"})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"CPU"}),s.jsxs("p",{className:"text-white font-semibold",children:[(o.current?.cpuUsage||0).toFixed(1),"%"]})]}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Memória"}),s.jsxs("p",{className:"text-white font-semibold",children:[(o.current?.memoryUsage||0).toFixed(1),"%"]})]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-4",children:"Ferramentas de Sistema"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("button",{onClick:()=>i("/app/admin/realtime-metrics"),className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white py-3 px-4 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(Us,{className:"w-4 h-4"}),s.jsx("span",{children:"Monitoramento"})]}),s.jsxs("button",{className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white py-3 px-4 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(Ga,{className:"w-4 h-4"}),s.jsx("span",{children:"Backup"})]}),s.jsxs("button",{className:"neuro-button bg-success-green hover:bg-success-green/80 text-white py-3 px-4 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(be,{className:"w-4 h-4"}),s.jsx("span",{children:"Segurança"})]}),s.jsxs(Oe,{to:"/app/admin/settings",className:"neuro-button bg-royal-purple hover:bg-royal-purple/80 text-white py-3 px-4 rounded-lg transition-colors flex items-center space-x-2",children:[s.jsx(Lt,{className:"w-4 h-4"}),s.jsx("span",{children:"Configurar"})]})]})]}),e()&&s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[s.jsx(Qe,{className:"w-6 h-6 text-error-red"}),s.jsx("h3",{className:"text-error-red text-lg font-semibold",children:"Zona de Perigo"})]}),s.jsx("p",{className:"text-pearl-white/80 mb-4",children:"Configurações críticas do sistema. Use com extrema cautela."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("button",{className:"bg-error-red/20 hover:bg-error-red/30 text-error-red px-4 py-2 rounded-lg transition-colors border border-error-red/30",children:"Reset Database"}),s.jsx("button",{className:"bg-error-red/20 hover:bg-error-red/30 text-error-red px-4 py-2 rounded-lg transition-colors border border-error-red/30",children:"Clear All Data"}),s.jsx("button",{className:"bg-warning-yellow/20 hover:bg-warning-yellow/30 text-warning-yellow px-4 py-2 rounded-lg transition-colors border border-warning-yellow/30",children:"Maintenance Mode"}),s.jsx("button",{className:"bg-royal-purple/20 hover:bg-royal-purple/30 text-royal-purple px-4 py-2 rounded-lg transition-colors border border-royal-purple/30",children:"Export Logs"})]})]})]})]})]},t)]})})},hh=()=>{const{user:r}=G(),[e,t]=j.useState(null),[a,i]=j.useState([]),[o,n]=j.useState([]),[l,c]=j.useState(!0),[u,d]=j.useState(!1),[h,b]=j.useState("settings");j.useEffect(()=>{r?.id&&g()},[r?.id]);const g=async()=>{if(r?.id)try{c(!0);const[x,v]=await Promise.all([Y.getPrivacySettings(r.id),Y.getConsentHistory(r.id)]);t(x),i(v)}catch(x){console.error("Erro ao carregar dados de privacidade:",x)}finally{c(!1)}},f=async(x,v)=>{if(!(!r?.id||!e))try{d(!0);const k=await Y.updatePrivacySettings(r.id,{[x]:v});t(k);const T=await Y.getConsentHistory(r.id);i(T)}catch(k){console.error("Erro ao atualizar configuração:",k)}finally{d(!1)}},y=async()=>{if(r?.id)try{const x=await Y.requestDataExport(r.id);n(v=>[x,...v])}catch(x){console.error("Erro ao solicitar exportação:",x)}},p=async()=>{if(!(!r?.id||!window.confirm("Tem certeza que deseja solicitar a exclusão de todos os seus dados? Esta ação não pode ser desfeita.")))try{const v=await Y.requestDataDeletion(r.id);n(k=>[v,...k])}catch(v){console.error("Erro ao solicitar exclusão:",v)}},N=x=>x?s.jsx(he,{className:"w-5 h-5 text-success-green"}):s.jsx(na,{className:"w-5 h-5 text-red-400"}),w=x=>{switch(x){case"completed":return s.jsx(he,{className:"w-5 h-5 text-success-green"});case"processing":return s.jsx(Ke,{className:"w-5 h-5 text-bright-gold"});case"failed":return s.jsx(na,{className:"w-5 h-5 text-red-400"});default:return s.jsx(Ke,{className:"w-5 h-5 text-gray-400"})}};return l?s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-deep-navy flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Carregando configurações de privacidade..."})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-deep-navy p-6",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[s.jsxs("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[s.jsx(be,{className:"w-8 h-8 text-bright-gold"}),s.jsx("h1",{className:"text-3xl font-bold text-white",children:"Configurações de Privacidade"})]}),s.jsx("p",{className:"text-gray-300 max-w-2xl mx-auto",children:"Gerencie suas preferências de privacidade e controle como seus dados são utilizados. Estamos comprometidos com a proteção dos seus dados pessoais conforme a LGPD."})]}),s.jsx("div",{className:"flex space-x-1 mb-6",children:[{id:"settings",label:"Configurações",icon:Lt},{id:"history",label:"Histórico",icon:Ja},{id:"requests",label:"Solicitações",icon:kt}].map(({id:x,label:v,icon:k})=>s.jsxs("button",{onClick:()=>b(x),className:`flex items-center space-x-2 px-4 py-2 rounded-lg transition-all ${h===x?"bg-bright-gold text-deep-navy font-semibold":"bg-white/10 text-white hover:bg-white/20"}`,children:[s.jsx(k,{className:"w-4 h-4"}),s.jsx("span",{children:v})]},x))}),h==="settings"&&e&&s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:[s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[s.jsx(Ye,{className:"w-5 h-5 text-bright-gold"}),s.jsx("span",{children:"Consentimentos de Dados"})]}),s.jsx("div",{className:"space-y-4",children:[{key:"data_processing_consent",label:"Processamento de Dados",description:"Permitir o processamento dos seus dados para funcionalidades essenciais da plataforma",icon:be,required:!0},{key:"marketing_emails_consent",label:"Emails de Marketing",description:"Receber emails promocionais e informativos sobre novos recursos",icon:bt,required:!1},{key:"analytics_consent",label:"Coleta de Analytics",description:"Permitir coleta de dados de uso para melhorar a experiência da plataforma",icon:la,required:!1},{key:"cookies_consent",label:"Cookies",description:"Usar cookies para personalizar sua experiência e lembrar preferências",icon:ds,required:!1},{key:"ai_analysis_consent",label:"Análise por IA",description:"Permitir análise dos seus dados por IA para insights personalizados",icon:ve,required:!1}].map(({key:x,label:v,description:k,icon:T,required:P})=>s.jsxs("div",{className:"flex items-start space-x-4 p-4 bg-white/5 rounded-lg",children:[s.jsx(T,{className:"w-6 h-6 text-bright-gold mt-1"}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("h3",{className:"text-white font-medium",children:v}),P&&s.jsx("span",{className:"text-xs bg-red-500 text-white px-2 py-1 rounded",children:"Obrigatório"})]}),s.jsx("p",{className:"text-gray-300 text-sm mb-3",children:k}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e[x],onChange:R=>f(x,R.target.checked),disabled:u||P,className:"w-4 h-4 text-bright-gold bg-transparent border-2 border-gray-400 rounded focus:ring-bright-gold focus:ring-2"}),s.jsx("span",{className:"text-white text-sm",children:e[x]?"Consentimento concedido":"Consentimento negado"})]})]})]},x))})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[s.jsx(Ke,{className:"w-5 h-5 text-bright-gold"}),s.jsx("span",{children:"Retenção de Dados"})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("label",{className:"text-white font-medium min-w-0 flex-1",children:"Período de retenção de dados (dias):"}),s.jsxs("select",{value:e.data_retention_period,onChange:x=>f("data_retention_period",parseInt(x.target.value)),disabled:u,className:"bg-white/10 border border-white/20 rounded-lg px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-bright-gold",children:[s.jsx("option",{value:30,children:"30 dias"}),s.jsx("option",{value:90,children:"90 dias"}),s.jsx("option",{value:180,children:"180 dias"}),s.jsx("option",{value:365,children:"1 ano"}),s.jsx("option",{value:730,children:"2 anos"})]})]}),s.jsxs("div",{className:"text-sm text-gray-300",children:[s.jsx(us,{className:"w-4 h-4 inline mr-2"}),"Após este período, seus dados serão automaticamente anonimizados ou excluídos."]})]})]}),s.jsxs("div",{className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[s.jsx(kt,{className:"w-5 h-5 text-bright-gold"}),s.jsx("span",{children:"Seus Direitos"})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[s.jsxs("button",{onClick:y,className:"flex items-center space-x-3 p-4 bg-white/5 hover:bg-white/10 rounded-lg transition-all group",children:[s.jsx(Wa,{className:"w-6 h-6 text-bright-gold group-hover:scale-110 transition-transform"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-white font-medium",children:"Exportar Dados"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Baixe uma cópia de todos os seus dados"})]})]}),s.jsxs("button",{onClick:p,className:"flex items-center space-x-3 p-4 bg-red-500/10 hover:bg-red-500/20 rounded-lg transition-all group",children:[s.jsx(xo,{className:"w-6 h-6 text-red-400 group-hover:scale-110 transition-transform"}),s.jsxs("div",{className:"text-left",children:[s.jsx("h3",{className:"text-white font-medium",children:"Excluir Dados"}),s.jsx("p",{className:"text-gray-300 text-sm",children:"Solicite a exclusão permanente dos seus dados"})]})]})]})]})]}),h==="history"&&s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[s.jsx(Ja,{className:"w-5 h-5 text-bright-gold"}),s.jsx("span",{children:"Histórico de Consentimentos"})]}),a.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-300",children:"Nenhum histórico de consentimento encontrado."})]}):s.jsx("div",{className:"space-y-3",children:a.map(x=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/5 rounded-lg",children:[N(x.granted),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsx("span",{className:"text-white font-medium capitalize",children:x.consent_type.replace("_"," ")}),s.jsx("span",{className:`text-sm px-2 py-1 rounded ${x.granted?"bg-success-green/20 text-success-green":"bg-red-500/20 text-red-400"}`,children:x.granted?"Concedido":"Negado"})]}),s.jsx("p",{className:"text-gray-300 text-sm",children:new Date(x.granted_at).toLocaleString("pt-BR")})]}),s.jsxs("div",{className:"text-xs text-gray-400",children:["v",x.version]})]},x.id))})]}),h==="requests"&&s.jsxs(m.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center space-x-2",children:[s.jsx(kt,{className:"w-5 h-5 text-bright-gold"}),s.jsx("span",{children:"Solicitações de Dados"})]}),o.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(kt,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-300",children:"Nenhuma solicitação de dados encontrada."})]}):s.jsx("div",{className:"space-y-3",children:o.map(x=>s.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/5 rounded-lg",children:[w(x.status),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.jsxs("span",{className:"text-white font-medium capitalize",children:[x.request_type==="export"?"Exportação":"Exclusão"," de Dados"]}),s.jsx("span",{className:`text-sm px-2 py-1 rounded ${x.status==="completed"?"bg-success-green/20 text-success-green":x.status==="processing"?"bg-bright-gold/20 text-bright-gold":x.status==="failed"?"bg-red-500/20 text-red-400":"bg-gray-500/20 text-gray-400"}`,children:x.status==="completed"?"Concluído":x.status==="processing"?"Processando":x.status==="failed"?"Falhou":"Pendente"})]}),s.jsxs("p",{className:"text-gray-300 text-sm",children:["Solicitado em: ",new Date(x.requested_at).toLocaleString("pt-BR")]}),x.completed_at&&s.jsxs("p",{className:"text-gray-300 text-sm",children:["Concluído em: ",new Date(x.completed_at).toLocaleString("pt-BR")]})]}),x.download_url&&x.status==="completed"&&s.jsxs("a",{href:x.download_url,className:"flex items-center space-x-2 px-4 py-2 bg-bright-gold text-deep-navy rounded-lg hover:bg-bright-gold/90 transition-colors",children:[s.jsx(Wa,{className:"w-4 h-4"}),s.jsx("span",{children:"Baixar"})]})]},x.id))})]}),s.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-8 glass-card p-6",children:s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(us,{className:"w-6 h-6 text-bright-gold mt-1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold mb-2",children:"Sobre a Proteção dos Seus Dados"}),s.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:"Estamos comprometidos com a proteção da sua privacidade e seguimos rigorosamente as diretrizes da Lei Geral de Proteção de Dados (LGPD). Seus dados são processados apenas com o seu consentimento explícito e para as finalidades específicas que você autorizou. Você pode revogar seus consentimentos a qualquer momento e solicitar a exportação ou exclusão dos seus dados."})]})]})})]})})},mh=()=>{const r=te();return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green",children:s.jsxs("div",{className:"container mx-auto px-4 py-8",children:[s.jsxs("div",{className:"flex items-center mb-8",children:[s.jsxs("button",{onClick:()=>r(-1),className:"flex items-center text-white/80 hover:text-white transition-colors mr-4",children:[s.jsx(zt,{className:"w-5 h-5 mr-2"}),"Voltar"]}),s.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center",children:[s.jsx(be,{className:"w-8 h-8 mr-3 text-sage-green"}),"Política de Privacidade"]})]}),s.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-8 max-w-4xl mx-auto",children:s.jsxs("div",{className:"prose prose-invert max-w-none",children:[s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(yo,{className:"w-6 h-6 mr-2 text-sage-green"}),"1. Introdução"]}),s.jsx("p",{className:"text-white/90 leading-relaxed",children:"Esta Política de Privacidade descreve como coletamos, usamos, armazenamos e protegemos suas informações pessoais em conformidade com a Lei Geral de Proteção de Dados (LGPD - Lei 13.709/2018) e outras regulamentações aplicáveis."}),s.jsx("p",{className:"text-white/90 leading-relaxed mt-4",children:"Ao utilizar nossa plataforma, você concorda com as práticas descritas nesta política."})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(ca,{className:"w-6 h-6 mr-2 text-sage-green"}),"2. Dados Coletados"]}),s.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:"2.1 Dados Fornecidos por Você"}),s.jsxs("ul",{className:"text-white/90 space-y-2 mb-4",children:[s.jsx("li",{children:"• Nome completo e informações de contato"}),s.jsx("li",{children:"• Endereço de e-mail"}),s.jsx("li",{children:"• Informações de perfil e preferências"}),s.jsx("li",{children:"• Respostas a questionários e avaliações"}),s.jsx("li",{children:"• Conteúdo de conversas com nossa IA"})]}),s.jsx("h3",{className:"text-xl font-medium text-white mb-3",children:"2.2 Dados Coletados Automaticamente"}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsx("li",{children:"• Informações de uso da plataforma"}),s.jsx("li",{children:"• Dados de navegação e interação"}),s.jsx("li",{children:"• Endereço IP e informações do dispositivo"}),s.jsx("li",{children:"• Cookies e tecnologias similares"})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(Te,{className:"w-6 h-6 mr-2 text-sage-green"}),"3. Finalidades do Tratamento"]}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"Utilizamos seus dados pessoais para as seguintes finalidades:"}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsx("li",{children:"• Fornecer e personalizar nossos serviços"}),s.jsx("li",{children:"• Processar e responder às suas solicitações"}),s.jsx("li",{children:"• Melhorar a experiência do usuário"}),s.jsx("li",{children:"• Enviar comunicações relevantes (com seu consentimento)"}),s.jsx("li",{children:"• Cumprir obrigações legais e regulamentares"}),s.jsx("li",{children:"• Prevenir fraudes e garantir a segurança"})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"4. Base Legal"}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"O tratamento de seus dados pessoais é baseado nas seguintes hipóteses legais:"}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Consentimento:"})," Para comunicações de marketing e cookies não essenciais"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Execução de contrato:"})," Para fornecer os serviços contratados"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Legítimo interesse:"})," Para melhorias do serviço e segurança"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Cumprimento de obrigação legal:"})," Quando exigido por lei"]})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"5. Compartilhamento de Dados"}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"Não vendemos, alugamos ou compartilhamos seus dados pessoais com terceiros, exceto:"}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsx("li",{children:"• Com seu consentimento explícito"}),s.jsx("li",{children:"• Para cumprir obrigações legais"}),s.jsx("li",{children:"• Com prestadores de serviços essenciais (sob contrato de confidencialidade)"}),s.jsx("li",{children:"• Em caso de fusão, aquisição ou venda de ativos"})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(ds,{className:"w-6 h-6 mr-2 text-sage-green"}),"6. Cookies e Tecnologias Similares"]}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"Utilizamos cookies para melhorar sua experiência. Você pode gerenciar suas preferências de cookies através das configurações de privacidade."}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Cookies essenciais:"})," Necessários para o funcionamento básico"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Cookies de analytics:"})," Para entender como você usa nossa plataforma"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Cookies de marketing:"})," Para personalizar comunicações (com consentimento)"]})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"7. Seus Direitos"}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"Conforme a LGPD, você tem os seguintes direitos:"}),s.jsxs("ul",{className:"text-white/90 space-y-2",children:[s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Acesso:"})," Saber quais dados temos sobre você"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Correção:"})," Corrigir dados incompletos ou incorretos"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Exclusão:"})," Solicitar a remoção de seus dados"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Portabilidade:"})," Receber seus dados em formato estruturado"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Revogação:"})," Retirar seu consentimento a qualquer momento"]}),s.jsxs("li",{children:["• ",s.jsx("strong",{children:"Oposição:"})," Se opor ao tratamento em certas situações"]})]})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"8. Segurança dos Dados"}),s.jsx("p",{className:"text-white/90 leading-relaxed",children:"Implementamos medidas técnicas e organizacionais adequadas para proteger seus dados pessoais contra acesso não autorizado, alteração, divulgação ou destruição, incluindo criptografia, controles de acesso e monitoramento contínuo."})]}),s.jsxs("section",{className:"mb-8",children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"9. Retenção de Dados"}),s.jsx("p",{className:"text-white/90 leading-relaxed",children:"Mantemos seus dados pessoais apenas pelo tempo necessário para cumprir as finalidades descritas nesta política, respeitando os prazos legais de retenção e seus direitos como titular dos dados."})]}),s.jsxs("section",{className:"mb-8",children:[s.jsxs("h2",{className:"text-2xl font-semibold text-white mb-4 flex items-center",children:[s.jsx(bt,{className:"w-6 h-6 mr-2 text-sage-green"}),"10. Contato"]}),s.jsx("p",{className:"text-white/90 leading-relaxed mb-4",children:"Para exercer seus direitos ou esclarecer dúvidas sobre esta política, entre em contato:"}),s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsxs("p",{className:"text-white/90",children:[s.jsx("strong",{children:"E-mail:"})," privacidade@essentialfactor.com"]}),s.jsxs("p",{className:"text-white/90",children:[s.jsx("strong",{children:"Encarregado de Dados (DPO):"})," dpo@essentialfactor.com"]})]})]}),s.jsxs("section",{children:[s.jsx("h2",{className:"text-2xl font-semibold text-white mb-4",children:"11. Alterações na Política"}),s.jsx("p",{className:"text-white/90 leading-relaxed",children:"Esta política pode ser atualizada periodicamente. Notificaremos sobre mudanças significativas através de nossa plataforma ou por e-mail."}),s.jsxs("p",{className:"text-white/90 leading-relaxed mt-4",children:[s.jsx("strong",{children:"Última atualização:"})," ",new Date().toLocaleDateString("pt-BR")]})]})]})})]})})},ph=j.lazy(()=>le(()=>import("./RealtimeMetricsPage-6d14cc09.js"),["assets/RealtimeMetricsPage-6d14cc09.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),fh=j.lazy(()=>le(()=>import("./UserManagementPage-0f5d5264.js"),["assets/UserManagementPage-0f5d5264.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),gh=j.lazy(()=>le(()=>import("./ContentManagementPage-cc72bbf6.js"),["assets/ContentManagementPage-cc72bbf6.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),xh=j.lazy(()=>le(()=>import("./SystemSettingsPage-4b189d40.js"),["assets/SystemSettingsPage-4b189d40.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),yh=j.lazy(()=>le(()=>import("./PerformanceAnalysisPage-cab3e10a.js"),["assets/PerformanceAnalysisPage-cab3e10a.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),bh=j.lazy(()=>le(()=>import("./AnalyticsPage-3a0b7285.js"),["assets/AnalyticsPage-3a0b7285.js","assets/vendor-abc4fb99.js","assets/router-4d0cf74f.js","assets/ui-4d99af29.js","assets/pdf-eb8c75c2.js"])),wh=j.lazy(()=>le(()=>import("./WebhookTestPage-85bfd4c9.js"),["assets/WebhookTestPage-85bfd4c9.js","assets/vendor-abc4fb99.js","assets/ui-4d99af29.js","assets/router-4d0cf74f.js","assets/pdf-eb8c75c2.js"]));function vh(){const{isAuthenticated:r,hasCompletedOnboarding:e,loadUserData:t}=G(),[a,i]=j.useState(!0);return Pc(),j.useEffect(()=>{(async()=>{try{i(!0),await t()}catch(n){console.error("Erro ao inicializar aplicação:",n)}finally{setTimeout(()=>i(!1),100)}})()},[]),a?s.jsx(xi,{}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-deep-forest to-forest-green",children:[s.jsxs(Qi,{children:[s.jsx(U,{path:"/login",element:s.jsx(Fc,{})}),s.jsx(U,{path:"/register",element:s.jsx(zc,{})}),s.jsx(U,{path:"/forgot-password",element:s.jsx(Bc,{})}),s.jsx(U,{path:"/reset-password",element:s.jsx(Vc,{})}),s.jsx(U,{path:"/onboarding/welcome",element:s.jsx(Jc,{})}),s.jsx(U,{path:"/onboarding/results",element:s.jsx(ta,{children:s.jsx(Wc,{})})}),s.jsx(U,{path:"/onboarding/commitment",element:s.jsx(ta,{children:s.jsx(Kc,{})})}),s.jsx(U,{path:"/quiz/welcome",element:s.jsx(Qc,{})}),s.jsx(U,{path:"/quiz/questions",element:s.jsx(Yc,{})}),s.jsx(U,{path:"/quiz/analysis",element:s.jsx(Zc,{})}),s.jsx(U,{path:"/quiz/results",element:s.jsx(ed,{})}),s.jsx(U,{path:"/subscription",element:s.jsx(Ir,{})}),s.jsx(U,{path:"/privacy-policy",element:s.jsx(mh,{})}),s.jsxs(U,{path:"/app",element:s.jsx(ta,{requireOnboarding:!0,children:s.jsx(Oc,{})}),children:[s.jsx(U,{index:!0,element:s.jsx(Re,{to:"/app/dashboard",replace:!0})}),s.jsx(U,{path:"dashboard",element:s.jsx(gd,{})}),s.jsx(U,{path:"therapist-ai",element:s.jsx(Xu,{})}),s.jsx(U,{path:"journeys",element:s.jsx(Yu,{})}),s.jsx(U,{path:"journeys/:journeyId/day/:dayNumber",element:s.jsx(Zu,{})}),s.jsx(U,{path:"mind-vault",element:s.jsx(eh,{})}),s.jsx(U,{path:"mind-vault/player/:audioId",element:s.jsx(th,{})}),s.jsx(U,{path:"library",element:s.jsx(sh,{})}),s.jsx(U,{path:"profile",element:s.jsx(ah,{})}),s.jsx(U,{path:"subscription",element:s.jsx(Ir,{})}),s.jsx(U,{path:"privacy-settings",element:s.jsx(hh,{})}),s.jsx(U,{path:"admin",element:s.jsx(uh,{})}),s.jsx(U,{path:"admin/analytics",element:s.jsx(bh,{})}),s.jsx(U,{path:"admin/webhook-test",element:s.jsx(wh,{})}),s.jsx(U,{path:"admin/realtime-metrics",element:s.jsx(ph,{})}),s.jsx(U,{path:"admin/users",element:s.jsx(fh,{})}),s.jsx(U,{path:"admin/content",element:s.jsx(gh,{})}),s.jsx(U,{path:"admin/settings",element:s.jsx(xh,{})}),s.jsx(U,{path:"admin/performance",element:s.jsx(yh,{})})]}),s.jsx(U,{path:"/",element:r?e?s.jsx(Re,{to:"/app/dashboard",replace:!0}):s.jsx(Re,{to:"/onboarding/welcome",replace:!0}):s.jsx(Re,{to:"/onboarding/welcome",replace:!0})}),s.jsx(U,{path:"*",element:s.jsx(Re,{to:"/onboarding/welcome",replace:!0})})]}),s.jsx(Uc,{})]})}da.createRoot(document.getElementById("root")).render(s.jsx(z.StrictMode,{children:s.jsxs(Xi,{children:[s.jsx(vh,{}),s.jsx(ua,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}));export{Qu as T,ch as a,G as b,pt as c,dt as d,re as e,rh as g,s as j,ut as m,lh as s,Mc as u,as as w};
