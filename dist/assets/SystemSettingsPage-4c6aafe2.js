import{u as Q,d as w,m as N,j as e}from"./index-9af3c308.js";import{r}from"./vendor-abc4fb99.js";import{a as Y}from"./router-4d0cf74f.js";import{$ as S,g as k,h as g,a9 as ee,aj as se,m as C,L as te,i as ae,Z as ie,B as re,a7 as _,a3 as A,j as le,E as ne,ak as oe,o as T,w as q,al as ce,t as de,am as xe,an as me,ao as he,a1 as E}from"./ui-4d99af29.js";import"./pdf-eb8c75c2.js";const fe=()=>{const L=Y(),[l,P]=r.useState("general"),[c,d]=r.useState([]),[n,x]=r.useState([]),[M,I]=r.useState({}),[m,R]=r.useState(""),[D,b]=r.useState(!1),[h,v]=r.useState(!1),{isLoading:u,isAuthorized:p,error:f,logAction:y}=Q();r.useEffect(()=>{!u&&p&&(O(),U(),y("system_settings_access",{category:l}))},[u,p,l,y]);const O=async()=>{try{const s=await w.getSystemConfigs();d(s)}catch(s){console.error("Error loading configs:",s),d([{id:"1",category:"general",key:"app_name",value:"Essential Factor",type:"string",description:"Nome da aplicação exibido na interface",required:!0,sensitive:!1},{id:"2",category:"general",key:"app_version",value:"1.0.0",type:"string",description:"Versão atual da aplicação",required:!0,sensitive:!1},{id:"3",category:"general",key:"maintenance_mode",value:"false",type:"boolean",description:"Ativar modo de manutenção",required:!1,sensitive:!1},{id:"4",category:"general",key:"max_users",value:"10000",type:"number",description:"Número máximo de usuários permitidos",required:!1,sensitive:!1},{id:"5",category:"security",key:"jwt_secret",value:"super_secret_jwt_key_here",type:"password",description:"Chave secreta para tokens JWT",required:!0,sensitive:!0},{id:"6",category:"security",key:"session_timeout",value:"3600",type:"number",description:"Tempo limite da sessão em segundos",required:!0,sensitive:!1},{id:"7",category:"security",key:"password_min_length",value:"8",type:"number",description:"Comprimento mínimo da senha",required:!0,sensitive:!1},{id:"8",category:"security",key:"two_factor_enabled",value:"true",type:"boolean",description:"Habilitar autenticação de dois fatores",required:!1,sensitive:!1},{id:"9",category:"email",key:"smtp_host",value:"smtp.gmail.com",type:"string",description:"Servidor SMTP para envio de emails",required:!0,sensitive:!1},{id:"10",category:"email",key:"smtp_port",value:"587",type:"number",description:"Porta do servidor SMTP",required:!0,sensitive:!1},{id:"11",category:"email",key:"smtp_username",value:"noreply@essentialfactor.com",type:"string",description:"Usuário para autenticação SMTP",required:!0,sensitive:!1},{id:"12",category:"email",key:"smtp_password",value:"email_password_here",type:"password",description:"Senha para autenticação SMTP",required:!0,sensitive:!0},{id:"13",category:"api",key:"gemini_api_key",value:"AIzaSyBt4vyuZZhxDd5Vz1I4WfkTzKWht7SdcNA",type:"password",description:"Chave da API do Gemini AI",required:!0,sensitive:!0},{id:"14",category:"api",key:"rate_limit_per_minute",value:"100",type:"number",description:"Limite de requisições por minuto por usuário",required:!0,sensitive:!1},{id:"15",category:"api",key:"api_timeout",value:"30000",type:"number",description:"Timeout das requisições API em milissegundos",required:!0,sensitive:!1},{id:"16",category:"notifications",key:"push_notifications_enabled",value:"true",type:"boolean",description:"Habilitar notificações push",required:!1,sensitive:!1},{id:"17",category:"notifications",key:"email_notifications_enabled",value:"true",type:"boolean",description:"Habilitar notificações por email",required:!1,sensitive:!1}])}},U=async()=>{try{const s=await N.getServiceStatus();x(s)}catch(s){console.error("Error loading services:",s),x([])}},j=[{id:"general",label:"Geral",icon:g},{id:"security",label:"Segurança",icon:k},{id:"email",label:"Email",icon:ae},{id:"api",label:"APIs",icon:ie},{id:"notifications",label:"Notificações",icon:re},{id:"services",label:"Serviços",icon:_},{id:"monitoring",label:"Monitoramento",icon:A}],V=c.filter(s=>s.category===l&&(s.key.toLowerCase().includes(m.toLowerCase())||s.description.toLowerCase().includes(m.toLowerCase()))),H=s=>{switch(s){case"online":return T;case"offline":return E;case"warning":return q;case"maintenance":return g;default:return E}},B=s=>{switch(s){case"online":return"text-success-green";case"offline":return"text-error-red";case"warning":return"text-warning-yellow";case"maintenance":return"text-bright-gold";default:return"text-pearl-white/60"}},z=s=>{const t={online:"bg-success-green/20 text-success-green border-success-green/30",offline:"bg-error-red/20 text-error-red border-error-red/30",warning:"bg-warning-yellow/20 text-warning-yellow border-warning-yellow/30",maintenance:"bg-bright-gold/20 text-bright-gold border-bright-gold/30"},i={online:"Online",offline:"Offline",warning:"Atenção",maintenance:"Manutenção"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${t[s]}`,children:i[s]})},o=(s,t)=>{d(i=>i.map(a=>a.id===s?{...a,value:t}:a)),b(!0)},$=s=>{I(t=>({...t,[s]:!t[s]}))},G=async()=>{try{await w.updateSystemConfigs(c),b(!1)}catch(s){console.error("Error saving configurations:",s)}},W=async()=>{v(!0);try{const s=await N.testAllServices();x(s)}catch(s){console.error("Error testing services:",s)}finally{v(!1)}},Z=()=>{const s=c.filter(X=>!X.sensitive),t=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),i=URL.createObjectURL(t),a=document.createElement("a");a.href=i,a.download="system-config.json",a.click(),URL.revokeObjectURL(i)},J=s=>{const i=s.type==="password"&&!M[s.id];switch(s.type){case"boolean":return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:s.value==="true",onChange:a=>o(s.id,a.target.checked.toString()),className:"rounded border-white/20 bg-white/10 text-royal-gold focus:ring-royal-gold"}),e.jsx("span",{className:"text-pearl-white/80 text-sm",children:s.value==="true"?"Habilitado":"Desabilitado"})]});case"number":return e.jsx("input",{type:"number",value:s.value,onChange:a=>o(s.id,a.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:border-royal-gold"});case"password":return e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:i?"password":"text",value:i?"••••••••••••":s.value,onChange:a=>!i&&o(s.id,a.target.value),readOnly:i,className:"w-full px-3 py-2 pr-20 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:border-royal-gold"}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>$(s.id),className:"p-1 text-pearl-white/60 hover:text-white transition-colors",children:i?e.jsx(le,{className:"w-4 h-4"}):e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("button",{type:"button",onClick:()=>navigator.clipboard.writeText(s.value),className:"p-1 text-pearl-white/60 hover:text-white transition-colors",children:e.jsx(oe,{className:"w-4 h-4"})})]})]});default:return e.jsx("input",{type:"text",value:s.value,onChange:a=>o(s.id,a.target.value),className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:border-royal-gold"})}},F=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(T,{className:"w-8 h-8 text-success-green"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Serviços Online"}),e.jsx("p",{className:"text-2xl font-bold text-success-green",children:n.filter(s=>s.status==="online").length})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(q,{className:"w-8 h-8 text-warning-yellow"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Com Problemas"}),e.jsx("p",{className:"text-2xl font-bold text-warning-yellow",children:n.filter(s=>s.status==="warning"||s.status==="offline").length})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(A,{className:"w-8 h-8 text-bright-gold"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Tempo Resposta"}),e.jsxs("p",{className:"text-2xl font-bold text-bright-gold",children:[Math.round(n.reduce((s,t)=>s+t.responseTime,0)/n.length),"ms"]})]})]})}),e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(_,{className:"w-8 h-8 text-royal-purple"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Uptime Médio"}),e.jsx("p",{className:"text-2xl font-bold text-royal-purple",children:"99.1%"})]})]})})]}),e.jsxs("div",{className:"glass-card",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Status dos Serviços"}),e.jsxs("button",{onClick:W,disabled:h,className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50",children:[e.jsx(S,{className:`w-4 h-4 ${h?"animate-spin":""}`}),e.jsx("span",{children:h?"Testando...":"Testar Todos"})]})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:n.map((s,t)=>{const i=H(s.status);return e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:t*.1},className:"flex items-center justify-between p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(i,{className:`w-6 h-6 ${B(s.status)}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-white font-semibold",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-pearl-white/60",children:[e.jsxs("span",{children:["Uptime: ",s.uptime]}),e.jsxs("span",{children:["Resposta: ",s.responseTime,"ms"]}),s.version&&e.jsxs("span",{children:["v",s.version]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[z(s.status),s.url&&e.jsx("button",{onClick:()=>window.open(s.url,"_blank"),className:"p-2 text-pearl-white/60 hover:text-white transition-colors",title:"Abrir serviço",children:e.jsx(ce,{className:"w-4 h-4"})})]})]},s.name)})})})]})]}),K=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{className:"w-8 h-8 text-royal-gold"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"CPU"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"45%"})]})]}),e.jsx("div",{className:"mt-2 bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-royal-gold rounded-full h-2 transition-all duration-300",style:{width:"45%"}})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xe,{className:"w-8 h-8 text-bright-gold"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Memória"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"67%"})]})]}),e.jsx("div",{className:"mt-2 bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-bright-gold rounded-full h-2 transition-all duration-300",style:{width:"67%"}})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(me,{className:"w-8 h-8 text-success-green"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Disco"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"67%"})]})]}),e.jsx("div",{className:"mt-2 bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-success-green rounded-full h-2 transition-all duration-300",style:{width:"67%"}})})]}),e.jsxs("div",{className:"glass-card p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(he,{className:"w-8 h-8 text-royal-purple"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Rede"}),e.jsx("p",{className:"text-2xl font-bold text-white",children:"98%"})]})]}),e.jsx("div",{className:"mt-2 bg-white/10 rounded-full h-2",children:e.jsx("div",{className:"bg-royal-purple rounded-full h-2 transition-all duration-300",style:{width:"98%"}})})]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Configurações de Monitoramento"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-pearl-white/80 text-sm font-medium mb-2",children:"Intervalo de Coleta (segundos)"}),e.jsx("input",{type:"number",defaultValue:"30",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-royal-gold"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-pearl-white/80 text-sm font-medium mb-2",children:"Retenção de Dados (dias)"}),e.jsx("input",{type:"number",defaultValue:"30",className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-royal-gold"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-white/20 bg-white/10 text-royal-gold focus:ring-royal-gold"}),e.jsx("label",{className:"text-pearl-white/80 text-sm",children:"Alertas por Email"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"rounded border-white/20 bg-white/10 text-royal-gold focus:ring-royal-gold"}),e.jsx("label",{className:"text-pearl-white/80 text-sm",children:"Análise com Gemini AI"})]})]})]})]});return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue flex items-center justify-center",children:e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(S,{className:"w-16 h-16 text-royal-gold mx-auto mb-4 animate-spin"}),e.jsx("h1",{className:"text-white text-2xl font-bold mb-2",children:"Verificando Acesso"}),e.jsx("p",{className:"text-pearl-white/80",children:"Validando suas credenciais administrativas..."})]})}):!p||f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue flex items-center justify-center",children:e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(k,{className:"w-16 h-16 text-error-red mx-auto mb-4"}),e.jsx("h1",{className:"text-white text-2xl font-bold mb-2",children:"Acesso Restrito"}),e.jsx("p",{className:"text-pearl-white/80 mb-6",children:f||"Apenas Super Administradores podem acessar as configurações do sistema."}),e.jsx("button",{onClick:()=>L("/admin"),className:"bg-royal-gold hover:bg-bright-gold text-deep-navy px-6 py-2 rounded-lg font-semibold transition-colors",children:"Voltar ao Painel"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Configurações do Sistema"}),e.jsx("p",{className:"text-pearl-white/80",children:"Gerencie todas as configurações e serviços da plataforma"})]}),e.jsx("div",{className:"glass-card mb-8",children:e.jsx("div",{className:"flex flex-wrap border-b border-white/10",children:j.map(s=>{const t=s.icon;return e.jsxs("button",{onClick:()=>P(s.id),className:`flex items-center space-x-2 px-6 py-4 font-medium transition-colors ${l===s.id?"text-royal-gold border-b-2 border-royal-gold":"text-pearl-white/60 hover:text-white"}`,children:[e.jsx(t,{className:"w-5 h-5"}),e.jsx("span",{children:s.label})]},s.id)})})}),l==="services"?F():l==="monitoring"?K():e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"glass-card p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar configuração...",value:m,onChange:s=>R(s.target.value),className:"pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:border-royal-gold w-64"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:Z,className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(ee,{className:"w-4 h-4"}),e.jsx("span",{children:"Exportar"})]}),D&&e.jsxs("button",{onClick:G,className:"neuro-button bg-success-green hover:bg-success-green/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Salvar Alterações"})]})]})]})}),e.jsxs("div",{className:"glass-card",children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("h3",{className:"text-xl font-semibold text-white capitalize",children:["Configurações de ",j.find(s=>s.id===l)?.label]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:V.map((s,t)=>e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-white font-semibold",children:s.key}),s.required&&e.jsx("span",{className:"px-2 py-1 bg-error-red/20 text-error-red text-xs rounded-full border border-error-red/30",children:"Obrigatório"}),s.sensitive&&e.jsx(te,{className:"w-4 h-4 text-warning-yellow"})]}),e.jsx("p",{className:"text-pearl-white/70 text-sm",children:s.description})]})}),e.jsx("div",{className:"mt-3",children:J(s)})]},s.id))})})]})]})]})})};export{fe as default};
