import{b as H,u as I,j as e,d as S}from"./index-9af3c308.js";import{r as o}from"./vendor-abc4fb99.js";import{a as K}from"./router-4d0cf74f.js";import{$ as Q,g as W,a4 as y,j as k,G as X,K as Y,V as ee,ae as se,a9 as te,af as ae,m as re,q as ie,ag as le,aa as oe,ai as ne,i as de,b as ce,c as xe}from"./ui-4d99af29.js";import"./pdf-eb8c75c2.js";const we=()=>{H();const M=K(),{isLoading:P,isAuthorized:C,error:D,logAction:E}=I(),[n,b]=o.useState([]),[u,Z]=o.useState(""),[j,V]=o.useState("all"),[w,L]=o.useState("all"),[v,R]=o.useState("all"),[m,A]=o.useState([]),[l,f]=o.useState(1),[x,q]=o.useState("updatedAt"),[T,z]=o.useState("desc"),h=12;o.useEffect(()=>{if(!C)return;(async()=>{try{await E("access_content_management",{page:"ContentManagementPage"});const t=await S.getContentMetrics();b(t)}catch(t){console.error("Erro ao carregar conteúdos:",t),b([{id:"1",title:"Jornada da Autoestima",type:"journey",status:"published",author:"Dr. Ana Silva",createdAt:"2024-01-10T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z",publishedAt:"2024-01-12T00:00:00Z",views:1247,likes:89,rating:4.8,category:"Desenvolvimento Pessoal",tags:["autoestima","confiança","mindset"],description:"Uma jornada completa para desenvolver a autoestima e confiança pessoal"},{id:"2",title:"Meditação Matinal",type:"audio",status:"published",author:"Prof. João Santos",createdAt:"2024-01-08T00:00:00Z",updatedAt:"2024-01-14T00:00:00Z",publishedAt:"2024-01-09T00:00:00Z",views:892,likes:156,rating:4.9,duration:"15:30",category:"Meditação",tags:["meditação","manhã","mindfulness"],description:"Áudio guiado para meditação matinal e início do dia com energia positiva"},{id:"3",title:"Template Boas-vindas Premium",type:"template",status:"published",author:"Equipe Marketing",createdAt:"2024-01-05T00:00:00Z",updatedAt:"2024-01-13T00:00:00Z",publishedAt:"2024-01-06T00:00:00Z",views:456,likes:23,rating:4.5,category:"Email Marketing",tags:["boas-vindas","premium","onboarding"],description:"Template de email para dar boas-vindas aos novos usuários premium"},{id:"4",title:"Respiração Consciente",type:"audio",status:"published",author:"Dra. Maria Costa",createdAt:"2024-01-03T00:00:00Z",updatedAt:"2024-01-12T00:00:00Z",publishedAt:"2024-01-04T00:00:00Z",views:634,likes:78,rating:4.6,duration:"12:45",category:"Respiração",tags:["respiração","relaxamento","ansiedade"],description:"Exercícios de respiração consciente para reduzir ansiedade e stress"},{id:"5",title:"Protocolo Anti-Ansiedade",type:"journey",status:"draft",author:"Dr. Pedro Lima",createdAt:"2024-01-14T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z",views:0,likes:0,rating:0,category:"Saúde Mental",tags:["ansiedade","protocolo","terapia"],description:"Protocolo completo para gerenciamento e redução da ansiedade"},{id:"6",title:"Mindfulness para Iniciantes",type:"video",status:"scheduled",author:"Prof. Carla Oliveira",createdAt:"2024-01-12T00:00:00Z",updatedAt:"2024-01-15T00:00:00Z",publishedAt:"2024-01-20T00:00:00Z",views:0,likes:0,rating:0,duration:"25:15",category:"Mindfulness",tags:["mindfulness","iniciantes","meditação"],description:"Vídeo introdutório sobre mindfulness para pessoas que estão começando"}])}})()},[]);const B=["Desenvolvimento Pessoal","Meditação","Email Marketing","Respiração","Saúde Mental","Mindfulness"],p=[...n.filter(s=>{const t=s.title.toLowerCase().includes(u.toLowerCase())||s.description.toLowerCase().includes(u.toLowerCase())||s.tags.some(c=>c.toLowerCase().includes(u.toLowerCase())),a=j==="all"||s.type===j,i=w==="all"||s.status===w,r=v==="all"||s.category===v;return t&&a&&i&&r})].sort((s,t)=>{let a=s[x],i=t[x];return(x==="createdAt"||x==="updatedAt"||x==="publishedAt")&&(a=new Date(a||0).getTime(),i=new Date(i||0).getTime()),T==="asc"?a>i?1:-1:a<i?1:-1}),d=Math.ceil(p.length/h),F=p.slice((l-1)*h,l*h),O=s=>{switch(s){case"journey":return xe;case"audio":return ce;case"template":return de;case"article":return y;case"video":return ne;default:return y}},$=s=>{switch(s){case"journey":return"text-royal-gold";case"audio":return"text-bright-gold";case"template":return"text-success-green";case"article":return"text-royal-purple";case"video":return"text-error-red";default:return"text-pearl-white/60"}},G=s=>{const t={published:"bg-success-green/20 text-success-green border-success-green/30",draft:"bg-warning-yellow/20 text-warning-yellow border-warning-yellow/30",archived:"bg-pearl-white/20 text-pearl-white/60 border-pearl-white/30",scheduled:"bg-bright-gold/20 text-bright-gold border-bright-gold/30"},a={published:"Publicado",draft:"Rascunho",archived:"Arquivado",scheduled:"Agendado"};return e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${t[s]}`,children:a[s]})},J=s=>new Date(s).toLocaleDateString("pt-BR"),U=s=>{A(t=>t.includes(s)?t.filter(a=>a!==s):[...t,s])},N=s=>{console.log(`Ação em lote: ${s} para conteúdos:`,m),A([])},_=async s=>{if(confirm("Tem certeza que deseja excluir este conteúdo?"))try{await S.deleteContent(s),b(t=>t.filter(a=>a.id!==s))}catch(t){console.error("Erro ao excluir conteúdo:",t),alert("Erro ao excluir conteúdo. Tente novamente.")}},g=(()=>{const s=n.reduce((r,c)=>r+c.views,0),t=n.reduce((r,c)=>r+c.likes,0),a=n.filter(r=>r.rating>0).reduce((r,c)=>r+c.rating,0)/n.filter(r=>r.rating>0).length||0,i=n.filter(r=>r.status==="published").length;return{totalViews:s,totalLikes:t,avgRating:a,publishedCount:i}})();return P?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue flex items-center justify-center",children:e.jsxs("div",{className:"glass-card p-8 text-center",children:[e.jsx(Q,{className:"w-8 h-8 text-royal-gold animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Verificando permissões..."})]})}):!C||D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue flex items-center justify-center",children:e.jsxs("div",{className:"glass-card p-8 text-center max-w-md",children:[e.jsx(W,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Acesso Negado"}),e.jsx("p",{className:"text-pearl-white/80 mb-6",children:"Você não tem permissão para acessar o gerenciamento de conteúdo."}),e.jsx("button",{onClick:()=>M("/dashboard"),className:"px-6 py-2 bg-royal-gold hover:bg-royal-gold/80 text-white rounded-lg transition-colors",children:"Voltar ao Dashboard"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-deep-navy via-royal-purple to-midnight-blue p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Gerenciamento de Conteúdo"}),e.jsx("p",{className:"text-pearl-white/80",children:"Gerencie jornadas, áudios, templates e todo o conteúdo da plataforma"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(y,{className:"w-8 h-8 text-royal-gold"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Total Conteúdos"}),e.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Publicados"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g.publishedCount}),e.jsxs("p",{className:"text-success-green text-sm mt-2",children:["+",n.filter(s=>s.status==="draft").length," rascunhos"]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(k,{className:"w-8 h-8 text-bright-gold"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Visualizações"}),e.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Total"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g.totalViews.toLocaleString()}),e.jsx("p",{className:"text-royal-gold text-sm mt-2",children:"Este mês"})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(X,{className:"w-8 h-8 text-success-green"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Avaliação Média"}),e.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Geral"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:g.avgRating.toFixed(1)}),e.jsxs("p",{className:"text-success-green text-sm mt-2",children:["★ ",g.totalLikes," curtidas"]})]}),e.jsxs("div",{className:"glass-card p-6",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx(Y,{className:"w-8 h-8 text-royal-purple"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Engajamento"}),e.jsx("p",{className:"text-pearl-white/60 text-sm",children:"Taxa média"})]})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:"87%"}),e.jsx("p",{className:"text-success-green text-sm mt-2",children:"+12% vs mês anterior"})]})]}),e.jsxs("div",{className:"glass-card p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 mb-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-pearl-white/60 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Buscar conteúdo...",value:u,onChange:s=>Z(s.target.value),className:"pl-10 pr-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-pearl-white/60 focus:outline-none focus:border-royal-gold w-64"})]}),e.jsxs("select",{value:j,onChange:s=>V(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-royal-gold",children:[e.jsx("option",{value:"all",children:"Todos os tipos"}),e.jsx("option",{value:"journey",children:"Jornadas"}),e.jsx("option",{value:"audio",children:"Áudios"}),e.jsx("option",{value:"template",children:"Templates"}),e.jsx("option",{value:"article",children:"Artigos"}),e.jsx("option",{value:"video",children:"Vídeos"})]}),e.jsxs("select",{value:w,onChange:s=>L(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-royal-gold",children:[e.jsx("option",{value:"all",children:"Todos os status"}),e.jsx("option",{value:"published",children:"Publicado"}),e.jsx("option",{value:"draft",children:"Rascunho"}),e.jsx("option",{value:"scheduled",children:"Agendado"}),e.jsx("option",{value:"archived",children:"Arquivado"})]}),e.jsxs("select",{value:v,onChange:s=>R(s.target.value),className:"px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:border-royal-gold",children:[e.jsx("option",{value:"all",children:"Todas as categorias"}),B.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{className:"neuro-button bg-success-green hover:bg-success-green/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:"Novo Conteúdo"})]}),e.jsxs("button",{className:"neuro-button bg-royal-gold hover:bg-royal-gold/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(te,{className:"w-4 h-4"}),e.jsx("span",{children:"Exportar"})]}),e.jsxs("button",{className:"neuro-button bg-bright-gold hover:bg-bright-gold/80 text-white px-4 py-2 rounded-lg transition-colors flex items-center space-x-2",children:[e.jsx(ae,{className:"w-4 h-4"}),e.jsx("span",{children:"Importar"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:"text-pearl-white/80 text-sm",children:"Ordenar por:"}),e.jsxs("select",{value:x,onChange:s=>q(s.target.value),className:"px-3 py-1 bg-white/10 border border-white/20 rounded text-white text-sm focus:outline-none focus:border-royal-gold",children:[e.jsx("option",{value:"updatedAt",children:"Última atualização"}),e.jsx("option",{value:"createdAt",children:"Data de criação"}),e.jsx("option",{value:"publishedAt",children:"Data de publicação"}),e.jsx("option",{value:"views",children:"Visualizações"}),e.jsx("option",{value:"likes",children:"Curtidas"}),e.jsx("option",{value:"rating",children:"Avaliação"}),e.jsx("option",{value:"title",children:"Título"})]}),e.jsx("button",{onClick:()=>z(s=>s==="asc"?"desc":"asc"),className:"px-3 py-1 bg-white/10 hover:bg-white/20 border border-white/20 rounded text-white text-sm transition-colors",children:T==="asc"?"↑ Crescente":"↓ Decrescente"})]}),m.length>0&&e.jsx("div",{className:"mt-4 p-4 bg-royal-gold/20 border border-royal-gold/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-white",children:[m.length," conteúdo(s) selecionado(s)"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>N("publish"),className:"px-3 py-1 bg-success-green hover:bg-success-green/80 text-white rounded transition-colors text-sm",children:"Publicar"}),e.jsx("button",{onClick:()=>N("archive"),className:"px-3 py-1 bg-warning-yellow hover:bg-warning-yellow/80 text-white rounded transition-colors text-sm",children:"Arquivar"}),e.jsx("button",{onClick:()=>N("delete"),className:"px-3 py-1 bg-error-red hover:bg-error-red/80 text-white rounded transition-colors text-sm",children:"Excluir"})]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-8",children:F.map((s,t)=>{const a=O(s.type);return e.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.1},className:"glass-card overflow-hidden hover:scale-105 transition-transform duration-300",children:[e.jsxs("div",{className:"p-4 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m.includes(s.id),onChange:()=>U(s.id),className:"rounded border-white/20 bg-white/10 text-royal-gold focus:ring-royal-gold"}),e.jsx(a,{className:`w-5 h-5 ${$(s.type)}`})]}),G(s.status)]}),e.jsx("h3",{className:"text-white font-semibold text-lg mb-2 line-clamp-2",children:s.title}),e.jsx("p",{className:"text-pearl-white/70 text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-pearl-white/60",children:[e.jsxs("span",{children:["Por ",s.author]}),s.duration&&e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(ie,{className:"w-3 h-3"}),e.jsx("span",{children:s.duration})]})]})]}),e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:s.views.toLocaleString()}),e.jsx("p",{className:"text-pearl-white/60 text-xs",children:"Visualizações"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:s.likes}),e.jsx("p",{className:"text-pearl-white/60 text-xs",children:"Curtidas"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:s.rating>0?s.rating.toFixed(1):"-"}),e.jsx("p",{className:"text-pearl-white/60 text-xs",children:"Avaliação"})]})]})}),e.jsx("div",{className:"p-4 border-b border-white/10",children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map(i=>e.jsxs("span",{className:"px-2 py-1 bg-white/10 text-pearl-white/80 text-xs rounded-full",children:["#",i]},i)),s.tags.length>3&&e.jsxs("span",{className:"px-2 py-1 bg-white/10 text-pearl-white/60 text-xs rounded-full",children:["+",s.tags.length-3]})]})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{className:"p-2 text-royal-gold hover:bg-royal-gold/20 rounded-lg transition-colors",title:"Editar",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("button",{className:"p-2 text-bright-gold hover:bg-bright-gold/20 rounded-lg transition-colors",title:"Visualizar",children:e.jsx(k,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(s.id),className:"p-2 text-error-red hover:bg-error-red/20 rounded-lg transition-colors",title:"Excluir",children:e.jsx(oe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"text-xs text-pearl-white/60",children:J(s.updatedAt)})]})})]},s.id)})}),d>1&&e.jsx("div",{className:"glass-card p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-pearl-white/60 text-sm",children:["Mostrando ",(l-1)*h+1," a ",Math.min(l*h,p.length)," de ",p.length," conteúdos"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(s=>Math.max(s-1,1)),disabled:l===1,className:"px-3 py-1 bg-white/10 hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Anterior"}),Array.from({length:Math.min(d,5)},(s,t)=>{let a;return d<=5||l<=3?a=t+1:l>=d-2?a=d-4+t:a=l-2+t,e.jsx("button",{onClick:()=>f(a),className:`px-3 py-1 rounded transition-colors ${l===a?"bg-royal-gold text-white":"bg-white/10 hover:bg-white/20 text-white"}`,children:a},a)}),e.jsx("button",{onClick:()=>f(s=>Math.min(s+1,d)),disabled:l===d,className:"px-3 py-1 bg-white/10 hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Próximo"})]})]})})]})})};export{we as default};
